{% extends 'base.html' %}
{% load tz %}
{% get_current_timezone as TIME_ZONE %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% load static %}
{% load i18n %}
{% load index %}
{% get_current_language as LANGUAGE_CODE %}

{% block title %} Create your research conference {% endblock %}
{% block extra_head_tags %}
  <meta name="description" content="Create a Carbon-Free virtual meeting in a few clicks" />
  <link rel="canonical" href="https://www.carbonfreeconf.com/create-conference/" />
{% endblock %}

{% block extrahead %}
{{ createconf_form.media }}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://export.dhtmlx.com/scheduler/api.js" defer></script>
<script src="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler.js"></script>
<link rel="stylesheet" href="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler.css" type="text/css" media="print" onload="this.media='all'">

<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.6/handlebars.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" media="print" onload="this.media='all'">
<!--<script src="{% static "vendor/@fancyapps/fancybox/jquery.fancybox.min.js" %}"></script>-->
<script src="https://cdn.jsdelivr.net/gh/Wruczek/Bootstrap-Cookie-Alert@gh-pages/cookiealert.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wruczek/Bootstrap-Cookie-Alert@gh-pages/cookiealert.css" media="print" onload="this.media='all'">
<!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" media="print" onload="this.media='all'">-->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" media="print" onload="this.media='all'">
<script src="{% static "js/summernote-math.js" %}"></script>

{% endblock %}

{% block header_class %}grey-nav{% endblock %}

{% block content %}

  <script>
  $(document).ready(function(){
      $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
          localStorage.setItem('activeTab', $(e.target).attr('href'));
      });
      var activeTab = localStorage.getItem('activeTab');
      if(activeTab){
          $('#myTab a[href="' + activeTab + '"]').tab('show');
      }
  });
  </script>

<!-- <main>
  <div class="intro-create">
    <div class="content">
      <div class="pretitle">Let's go</div>
      <h1>{% trans "Create your <span>conference</span>!" %}</h1>
      <p>You can create a conference for free now by filling in this form to check how it all works. You can cancel and delete it any time at no cost. If you want the conference to happen you have to pay before it starts, otherwise you will not be charged and the conference will not run. If you just want to use are tools to create a website and manage your participants without running the meeting with us, you can do so for free. <b>All the choices you make here can be changed later so that you can still chat with co-organizers and update things as it goes!</b></p>
      <a href="{% url 'my_app:exampleModalcrea' %}">In doubt? Read the guide!</a>
    </div>
  </div>
  <section class="create">
    <div class="modify">
      {% if conf_list_user|length > 0 %}
      <form name=changeconfForm action="{% url 'my_app:createconf' %}" method="POST">
        <label for="conf-select">Modify another of your conferences instead?</label>
        {% csrf_token %}
        <select name="conf" class="browser-default custom-select mb-4" id="conf-select" onChange="changeconfForm.submit();">
          <option value="">--Please choose another conference to update it--</option>
          {% for conf in conf_list_user %}
            <option value="{{ conf.title }}">{% if conf.masterconf or conf.daughterconf %}{% if conf.daughterconfstarwars %}{% if conf.masterconfdaughtername %}{{ conf.masterconfdaughtername }}{% else %}Plenaries{% endif %}{% else %} S{{ conf.masterconfdaughterposition }} {% endif %} - {% endif %}{{ conf.title|ellipses:50 }}</option>
          {% endfor %}
        </select>
      </form>
      {% endif %}
    </div>
    <form name="createconf_form" enctype="multipart/form-data" method="POST" action="{% url 'my_app:createconf' %}">
      {% csrf_token %}
      {{ createconf_form.title|as_crispy_field }}
      <div id="testalr"></div>
      {{ createconf_form.abstract|as_crispy_field }}
      <svg id="tooltipSessions" xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-.001 5.75c.69 0 1.251.56 1.251 1.25s-.561 1.25-1.251 1.25-1.249-.56-1.249-1.25.559-1.25 1.249-1.25zm2.001 12.25h-4v-1c.484-.179 1-.201 1-.735v-4.467c0-.534-.516-.618-1-.797v-1h3v6.265c0 .535.517.558 1 .735v.999z"/></svg>
      {{ createconf_form.priv|as_crispy_field }}
      {{ createconf_form.start_date|as_crispy_field }}

      {{ createconf_form.end_date|as_crispy_field }}
      {{ createconf_form.size|as_crispy_field }}
      {{ createconf_form.subject|as_crispy_field }}
      {{ createconf_form.justtools|as_crispy_field }}
  <div id="nottool">
    <svg id="tooltipFreeTools" xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-.001 5.75c.69 0 1.251.56 1.251 1.25s-.561 1.25-1.251 1.25-1.249-.56-1.249-1.25.559-1.25 1.249-1.25zm2.001 12.25h-4v-1c.484-.179 1-.201 1-.735v-4.467c0-.534-.516-.618-1-.797v-1h3v6.265c0 .535.517.558 1 .735v.999z"/></svg>
      <div>{{ createconf_form.feeunique|as_crispy_field }}</div>
      <div id="nopeu"></div>
      <div id="feesu" style="display: none;">
          <div><b>The fee per participant is <span id="totab" style="font-size: 18px;"></span><span id="tota" style="font-size: 18px;">{{ COST_PER_PARTICIPANT }}</span><span id="totaa" style="font-size: 18px;"> €</span></b></div>
          <div>{{ createconf_form.fee_currency_unique|as_crispy_field }}</div>
      </div>
    <svg id="tooltipFees" xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-.001 5.75c.69 0 1.251.56 1.251 1.25s-.561 1.25-1.251 1.25-1.249-.56-1.249-1.25.559-1.25 1.249-1.25zm2.001 12.25h-4v-1c.484-.179 1-.201 1-.735v-4.467c0-.534-.516-.618-1-.797v-1h3v6.265c0 .535.517.558 1 .735v.999z"/></svg>
    {{ createconf_form.fee|as_crispy_field }}
      <div id="nope"></div>
      <div id="fees" style="display: none;">
          <div class="row">
          <div class="col">
              {{ createconf_form.fee_amount|as_crispy_field }}
              <div class="col">{{ createconf_form.fee_variable|as_crispy_field }}</div>
          </div>
          <div class="col">{{ createconf_form.fee_currency|as_crispy_field }}</div>
          <div class="col">{{ createconf_form.fee_to_carbon|as_crispy_field }}</div>
          </div>
          <div class="row">
          <div class="col" id="amount">
          </div>
          </div>
      </div>
      {{ createconf_form.hybrid|as_crispy_field }}
      {{ createconf_form.proceedin|as_crispy_field }}
      <input type="checkbox" value="multi" id="multi" name="multi"/>
      <label for="multi">Is it a conference with more than one parallel session?</label><br/>
      <div id="multisession">
          <div style="margin-left: 30px">{{ createconf_form.masterconf|as_crispy_field }}</div>
          <div style="margin-left: 30px">{{ createconf_form.daughterconf|as_crispy_field }}</div>
      </div>
      <div id="mastpass">
          <div style="margin-left: 60px">{{ createconf_form.masterconfpass|as_crispy_field }}</div>
      </div>
      </div>
      {% if mastconfdontexist %}
      <div style="color: red"><strong>This master conference ID does not exist</strong></div>
      {% endif %}
      {% if mastconfalreadypaid %}
      <div style="color: red"><strong>No more sessions can be created (contact the organizers for more details).</strong></div>
      {% endif %}
      {% if mastconfdate %}
      <div style="color: red"><strong>The dates for your session do not fit in between the dates chosen for the master conference (see with the master conference organizers if the starting and/or ending dates needs to be updated)</strong></div>
      {% endif %}
      <input type="hidden" name="conf" class="conf" value="conf" />
      <div class="mt-4 mb-3"><button type="submit" id="regconf" class="btn btn-success" onClick="this.form.submit(); this.disabled=true; this.innerText = 'Creating the conference...';"><i class="fas fa-heart"></i> Create the conference</button></div>
      {% if conffailed %}
      <div style="color: red"><strong>The conference was not created, please try again later</strong></div>
      {% endif %}
    </form>
  </section>
</main> -->

<style>

.resp-iframe2{
    /*document.getElementById("inlineFrameExample").style.height = "90%";*/
    /*height: 80%!important;*/
    min-height: 90vh
}

.select2-container
{
    display:block!important;
}

  .containerpage
  {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 10vh;
  }

  .up-arrow {
      position: absolute; /* magic */
    width: 0;
    height: 0;
      padding: 4px 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid black;
    display: inline-block;
  }

  .down-arrow {
      width: 0;
    height: 0;
      /*padding: 3px 0;*/
      margin-bottom: -2px;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid black;
    display: inline-block;

  }

  /* Large rounded green border */
  hr.new5 {
    border: 10px solid #9C3848;
    border-radius: 5px;
  }

  #multisession {
      display: none;
  }
  #mastpass {
      display: none;
  }
  .collapse2 {
      display: none;
  }
  .collapse24 {
      display: none;
  }

  #feedback {
    float: left;
    position: fixed;
    top: calc(50% - 47px);
    left: 0;
      z-index: 100;
      display: none !important;
  }

  #feedback a {
    background: #9AD4D6;
    border-radius: 5px 0 0 5px;
    box-shadow: 0 0 3px rgba(0, 0, 0, .3);
    border: 3px solid #fff;
    border-left: 0;
    display: block;
    padding: 20px 12px;
    transition: all .2s ease-in-out;
  }

  #feedback a:hover {
    padding-left: 20px;
  }
  .container {
      /*document.getElementById("inlineFrameExample").style.width = "100%";*/

      /*padding-left: 50px;
      padding-right: 70px;*/
      margin-left: 20px;
      margin-right: 20px;
      max-width: none;

  }

  textarea {
    width: 100%;
    box-sizing: border-box;
    height: 300px;
    line-height: 1.2;
    resize: none;
    margin-top: 5px;
    /*padding: 4px;*/
  }

  textarea:focus {
    outline: none;
  }

  span {
    /* font-size: 13px; */
  }

  span.username-label {
    font-weight: bold;
  }

  div.vis-tooltip {
      color:black!important;
      border: 3px solid #444444!important;
      background-color: #EEEEEE!important;;/*lightsteelblue!important;*/
      max-width:400px;
      word-break: normal|break-all|keep-all|break-word|initial|inherit;
      white-space: normal!important;
  }
  </style>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@convergence/html-text-collab-ext@0.2.0/css/html-text-collab-ext.min.css" />

  <script>
    $(function () {
      $('[data-toggle="popover"]').popover()
    })

    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
</script>

<script>
    $(document).ready(function(){
        $('[rel="tooltip"]').tooltip({trigger: "hover"});
    });
$('[data-toggle="tooltip"]').on('click', function () {
    $(this).tooltip('hide')
})
</script>

<script>
    $(document).ready(function() {
    $("#formButton").click(function(){
        //alert('tj');
    $("#formup").toggle();
});
    })
</script>

      <div class="container" style="color: black!important;">
       <div class="modal fade" id="exampleModalhome" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabelhome" aria-hidden="true">
           <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
               <div class="modal-content">
                   <div class="modal-header">
                       <h5 class="modal-title" id="exampleModalLabelhome"><strong>Change your conference set-up easily</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                   </div>
                   <div class="modal-body">

                   </div>
                     <div class="modal-footer">
                       <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                     </div>
               </div>
           </div>
       </div>
   </div>

  <div class="container" style="color: black!important;">
       <div class="modal fade" id="exampleModalprog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabelprog" aria-hidden="true">
           <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
               <div class="modal-content">
                   <div class="modal-header">
                       <h5 class="modal-title" id="exampleModalLabelprog"><strong>Learn how to make your program</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                   </div>
                   <div class="modal-body">

                   </div>
                     <div class="modal-footer">
                       <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                     </div>
               </div>
           </div>
       </div>
   </div>

  <div class="container" style="color: black!important;">
       <div class="modal fade" id="exampleModalweb" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabelweb" aria-hidden="true">
           <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
               <div class="modal-content">
                   <div class="modal-header">
                       <h5 class="modal-title" id="exampleModalLabelweb"><strong>Learn how to create your conference website</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                   </div>
                   <div class="modal-body">

                   </div>
                     <div class="modal-footer">
                       <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                     </div>
               </div>
           </div>
       </div>
   </div>

  <div class="container" style="color: black!important;">
       <div class="modal fade" id="exampleModalpart" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabelpart" aria-hidden="true">
           <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
               <div class="modal-content">
                   <div class="modal-header">
                       <h5 class="modal-title" id="exampleModalLabelpart"><strong>Manage your participants</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                   </div>
                   <div class="modal-body">

                   </div>
                     <div class="modal-footer">
                       <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                     </div>
               </div>
           </div>
       </div>
   </div>

  <div class="container" style="color: black!important;">
       <div class="modal fade" id="exampleModalcrea" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabelcrea" aria-hidden="true">
           <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
               <div class="modal-content">
                   <div class="modal-header">
                       <h5 class="modal-title" id="exampleModalLabelcrea"><strong>Create your conference in one click</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                   </div>
                   <div class="modal-body">

                   </div>
                     <div class="modal-footer">
                       <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                     </div>
               </div>
           </div>
       </div>
   </div>


      <div class="modal fade" id="basicModal" tabindex="-1" role="dialog" displayed="false" aria-labelledby="basicModal" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="myModalLabel">{% trans 'Quick help to use our program scheduler' %}</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
            {% blocktrans %}
          <h3>Use pre-loaded examples</h3>
            <p>We have loaded six talk/break examples for you. <span style="color: rebeccapurple;">Purple</span> is for review talks, <span style="color: orange;">Orange</span> for regular talks, <span style="color: green;">Green</span> for invited talks, <span style="color: red;">Red</span> for discussions and <span style="color: deeppink;">Pink</span> for coffee breaks/snack times. These
            are pre-loaded as examples and you can modify them or delete them if not needed. To change their content, click once on them and go to the detail tab.
            To change the starting time just move the box around in either month or day view.</p>
          <h3>Create new talks</h3>
            <p>You can also create new talks by just clicking where you want the talk to start and dragging up to where you want it to finish. </p>
            <p>You can also go to the participant tab and click the plus symbol to the right of a person's name to get their talk integrated here with all its content in one click (i.e., no need to type in the speaker's name, title and all again)!</p>
            {% endblocktrans %}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">{% trans 'Close' %}</button>
        </div>
      </div>
    </div>
  </div>

      <div id="modal-div"></div>
      <div id="modal-div2"></div>
      <div id="modal-div3"></div>


      <div class="container">
      <!--<div id="feedback" class="feed">
      <a href="#" id="feedback-btn">-->
          <!--Feedback <i class="far fa-comment"></i>-->
      <!--<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI5LjI5OXB4IiBoZWlnaHQ9IjUwLjYyNXB4IiB2aWV3Qm94PSIwIDAgOS4yOTkgNTAuNjI1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA5LjI5OSA1MC42MjUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zLjUxNiw0Ni44N3YxLjYzNWg1LjY2N3YwLjk3NEgzLjUxNnYxLjE0N2gtMC40NGwtMC4zNTItMS4xNDdIMi4zNjdDMC43ODksNDkuNDc4LDAsNDguNzg4LDAsNDcuNDA5YzAtMC4zNCwwLjA2OC0wLjczOCwwLjIwNS0xLjE5NWwwLjc3OSwwLjI1MmMtMC4xMjEsMC4zNzUtMC4xODIsMC42OTUtMC4xODIsMC45NjFjMCwwLjM2NywwLjEyMiwwLjY0LDAuMzY2LDAuODE0YzAuMjQ0LDAuMTc2LDAuNjM2LDAuMjY0LDEuMTc1LDAuMjY0SDIuNzZWNDYuODdIMy41MTZ6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTkuMjk5LDQyLjk4NWMwLDAuOTQ5LTAuMjg5LDEuNjk3LTAuODY2LDIuMjQ2Yy0wLjU3OCwwLjU0OS0xLjM4MiwwLjgyNC0yLjQwOCwwLjgyNGMtMS4wMzYsMC0xLjg1Ny0wLjI1Ni0yLjQ2Ny0wLjc2NmMtMC42MS0wLjUxMS0wLjkxNC0xLjE5My0wLjkxNC0yLjA1NGMwLTAuODA1LDAuMjY1LTEuNDQsMC43OTQtMS45MDljMC41MjktMC40NywxLjIyOC0wLjcwMywyLjA5NS0wLjcwM2gwLjYxNXY0LjQyNGMwLjc1NC0wLjAyMSwxLjMyNi0wLjIxMSwxLjcxNy0wLjU3MlM4LjQ1LDQzLjYwNiw4LjQ1LDQyLjk1YzAtMC42OTEtMC4xNDUtMS4zNzUtMC40MzQtMi4wNTFoMC44NjZjMC4xNDgsMC4zNDQsMC4yNTUsMC42NjgsMC4zMTksMC45NzVDOS4yNjcsNDIuMTgxLDkuMjk5LDQyLjU1MSw5LjI5OSw0Mi45ODV6IE0zLjQ1Nyw0My4yNDljMCwwLjUxNywwLjE2OCwwLjkyNiwwLjUwNCwxLjIzMnMwLjgwMSwwLjQ4OCwxLjM5NiwwLjU0M3YtMy4zNTdjLTAuNjEzLDAtMS4wODMsMC4xMzgtMS40MSwwLjQxQzMuNjIxLDQyLjM1LDMuNDU3LDQyLjc0MSwzLjQ1Nyw0My4yNDl6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTkuMjk5LDM2LjI1MmMwLDAuOTQ5LTAuMjg5LDEuNjk3LTAuODY2LDIuMjQ2Yy0wLjU3OCwwLjU0OS0xLjM4MiwwLjgyNC0yLjQwOCwwLjgyNGMtMS4wMzYsMC0xLjg1Ny0wLjI1Ni0yLjQ2Ny0wLjc2NmMtMC42MS0wLjUxLTAuOTE0LTEuMTkzLTAuOTE0LTIuMDUzYzAtMC44MDUsMC4yNjUtMS40NDEsMC43OTQtMS45MXMxLjIyOC0wLjcwMywyLjA5NS0wLjcwM2gwLjYxNXY0LjQyNGMwLjc1NC0wLjAyLDEuMzI2LTAuMjExLDEuNzE3LTAuNTcyczAuNTg2LTAuODY5LDAuNTg2LTEuNTI1YzAtMC42OTEtMC4xNDUtMS4zNzUtMC40MzQtMi4wNTFoMC44NjZjMC4xNDgsMC4zNDQsMC4yNTUsMC42NjgsMC4zMTksMC45NzZTOS4yOTksMzUuODE5LDkuMjk5LDM2LjI1MnogTTMuNDU3LDM2LjUxNmMwLDAuNTE2LDAuMTY4LDAuOTI2LDAuNTA0LDEuMjMyYzAuMzM2LDAuMzA4LDAuODAxLDAuNDg4LDEuMzk2LDAuNTQzdi0zLjM1N2MtMC42MTMsMC0xLjA4MywwLjEzNy0xLjQxLDAuNDFDMy42MjEsMzUuNjE4LDMuNDU3LDM2LjAwOCwzLjQ1NywzNi41MTZ6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTguMzE5LDI3Ljg2MnYwLjA1M2MwLjY1MiwwLjQ0OSwwLjk3OSwxLjEyMSwwLjk3OSwyLjAxN2MwLDAuODQtMC4yODYsMS40OTMtMC44NiwxLjk2UzcuMDQ3LDMyLjU5LDUuOTg5LDMyLjU5Yy0xLjA1OCwwLTEuODgxLTAuMjMzLTIuNDY3LTAuNzAyYy0wLjU4Ni0wLjQ3LTAuODc5LTEuMTIxLTAuODc5LTEuOTU3YzAtMC44NzEsMC4zMTYtMS41MzksMC45NDktMi4wMDVWMjcuODVsLTAuNDYzLDAuMDQxbC0wLjQ1MSwwLjAyM0gwLjA2NHYtMC45NzRoOS4xMTd2MC43OTFMOC4zMTksMjcuODYyeiBNOC40ODMsMjkuODA3YzAtMC42NjQtMC4xOC0xLjE0Ni0wLjU0MS0xLjQ0NHMtMC45NDQtMC40NDgtMS43NS0wLjQ0OEg1Ljk4N2MtMC45MDksMC0xLjU1OSwwLjE1MS0xLjk0NywwLjQ1NWMtMC4zODgsMC4zMDMtMC41ODMsMC43ODUtMC41ODMsMS40NDljMCwwLjU3LDAuMjIyLDEuMDA4LDAuNjY1LDEuMzExUzUuMTksMzEuNTgzLDYsMzEuNTgzYzAuODE5LDAsMS40MzgtMC4xNDksMS44NTYtMC40NTFDOC4yNzQsMzAuODMxLDguNDgzLDMwLjM4OSw4LjQ4MywyOS44MDd6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTIuNjU0LDIxLjg5MWMwLTAuODQ0LDAuMjg4LTEuNDk5LDAuODY0LTEuOTY2YzAuNTc2LTAuNDY3LDEuMzkyLTAuNywyLjQ0Ni0wLjdjMS4wNTUsMCwxLjg3NCwwLjIzNSwyLjQ1OCwwLjcwNmMwLjU4NCwwLjQ3MSwwLjg3NiwxLjEyNCwwLjg3NiwxLjk2YzAsMC40MTgtMC4wNzYsMC44LTAuMjMsMS4xNDZjLTAuMTU0LDAuMzQ2LTAuMzkzLDAuNjM2LTAuNzEzLDAuODd2MC4wN2wwLjgyNiwwLjIwNXYwLjY5N0gwLjA2NHYtMC45NzNoMi4yMTVjMC40OTYsMCwwLjk0MSwwLjAxNiwxLjMzNiwwLjA0N3YtMC4wNDdDMi45NzUsMjMuNDU0LDIuNjU0LDIyLjc4MiwyLjY1NCwyMS44OTF6IE0zLjQ2OSwyMi4wMzJjMCwwLjY2NCwwLjE5LDEuMTQzLDAuNTcxLDEuNDM2czEuMDIyLDAuNDM5LDEuOTI1LDAuNDM5YzAuOTAzLDAsMS41NDgtMC4xNSwxLjkzNy0wLjQ1MWMwLjM5LTAuMzAxLDAuNTg0LTAuNzgzLDAuNTg0LTEuNDQ3YzAtMC41OTgtMC4yMTktMS4wNDMtMC42NTMtMS4zMzZzLTEuMDYyLTAuNDM5LTEuODc4LTAuNDM5Yy0wLjgzNiwwLTEuNDU5LDAuMTQ2LTEuODY5LDAuNDM5UzMuNDY5LDIxLjQxOCwzLjQ2OSwyMi4wMzJ6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTkuMTgzLDEzLjU3N0w4LjI2OSwxMy43N3YwLjA0N2MwLjQwMSwwLjMyLDAuNjc0LDAuNjQsMC44MTYsMC45NThzMC4yMTQsMC43MTYsMC4yMTQsMS4xOTJjMCwwLjYzNy0wLjE2NCwxLjEzNi0wLjQ5MSwxLjQ5N2MtMC4zMjgsMC4zNjEtMC43OTUsMC41NDItMS40LDAuNTQyYy0xLjI5NywwLTEuOTc3LTEuMDM3LTIuMDM5LTMuMTExbC0wLjAzNS0xLjA5SDQuOTM0Yy0wLjUwNCwwLTAuODc2LDAuMTA4LTEuMTE2LDAuMzI1Yy0wLjI0LDAuMjE3LTAuMzYsMC41NjMtMC4zNiwxLjA0YzAsMC41MzUsMC4xNjQsMS4xNDEsMC40OTIsMS44MTZsLTAuNzQ0LDAuMjk5Yy0wLjE3Mi0wLjMxNi0wLjMwNy0wLjY2My0wLjQwNC0xLjA0Yy0wLjA5Ny0wLjM3Ny0wLjE0Ni0wLjc1NS0wLjE0Ni0xLjEzNGMwLTAuNzY2LDAuMTctMS4zMzMsMC41MS0xLjcwMmMwLjM0LTAuMzY5LDAuODg1LTAuNTU0LDEuNjM1LTAuNTU0aDQuMzg0djAuNzIySDkuMTgzeiBNOC40OTYsMTUuNzc0YzAtMC42MDUtMC4xNjYtMS4wODEtMC40OTgtMS40MjdjLTAuMzMyLTAuMzQ2LTAuNzk3LTAuNTE5LTEuMzk2LTAuNTE5aC0wLjU4bDAuMDQxLDAuOTczYzAuMDI3LDAuNzczLDAuMTQ3LDEuMzMxLDAuMzYsMS42NzNjMC4yMTQsMC4zNDIsMC41NDQsMC41MTMsMC45OTMsMC41MTNjMC4zNTIsMCwwLjYxOS0wLjEwNiwwLjgwMy0wLjMxOVM4LjQ5NiwxNi4xNTcsOC40OTYsMTUuNzc0eiIvPjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik05LjI5OSw4LjI4NWMwLDAuOTMtMC4yODYsMS42NDktMC44NTgsMi4xNTljLTAuNTcxLDAuNTEtMS4zODEsMC43NjUtMi40MjgsMC43NjVjLTEuMDc1LDAtMS45MDUtMC4yNTktMi40OTEtMC43NzZTMi42NDMsOS4xNzgsMi42NDMsOC4yMjFjMC0wLjMwOSwwLjAzMy0wLjYxNywwLjEtMC45MjZDMi44MSw2Ljk4NiwyLjg4OCw2Ljc0NCwyLjk3Nyw2LjU2OGwwLjgyNiwwLjI5OUMzLjcxNyw3LjA4MiwzLjY0Niw3LjMxNiwzLjU4OSw3LjU3QzMuNTMyLDcuODI0LDMuNTA0LDguMDQ5LDMuNTA0LDguMjQ0YzAsMS4zMDUsMC44MzIsMS45NTcsMi40OTYsMS45NTdjMC43ODksMCwxLjM5Ni0wLjE1OSwxLjgxNS0wLjQ3OGMwLjQyMi0wLjMxOSwwLjYzNC0wLjc5LDAuNjM0LTEuNDE1YzAtMC41MzUtMC4xMTUtMS4wODQtMC4zNDctMS42NDZoMC44NjFDOS4xODgsNy4wOTIsOS4yOTksNy42MzMsOS4yOTksOC4yODV6Ii8+PHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTUuODk2LDQuMTc4QzUuNjU2LDQuMDEsNS4zNDQsMy43NTQsNC45NTcsMy40MUwyLjc2LDEuMzM2VjAuMTgybDIuNzM2LDIuNjAyTDkuMTgzLDB2MS4xNzhMNi4xNDYsMy40NDVsMC42MzMsMC43MzJoMi40MDJ2MC45NjFIMC4wNjR2LTAuOTZoNC44MzRjMC4yMTUsMCwwLjU0NiwwLjAxNiwwLjk5NiwwLjA0N1Y0LjE3OEg1Ljg5NnoiLz48L2c+PC9zdmc+"
           alt="Feedback" title="Feedback Button" height="70px"/>-->
          <!--<svg height="110" width="25">
              <path transform="rotate(-90,55,52)" d="M17.657,2.982H2.342c-0.234,0-0.425,0.191-0.425,0.426v10.21c0,0.234,0.191,0.426,0.425,0.426h3.404v2.553c0,0.397,0.48,0.547,0.725,0.302l2.889-2.854h8.298c0.234,0,0.426-0.191,0.426-0.426V3.408C18.083,3.174,17.892,2.982,17.657,2.982M17.232,13.192H9.185c-0.113,0-0.219,0.045-0.3,0.124l-2.289,2.262v-1.96c0-0.233-0.191-0.426-0.425-0.426H2.767V3.833h14.465V13.192z M10,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.488-0.668,1.488-1.489C11.488,7.905,10.821,7.237,10,7.237 M10,9.364c-0.352,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C10.638,9.077,10.351,9.364,10,9.364 M14.254,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489s1.489-0.668,1.489-1.489C15.743,7.905,15.075,7.237,14.254,7.237 M14.254,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.352,0,0.639,0.287,0.639,0.638C14.893,9.077,14.605,9.364,14.254,9.364 M5.746,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.489-0.668,1.489-1.489C7.234,7.905,6.566,7.237,5.746,7.237 M5.746,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C6.384,9.077,6.096,9.364,5.746,9.364"></path>
    <text fill="#393D3F" transform="rotate(-90,50,32)" font-weight="bold">Feedback</text>
  </svg>-->

    <!--</a>
      </div>-->
          {% if createdconf %}
              <div class="alert alert-custom alert-dismissable" role="alert" style="margin-top: 2rem;"><a href="#" class="close" data-dismiss="alert" style="color: white" aria-label="close">×</a>
                  <h2 style="margin-bottom: 0;">{% if conftopass.masterconf %} {% trans 'Master conference'%} {% else %} {% if conftopass.daughterconf %} {% trans 'Session'%} {% else %} {% trans 'Conference'%} {% endif %}{% endif %} {% trans 'title:'%} {{title}} {% if conftopass.daughterconf %} <small>{% trans '(belong to the master conference:'%} {{ mastconftitle }})</small> {% endif %}<i data-toggle="tooltip" data-placement="bottom" title="{% trans 'We need more info that you can fill in later. You can now add some other superusers (just add them as participants and then when they registered click on them and make them superusers). They can then access this page to work with you on the list of participants, program, ...'%}" class="fas fa-info-circle ml-3"></i></h2>
              </div>


              <div class="row mb-4">
                  <div class="col-12">
                      <!--<form enctype="multipart/form-data" method="POST"  action="/{{LANGUAGE_CODE}}/host-conference">-->
                          <!--{% csrf_token %}-->
                          <div class="mt-4 mb-4"><a href="{% url 'my_app2:hostconf' %}" class="btn btn-success btn-default3">{% trans 'Create another conference from scratch'%}</a></div>
                          <!--<input type="hidden" name="newconf" value="1" />-->

                      <!--</form>-->
                  </div>
                  <div class="col-12">
                      {% if conf_list_user|length > 1 %}
                      <label for="conf-select">{% trans 'Modify another conference instead?'%}</label>
                      <form name=changeconfForm action="{% url 'my_app2:createconf' %}" method=POST>
                          {% csrf_token %}
                      <select name="conf" class="browser-default custom-select" id="conf-select" onChange="changeconfForm.submit();">
                          <option value="">--{% trans 'Please choose another conference to see/update it'%}--</option>
                          {% for conf in conf_list_user %}
                              <option value="{{ conf.id }}">{% if conf.masterconf or conf.daughterconf %}{% if conf.daughterconfstarwars %}{% if conf.masterconfdaughtername %}{{ conf.masterconfdaughtername }}{% else %}{% trans 'Plenaries'%}{% endif %}{% else %} S{{ conf.masterconfdaughterposition }} {% endif %} - {% endif %}{{ conf.title|ellipses:50 }}</option>
                              <!--<option value="{{ conf.title }}">{{ conf.title|ellipses:50 }}</option>-->
                          {% endfor %}
                      </select>
                        <input type="hidden" name="changeconfnow" value="1" />
                      </form>
                      {% endif %}
                  </div>
              </div>

              <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">{% trans 'Conference details' %}</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">{% trans 'Participants' %}</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="program-tab" data-toggle="tab" href="#program" role="tab" aria-controls="program" aria-selected="false">{% trans 'Program' %}</a>
                </li>
              <li class="nav-item">
                  <a class="nav-link" id="website-tab" data-toggle="tab" href="#website" role="tab" aria-controls="website" aria-selected="false">{% trans 'Website' %}</a>
                </li>
              <li class="nav-item">
                  <a class="nav-link" id="notes-tab" data-toggle="tab" href="#notes" role="tab" aria-controls="notes" aria-selected="false">{% trans 'Real Time notes' %}</a>
                </li>
              <li class="nav-item">
                  <a class="nav-link" id="timeline-tab" data-toggle="tab" href="#timeline" role="tab" aria-controls="timeline" aria-selected="false">{% trans 'Timeline' %}</a>
                </li>
              <li class="nav-item">
                  <a class="nav-link" id="graph-tab" data-toggle="tab" href="#graph" role="tab" aria-controls="graph" aria-selected="false">{% trans 'Map' %}</a>
                </li>
              <li class="nav-item">
                  <a class="nav-link" id="testroom-tab" data-toggle="tab" href="#testroom" role="tab" aria-controls="testroom" aria-selected="false">{% trans 'Test Room' %}</a>
                </li>

              <li class="nav-item">
                  <a class="nav-link" id="chatroom-tab" data-toggle="tab" href="#chatroom" role="tab" aria-controls="chatroom" aria-selected="false">{% trans 'Chat Room' %}</a>
                </li>
              {% if conftopass.recording %}
                  <li class="nav-item">
                  <a class="nav-link" id="video-tab" data-toggle="tab" href="#video" role="tab" aria-controls="video" aria-selected="false">{% trans 'Videos' %}</a>
                </li>
              {% endif %}
              {% if conftopass.activateqandp %}
                  <li class="nav-item">
                  <a class="nav-link" id="qandp-tab" data-toggle="tab" href="#qandp" role="tab" aria-controls="qandp" aria-selected="false">{% trans 'Q&P' %}</a>
                </li>
              {% endif %}
              </ul>

              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="border mb-3">
                          <div class="mt-2"><p><a href="{% url 'my_app2:exampleModalhome' %}" class="btn btn-secondary mt-2 mb-4" data-toggle="modal" data-target="#exampleModalhome" id="gohome" style="text-decoration: none;"> <strong>{% trans 'What can I do here: a simple guide'%}</strong> </a></p></div>

                    {% if conftopass.justtools %} <p><b>{% trans 'You have chosen to just use our organizing tools and not run the conference with our streaming tools so that it is entirely free for you!'%}</b></p>{% endif %}
                    {% if timeover %}<p style="color: red"><strong>{% trans 'This conference is now over!'%}</strong></p>{% endif %}
                    {% if conftopass.masterconf %}
                      <p><i>{% trans 'This is a master conference at the top of multiple parallel sessions (handle the plenary session here)'%}</i></p>
                    <p><i>{% trans 'Here is the master conference ID that you need to provide to session organizers for them to be able to create their session:'%}</i> <strong>{{ conftopass.masterconfpass }}</strong></p>

                        {% if conf_list_session_dau %}
                            <p>{{ conf_list_session_dau|length }} {% trans 'daughter conference'%}{{ conf_list_session_dau|pluralize:",s" }} {% trans 'created so far (check the boxes to validate the sessions you want)'%}:</p>
                            <div id="ok"></div>
                            <ul>
                            {% for cc in conf_list_session_dau %}
                              <li class="list-group-item mr-4" style="color: black">
                                  <label id="cb" class="switch">
                                  <input type="checkbox" {% if cc.acceptconf %} checked {% endif %} id="{{ cc.id }}" class="success addtoconf">
                                  <span class="slider round"></span>
                                  </label>
                                  {{ cc.title }}
                              </li>
                            {% endfor %}
                            </ul>
                        {% else %}
                          <p>{% trans 'No parallel sessions have been created yet.'%}</p>
                        {% endif %}
                    {% if conftopass.payingatonce %}
                      <p>{% trans 'The conference fees should be handled from here, the master conference. Do not pay before all the sessions have been created and submitted. If you do, it then becomes impossible to create new sessions.'%} </p>
                    {% endif %}
                    {% endif %}
                    {% if conftopass.daughterconf %} <p><i>{% trans 'This is a session of the master conference entitled'%} '{{ mastconftitle }}'</i>.</p> {% endif %}
                    {% if conftopass.daughterconf %} <p>{% if conftopass.daughterconfstarwars %}{% trans 'The short name for this session is'%} <i>{{ conftopass.masterconfdaughtername }}</i>.{% else %} {% trans 'This is the session'%} S{{ conftopass.masterconfdaughterposition }} {% trans 'of the conference'%} {% if conftopass.status == 0 %}{% trans '(it may change when you submit)'%}{% endif %} {% endif %}</p> {% endif %}


                    {% if conftopass.daughterconf %}
                        {% if notselected %}<p style="color: red"><strong>{% trans 'This session has not (yet) been validated by the organizers!'%}</strong></p>{% else %}<p style="color: red"><strong>{% trans 'This session has now been validated by the organizers!'%}</strong></p>{% endif %}
                        {% if conftopass.fee %}
                      {% if mastconfall.payingatonce %}
                           <p>{% trans 'The conference fees are handled by the master conference.'%}</p>
                      {% else %}
                          <p>{% trans 'Conference fees:'%} <strong>{{ paidnum }} {% trans 'participant'%}{{ paidnum|pluralize:",s" }}</strong> {% trans 'paid so far. The total amount paid is:'%} <strong>{{ paidamount }}</strong> ({{ conftopass.fee_currency }}).</p>
                          {% if conftopass.fee_to_carbon %}
                          <p>{% trans 'The fees from the participants will be used to offset more carbon emissions after the conference.'%}</p>
                          {% endif %}
                      {% endif %}
                            {% endif %}
                    {% elif conftopass.masterconf %}
                        {% if conftopass.fee %}

                            <p>{% trans 'Conference fees:'%} <strong>{{ paidnum }} {% trans 'participant'%}{{ paidnum|pluralize:",s" }}</strong> {% trans 'paid so far. The total amount paid is:'%} <strong>{{ paidamount }}</strong> ({{ conftopass.fee_currency }}).</p>
                              {% if conftopass.fee_to_carbon %}
                          <p>{% trans 'The fees from the participants will be used to offset more carbon emissions after the conference.'%}</p>
                          {% endif %}
                            {% endif %}
                    {% else %}
                        {% if conftopass.fee %}
                            <p>{% trans 'Conference fees:'%} <strong>{{ paidnum }} {% trans 'participant'%}{{ paidnum|pluralize:",s" }}</strong> {% trans 'paid so far. The total amount paid is:'%} <strong>{{ paidamount }}</strong> ({{ conftopass.fee_currency }}).</p>
                            {% if conftopass.fee_to_carbon %}
                          <p>{% trans 'The fees from the participants will be used to offset more carbon emissions after the conference.'%}</p>
                          {% endif %}
                        {% endif %}
                    {% endif %}
                  {% if conftopass.feeunique %}
                      <p>{% trans 'The costs of the conference and offset of the carbon emissions are shared across all participants who have to pay:'%} <b>{{ conftopass.fee_amount_unique }} {{ conftopass.fee_currency_unique }}</b></p>
                  {% endif %}
                {% if not conftopass.justtools %}
                {% ifequal conftopass.priv 'Private' %}
                  <p style="word-wrap: break-word;">{% trans 'This conference is private and can only be accessible by registered (and accepted) participants. To do so, they can click on JOIN on the conference website or follow this link:' %} <a href="/join-conference/{{ confnum }}">{{ request.get_host }}/join-conference/{{ confnum }}</a> <small>(<a class="copy_text"  data-toggle="tooltip" title="{% trans 'Copy to Clipboard'%}" href="{{ request.get_host }}/join-conference/{{ confnum }}">{% trans 'Copy Link'%}</a>)</small></p>
                  {% if conftopass.website.titleurl %}
                        <p style="word-wrap: break-word;">{% trans 'They can also access it via the following personalized link:'%} <a href="https://{{ conftopass.website.titleurl }}.carbonfreeconf.com/join">{{ conftopass.website.titleurl }}.carbonfreeconf.com/join</a> <small>(<a class="copy_text"  data-toggle="tooltip" title="{% trans 'Copy to Clipboard'%}" href="https://{{ conftopass.website.titleurl }}.carbonfreeconf.com/join">{% trans 'Copy Link'%}</a>)</small></p>
                    {% else %}
                        <p>If you want a personalized url (e.g. xxx.carbonfreeconf.com/join) go to the website tab and fill up the "Enter your website's url" field.</p>
                    {% endif %}
                {% else %}

                    <p style="word-wrap: break-word;">{% trans 'This conference is accessible to anyone with the following link:'%} <a href="/join-conference/{{ conftopass.id }}/{{ conftopass.privpass }}">{{ request.get_host }}/join-conference/{{ conftopass.id }}/{{ conftopass.privpass }}</a> <small>(<a class="copy_text"  data-toggle="tooltip" title="{% trans 'Copy to Clipboard'%}" href="{{ request.get_host }}/join-conference/{{ conftopass.id }}/{{ conftopass.privpass }}">{% trans 'Copy Link'%}</a>)</small></p>
                    {% if conftopass.website.titleurl %}
                        <p style="word-wrap: break-word;">{% trans 'They can also access it via the following personalized link:'%} <a href="https://{{ conftopass.website.titleurl }}.carbonfreeconf.com/join/{{ conftopass.privpass }}">{{ conftopass.website.titleurl }}.carbonfreeconf.com/join/{{ conftopass.privpass }}</a> <small>(<a class="copy_text"  data-toggle="tooltip" title="{% trans 'Copy to Clipboard'%}" href="https://{{ conftopass.website.titleurl }}.carbonfreeconf.com/join/{{ conftopass.privpass }}">{% trans 'Copy Link'%}</a>)</small></p>
                    {% else %}
                        <p>If you want a personalized url (e.g. xxx.carbonfreeconf.com/join) go to the website tab and fill up the "Enter your website's url" field.</p>
                    {% endif %}
                {% endifequal %}
                {% if visiozoom %}
                    <p>
                        <a href="#" class="mb-2 mt-1" data-toggle="collapse" data-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample2">
                            {% trans 'Zoom links?'%}
                        </a>
                      </p>
                      <div class="collapse mb-3" id="collapseExample2">
                        <div class="card card-body">


                           <p><strong>{% trans 'Zoom links'%}</strong> {% trans 'for your conference (to use only in case of technical issue, and to check at last minute because they may change when you update the conference):'%}</p>
              {% if conftopass.status == 0 %}
                      <p>{% trans '*The links will appear when you submit your conference!'%}</p>
              {% else %}
              {% for l in visiozoom %}
                  {% if l.joinurlzoom %}
                      {% if l.duration != 1 %}
                  <p>{{ l.date }} {% trans 'during'%} {{ l.duration }}{% trans 'min'%}{% if conftopass.masterconf %} ({% trans 'session:'%} {{ l.conference.title }}){% endif %}: {{ l.joinurlzoom }}
                          {% if conftopass.coffeebreak %}
                          {% trans '; and for the coffee-break room:'%} {{ l.joinurlzoomcb }}
                          {% endif %}
                          </p>
                      {% endif %}
                  {% endif %}
              {% endfor %}
              {% endif %}

                        </div>
                      </div>


            {% endif %}
                {% endif %}
                {% comment %}
                {% if conftopass.dialin %}
                    {% if conftopass.dialin_passcode %}
                    <p>{% trans 'Dial-in information to provide to participants who need it:'%}</p>
                    <ul>
                        <li>{% trans 'Dial-in number:' %} {{ conftopass.dialin_number }}</li>
                        <li>{% trans 'Dial-in ID:' %} {{ conftopass.dialin_id }}</li>
                        <li>{% trans 'Dial-in password for attendees:' %} {{ conftopass.dialin_passcode }}</li>
                        <li>{% trans 'Dial-in password for presenters:' %} {{ conftopass.dialin_passcode_presenter }}</li>
                    </ul>
                    {% else %}
                        <p>{% trans 'The dial-in number, ID and passwords will be provided when you submit your conference down this page.' %}</p>
                    {% endif %}
                {% endif %}
                {% endcomment %}
                    <p><strong>{% trans 'Check out how your conference is doing' %}</strong> {% trans 'by consulting some interesting numbers' %} <a href="{% url 'my_app2:stats' confnum %}" target="_blank">{% trans 'here' %}</a>.</p>

                    {% trans 'Your timezone is:'%}
                    <script>
                        tz=Intl.DateTimeFormat().resolvedOptions().timeZone;
                        document.write(tz);
                        //document.getElementById("test").innerHTML = tz;
                    </script>

                      <!--<p>The UTC time is {{ today|utc }}</p>-->
                      <p>{% trans 'The local time is'%} {{ today|localtime }}</p>
                      <form action="{% url 'my_app:set_timezone' %}" method="POST">
                      {% csrf_token %}
                          <label for="timezone">{% trans 'Change time zone?'%}</label>
                                          <div class="row">
                                              <div class="col-3">
                          <select name="timezone" class="browser-default custom-select">
                              {% for tz in timezones %}
                                  <option value="{{ tz }}"{% if tz == currenttz %} selected{% endif %}>{{ tz }}</option>
                              {% endfor %}
                          </select>
                          </div>
                          <div class="col-3">
                          <input type="submit" value="Change">
                          </div>
                      </div>
                      </form>
            <hr style="background-color: white; border-top:2px dotted #000">

                      <form enctype="multipart/form-data" method="POST" id="saveconf" action="">
                          {% csrf_token %}

                              {% if conftopass.status == 2 or conftopass.daughterconf and mastconfall.payingatonce and mastconfall.status == 2 %}

                                  <p class="text-danger">{% trans 'Now that you have paid, these parameters cannot be changed (contact us if needed).'%}</p>
                                  <div class="col-12">
                                      <p><i>{% trans 'Are posters allowed?:'%}</i> {% if conftopass.poster %} {% trans 'Yes'%} {% else %} {% trans 'No'%} {% endif %}  </p>
                                  </div>
                                  {{ createconflight_form.poster.as_hidden }}

                                      {% if conftopass.masterconf %}
                                          <div class="col-12">
                                              <p><i>{% trans 'Is the payment for the conference fees centralized to the master session?:'%}</i> {% if conftopass.payingatonce %} {% trans 'Yes'%} {% else %} {% trans 'No'%} {% endif %}  </p>
                                          </div>
                                          {{ createconflight_form.payingatonce.as_hidden }}

                                      {% endif %}
                                  <div class="row">
                                      <div class="col-4">

                                          <div class="collapsed">{% trans 'Record the conference?:'%} {% if conftopass.recording %} {% trans 'Yes'%} {% else %} {% trans 'No'%} {% endif %}</div>
                                          {{ createconflight_form.recording.as_hidden }}
                                      </div>
                                      <div class="col-4">

                                          <div class="collapse2">{% trans 'Put the recording on YouTube?:'%} {% if conftopass.youtuberecording %} {% trans 'Yes'%} {% else %} {% trans 'No'%} {% endif %}</div>
                                          {{ createconflight_form.youtuberecording.as_hidden }}

                                      </div>
                                      <div class="col-4">

                                          <div class="collapse2">{% trans 'Who can see the recording?:'%} {{ conftopass.whorecording }} </div>
                                          {{ createconflight_form.whorecording.as_hidden }}
                                      </div>
                                  </div>

                                  <div class="row">
                                      <div class="col-4">

                                          <div class="collapsed">{% trans 'Add a coffee break parallel room that is always accessible?:'%} {% if conftopass.coffeebreak %} {% trans 'Yes'%} {% else %} {% trans 'No'%} {% endif %}</div>
                                          {{ createconflight_form.coffeebreak.as_hidden }}
                                      </div>
                                      <div class="col-4">

                                          <div class="collapse2">{% trans 'Add games in the coffee break room?:'%} {% if conftopass.coffeebreakgames %} {% trans 'Yes'%} {% else %} {% trans 'No'%} {% endif %}</div>
                                          {{ createconflight_form.coffeebreakgames.as_hidden }}

                                      </div>

                                  </div>


                              {% else %}

                              {{ createconflight_form.poster|as_crispy_field }}

                                  {% if not conftopass.justtools %}
                                      {% if conftopass.masterconf %}

                                          {{ createconflight_form.payingatonce|as_crispy_field }}

                                      {% endif %}

                                  {% endif %}

                            {% if not conftopass.justtools %}
                          <div class="row">
                              <div class="col-4">

                                  <div class="collapsed">{{ createconflight_form.recording|as_crispy_field }}</div>

                              </div>
                              <div class="col-4">

                                  <div class="collapse2">{{ createconflight_form.youtuberecording|as_crispy_field }}</div>

                              </div>
                              <div class="col-4">

                                  <div class="collapse2">{{ createconflight_form.whorecording|add_class:"browser-default custom-select"|as_crispy_field }}</div>

                              </div>

                              <script>
                                  $(function () {

                                      if ($('#id_recording').is(':checked')){
                                          //alert('chec');
                                          $(".collapse2").show()
                                      }
                                  });
                              </script>
                              <script>
                                  $("#id_recording").change(function () {
                                  //check if its checked. If checked move inside and check for others value
                                  if (this.checked) {
                                      //add a text box next to it
                                      $(".collapse2").show()
                                  } else {
                                      //remove if unchecked
                                      $(".collapse2").hide();
                                      //$("#id_masterconf").prop('checked', false);
                                      //$("#id_daughterconf").prop('checked', false);
                                      //$("#id_masterconfpass").val('');
                                  }
                                  });

                              </script>

                          </div>
                                  <div class="row">
                              <div class="col-4">

                                  <div class="collapsed">{{ createconflight_form.coffeebreak|as_crispy_field }}</div>

                              </div>
                              <div class="col-4">

                                  <div class="collapse24">{{ createconflight_form.coffeebreakgames|as_crispy_field }}</div>

                              </div>


                              <script>
                                  $(function () {

                                      if ($('#id_coffeebreak').is(':checked')){
                                          //alert('chec');
                                          $(".collapse24").show()
                                      }
                                  });
                              </script>
                              <script>
                                  $("#id_coffeebreak").change(function () {
                                  //check if its checked. If checked move inside and check for others value
                                  if (this.checked) {
                                      //add a text box next to it
                                      $(".collapse24").show()
                                  } else {
                                      //remove if unchecked
                                      $(".collapse24").hide();
                                      //$("#id_masterconf").prop('checked', false);
                                      //$("#id_daughterconf").prop('checked', false);
                                      //$("#id_masterconfpass").val('');
                                  }
                                  });

                              </script>

                          </div>
                                {% else %}
                                      {{ createconflight_form.recording.as_hidden }}
                                      {{ createconflight_form.youtuberecording.as_hidden }}
                                      {{ createconflight_form.whorecording.as_hidden }}
                                      {{ createconflight_form.coffeebreak.as_hidden }}
                                      {{ createconflight_form.coffeebreakgames.as_hidden }}

                                {% endif %}
                              {% endif %}

                      {% if not conftopass.justtools %}
                          {% if conftopass.masterconf %}
                              <p>{{ createconflight_form.parsession|as_crispy_field }}</p>
                          {% endif %}
                      {% endif %}
                          {% if not conftopass.daughterconf %}
                              <p>{{ createconflight_form.closing_date|as_crispy_field }}</p>
                          {% endif %}

                          <p>{{ createconflight_form.submitparticipations|as_crispy_field }}</p>
                          {% if not conftopass.justtools %}
                          <p>{{ createconflight_form.activateqandp|as_crispy_field }}</p>
                          {% else %}
                              {{ createconflight_form.activateqandp.as_hidden }}
                          {% endif %}
                          {% if conftopass.masterconf %}

                              <p>{{ createconflight_form.daughterconfstarwars|as_crispy_field }}</p>
                              <p>{{ createconflight_form.subtomastautomatic|as_crispy_field }}</p>


                          {% endif %}
                          {% comment %}<p>{{ createconflight_form.dialin|as_crispy_field }}</p>{% endcomment %}

                          <p>{{ createconflight_form.twitterhashtag|as_crispy_field }}</p>


                          <table id="outerDiv" cellpadding="0" cellspacing="0" border="0" style="display: block;width: 100px;overflow-wrap: break-word;max-width: 100px;table-layout: fixed;">
                          <tr>
                              <td valign="middle" id="innerDiv" style="background-color: #17a2b8;display: flex;gap: 1rem; padding: 1rem;">
                                  <span class="btn-info btn-file">
                                      <i class="fa fa-image"></i> {% if room_logo %} {% trans 'Change the'%} {% else %} {% if logor %} {% trans 'Change the'%} {% else %} {% trans 'Upload a'%} {% endif %} {% endif %}{% trans 'logo for the conference room and website'%} {{ createconflight_form.room_logo|as_crispy_field }}
                                  </span>   <i data-toggle="tooltip" data-placement="bottom" title="{% trans 'This logo will be shown on the frontpage of the conference website as well as on the top left corner of the conference room during the actual webinar.'%}" class="fas fa-info-circle"></i>  <label id="file-name"></label>
                              </td>
                              <td valign="middle" id="innerDi">
                                  {% if room_logo %}
                                      {% if not logor %}
                                          <div class="col-2"><img src="{{ todo.room_logo.url }}" alt="Logo" height="120" class="d-inline-block align-top" style="width: 80px!important;"></div>
                                      {% endif %}
                                  {% endif %}
                                  {% if logor %}
                                      <div class="col-2"><img src="{{ logor.url }}" alt="Logo" height="120" class="d-inline-block align-top" style="width: 80px!important;"></div>
                                  {% endif %}
                              </td>
                          </tr>
                          </table>
                          <!--<table id="outerDiv" cellpadding="0" cellspacing="0" border="0" class="mt-2">
                          <tr>
                              <td valign="middle" id="innerDiv">
                                  <span class="btn btn-info btn-file">
                                      <i class="fa fa-image"></i> {% if todo.background %} Change the {% else %} {% if logob %} Change the {% else %} Upload a {% endif %} {% endif %}background image for the conference room {{ createconflight_form.background|as_crispy_field }}
                                  </span>   <i data-toggle="tooltip" data-placement="bottom" title="If your users have a green or blue screen behind them, other users would only see the users face and body but not their real background that would be replaced with the image provided here (it is good for conferences where most participants are at home and want to hide their backgrounds)." class="fas fa-info-circle"></i> <label id="file-name2"></label>
                              </td>
                              <td valign="middle" id="innerDi">
                                  {% if todo.background %}
                                      {% if not logob %}
                                          <div class="col-2"><img src="{{ todo.background.url }}" alt="Logo" height="120" class="d-inline-block align-top"></div>
                                      {% endif %}
                                  {% endif %}
                                  {% if logob %}
                                      <div class="col-2"><img src="{{ logob.url }}" alt="Logo" height="120" class="d-inline-block align-top"></div>
                                  {% endif %}
                              </td>
                          </tr>
                          </table>-->
                          {% if not conftopass.justtools %}
                          <br>
                          <p><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'You can pass an urgent message to all participants that will appear instantaneously at the top of the join conference webpage.'%}" class="fas fa-info-circle"></i>{{ createconflight_form.messagetoall|as_crispy_field }}</p>
                          {% if conftopass.masterconf %}
                          <p>{% trans '*This message will be passed on to the daughter conferences as well.'%}</p>
                          {% endif %}
                          {% else %}
                              {{ createconflight_form.messagetoall.as_hidden }}
                          {% endif %}
                          <input type="hidden" name="savedconf" class="savedconf" value="savedconf" />

                          <div class="mt-5 mb-5"><button type="submit" id="saveconfdetails" class="btn btn-info"><strong>{% trans 'Save conference details'%}</strong></button></div>

                      </form>
                      <hr class="new5 mb-5">


                      <div class="row">
                          <div class="col-12 mb-2">
                              <p><strong>{% trans 'Conference main parameters' %}</strong></p>
                          </div>

                          <div class="col-12">
                              <p><i>{% trans 'Title:' %}</i> {{ conftopass.title }}</p>
                          </div>

                          <div class="col-12">
                              <p><i>{% trans 'Abstract:' %}</i> {{ conftopass.abstract }}</p>
                          </div>

                          <div class="col-12">
                              <p><i>{% trans 'Type of conference:' %}</i> {{ conftopass.priv }}</p>
                          </div>

                          <div class="col-12">
                              <p><i>{% trans 'Start and End dates:' %}</i> {{ conftopass.start_date }} {% trans 'to' %} {{ conftopass.end_date }}</p>
                          </div>
                          <div class="col-12">
                              <p><i>{% trans 'Number of participants:' %}</i> {{ conftopass.size }}</p>
                          </div>
                          <div class="col-12">
                              <p><i>{% trans 'Subject:' %}</i> {{ conftopass.subject }}</p>
                          </div>
                          <div class="col-12">
                          <p><i>{% trans 'Use just organizing tools?:' %}</i> {% if conftopass.justtools %} {% trans 'Yes' %} {% else %} {% trans 'No' %} {% endif %}</p>
                          </div>
                      {% if not conftopass.justtools %}
                          {% if conftopass.daughterconf %}
                                  <div class="col-12">
                                          <!--<p><i>Fees per participant:</i> {{ mastconfall.fee_amount }}</p>
                                          <p><i>Currency:</i> {{ mastconfall.fee_currency }}</p>-->
                                          {% if mastconfall.payingatonce %}
                                              <p>{% trans 'The fees are handled by the master conference rather than your session' %}</p>
                                          {% else %}
                                              <p><i>{% trans 'Share conference fees across all participants?:' %}</i> {% if conftopass.feeunique %} {% trans 'Yes' %} {% else %} {% trans 'No' %} {% endif %}</p>

                                              {% if not conftopass.feeunique %}
                                              <p><i>{% trans 'Paying conference?:' %}</i> {% if conftopass.fee %} {% trans 'Yes' %} {% else %} {% trans 'No' %} {% endif %}</p>
                                              {% if conftopass.fee %}
                                                  {% if conftopass.fee_variable %}
                                                      <p><i>{% trans 'Participants can pay what they want' %}</i></p>
                                                  {% else %}
                                                      <p><i>{% trans 'Fees per participant:' %}</i> {{ conftopass.fee_amount }}</p>
                                                  {% endif %}
                                              <p><i>{% trans 'Currency:' %}</i> {{ conftopass.fee_currency }}</p>
                                              {% endif %}
                                              {% endif %}
                                          {% endif %}
                                  </div>
                          {% else %}
                          <div class="col-12">
                              <p><i>{% trans 'Share conference fees across all participants?:' %}</i> {% if conftopass.feeunique %} {% trans 'Yes' %} {% else %} {% trans 'No' %} {% endif %}</p>

                          {% if not conftopass.feeunique %}
                              <p><i>{% trans 'Paying conference?:' %}</i> {% if conftopass.fee %} {% trans 'Yes' %} {% else %}{% trans 'No' %} {% endif %}</p>
                              {% if conftopass.fee %}
                                  {% if conftopass.fee_variable %}
                                  <p><i>{% trans 'Participants can pay what they want' %}</i></p>
                                  {% else %}
                                  <p><i>{% trans 'Fees per participant:' %}</i> {{ conftopass.fee_amount }}</p>
                                  {% endif %}
                                  <p><i>{% trans 'Currency:' %}</i> {{ conftopass.fee_currency }}</p>
                              {% endif %}
                              {% endif %}
                          </div>
                          {% endif %}

                          <div class="col-12">
                              <p><i>{% trans 'Hybrid conference?:' %}</i> {% if conftopass.hybrid %} {% trans 'Yes' %} {% else %} {% trans 'No' %} {% endif %}</p>
                          </div>


                          <div class="col-12">
                              <p><i>{% trans 'Proceedings for the participants:' %}</i> {% if conftopass.proceedin %} {% trans 'Yes' %} {% else %} {% trans 'No' %} {% endif %}</p>
                          </div>

                          {% endif %}
                          <div class="col-12">
                              <button type="button" class="btn btn-info mb-3 mt-3" id="formButton"><strong>{% trans 'Change these parameters?' %}</strong></button>
                          </div>
                      </div>
                          <form name="createconf_form_update" id="formup" style="display:none;" class="formup" enctype="multipart/form-data" method="POST" action="/{{LANGUAGE_CODE}}/create-conference/">
                              {% csrf_token %}

                              {{ createconf_form_update.title|as_crispy_field }}
                              <div id="testalr2"></div>

                              {{ createconf_form_update.abstract|as_crispy_field }}

                              {{ createconf_form_update.priv|as_crispy_field }}

                              {% if conftopass.status == 2 or conftopass.daughterconf and mastconfall.payingatonce and mastconfall.status == 2 %}
                                  <p class="text-danger">{% trans 'Now that you have paid, these parameters cannot be modified (contact us if needed).' %}</p>
                                  <div class="col-12">
                                      <p><i>{% trans 'Start and End dates:' %}</i> {{ conftopass.start_date }} {% trans 'to' %} {{ conftopass.end_date }}</p>
                                  </div>
                                  <div style="display: none;">
                                      {{ createconf_form_update.start_date }}
                                      {{ createconf_form_update.end_date }}
                                  </div>
                                  <div class="col-12">
                                      <p><i>{% trans 'Number of participants:' %}</i> {{ conftopass.size }}</p>
                                  </div>
                                  {{ createconf_form_update.size.as_hidden }}

                              {% else %}
                              <div class="row">
                                  <div class="col-6">

                                      {{ createconf_form_update.start_date|as_crispy_field }}

                                  </div>
                                  <div class="col-6">

                                      {{ createconf_form_update.end_date|as_crispy_field }}

                                  </div>
                              </div>

                              {{ createconf_form_update.size|as_crispy_field }}

                              {% endif %}

                              {{ createconf_form_update.subject|as_crispy_field }}

                              {{ createconf_form_update.justtools|as_crispy_field }}

                          <div id="nottools">
                              {% if conftopass.daughterconf %}
                                  {% if mastconfall.payingatonce %}
                
                                      <p><i>{% trans 'The fees are handled from the master conference admin panel.' %}</i></p>
                                      {{ createconf_form_update.feeunique.as_hidden }}
                                      {{ createconf_form_update.fee_currency_unique.as_hidden }}
                                      {{ createconf_form_update.fee.as_hidden }}
                                      {{ createconf_form_update.fee_amount.as_hidden }}
                                      {{ createconf_form_update.fee_currency.as_hidden }}
                                      {{ createconf_form_update.fee_variable.as_hidden }}
                                      {{ createconf_form_update.fee_to_carbon.as_hidden }}
                                  {% else %}
                                      {{ createconf_form_update.fee|as_crispy_field }}
                                      {{ createconf_form_update.fee_currency_unique.as_hidden }}

                                      <div id="nope"></div>
                                      <div id="fees" style="display: none;">
                                          <div class="row">
                                          <div class="col">
                                                  {{ createconf_form_update.fee_amount|as_crispy_field }}
                                          </div>
                                          <div class="col">{{ createconf_form_update.fee_currency|as_crispy_field }}</div>
                                          </div>
                                      </div>
                                  {% endif %}
                              {% else %}
                                  <div>{{ createconf_form_update.feeunique|as_crispy_field }}</div>
                                  <div id="nopeu"></div>
                                  <div id="feesu" style="display: none;">
                                      <!--<div><b>The fee per participant is <span id="totab" style="font-size: 18px;"></span><span id="tota" style="font-size: 18px;">{{ COST_PER_PARTICIPANT }}</span><span id="totaa" style="font-size: 18px;"> €</span></b></div>-->
                                      <div>{{ createconf_form_update.fee_currency_unique|as_crispy_field }}</div>
                                  </div>
                                  {{ createconf_form_update.fee|as_crispy_field }}
                                  <div id="nope"></div>
                                  <div id="fees" style="display: none;">
                                      <div class="row">
                                      <div class="col">
                                                  {{ createconf_form_update.fee_amount|as_crispy_field }}

                                          <div class="col">{{ createconf_form_update.fee_variable|as_crispy_field }}</div>

                                      </div>
                                      <div class="col">{{ createconf_form_update.fee_currency|as_crispy_field }}</div>
                                      <div class="col">{{ createconf_form_update.fee_to_carbon|as_crispy_field }}</div>

                                      </div>
                                  <div class="row">
                                   <div class="col" id="amount">
                                  </div>
                                  </div>
                                  </div>
                              {% endif %}

                              {{ createconf_form_update.hybrid|as_crispy_field }}

                              {% if conftopass.status == 2 or conftopass.daughterconf and mastconfall.payingatonce and mastconfall.status == 2 %}

                                  <p class="text-danger">{% trans 'Now that you have paid, proceedings choice cannot be changed (contact us if needed).'%}</p>
                                  <div class="col-12">
                                      <p><i>{% trans 'Presenters must write proceedings after the conference?:'%}</i> {% if conftopass.proceedin %} {% trans 'Yes'%} {% else %} {% trans 'No'%} {% endif %}  </p>
                                  </div>
                                  {{ createconf_form_update.proceedin.as_hidden }}

                              {% else %}

                                  {{ createconf_form_update.proceedin|as_crispy_field }}

                              {% endif %}
                              </div>

                              <input type="hidden" name="confnum" class="confnum" value="{{ confnum }}" />
                              <input type="hidden" name="updateconf" class="updateconf" value="updateconf" />
                              <!--<label class="checkbox"><input type="checkbox" value="multi" id="multi" {% if conftopass.daughterconf or conftopass.masterconf %}checked="checked"{% endif %} style="opacity:0; position:absolute; left:9999px;">Option Text</label>-->

                              <div class="mt-4"><button type="submit" id="regconf2" class="btn btn-success mb-3"><strong>{% trans 'Update these parameters'%}</strong></button></div>

                          </form>
                          {% if messages %}
                          {% for message in messages %}
                              {%if "dates" in message.tags %}
                                  <div class="alert alert-danger mt-2" role="alert">
                                      <p>{{ message }}</p>
                                  </div>
                              {% endif %}
                          {% endfor %}
                      {% endif %}

                </div>
                </div>
                  <script>
                      $("#id_room_logo").change(function(){
                          $("#file-name").text(this.files[0].name);
                      });
                  </script>
                  <script>
                      $("#id_background").change(function(){
                          $("#file-name2").text(this.files[0].name);
                      });
                  </script>

                  <div class="tab-pane fade gendiv" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                      <div class="border mb-3">
                          <div class="mt-2"><p><a href="{% url 'my_app2:exampleModalpart' %}" class="btn" data-toggle="modal" data-target="#exampleModalpart" id="gopart" style="text-decoration: none;"> <strong>{% trans 'What can I do here: a simple guide'%}</strong> </a></p></div>

                      <p>
                        <a class="links-bs" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                            {% trans 'Get a fast registration link for organizers/participants'%}
                        </a>
                      </p>
                      <div class="collapse mb-3" id="collapseExample">
                        <div class="card card-body">


                          <p>{% trans 'If you want to quickly add other organizers to help you filling in the admin panel before your conference website is ready, they can do so on this private link:'%}
                              <a href="/fastregistration/{{ confnum }}/home/{{ fastpass }}" target="_blank" id="myInput">{{ request.get_host }}/fastregistration/{{ confnum }}/home/{{ fastpass }}</a> <small>(<a class="copy_text"  data-toggle="tooltip" title="Copy to Clipboard" href="{{ request.get_host }}/fastregistration/{{ confnum }}/home/{{ fastpass }}">{% trans 'Copy Link'%}</a>)</small> - {% trans 'They will then appear here and you can give them superuser rights.'%}</p>
                            <p> {% trans 'You can also use this link if you forbid abstract submissions on your conference website but would like certain persons to be able to submit abstracts.'%}
                      </p>

                        </div>
                      </div>

                      <div class="row">
                      <div class="col-3 mb-2">

                          <button type="submit" class="links-bs" data-toggle="modall2" class="open-modal" data-url="{% url 'my_app:email' confnum %}" data-toggle="tooltip" data-placement="right" title="{% trans 'Click this button to send an email of your choice to program committee/Organizers/Participants...'%}" value="email">
                           <span class="fa fa-envelope" aria-hidden="true"></span>
                              <span><strong>{% trans 'Send group emails'%}</strong></span></button>



                      </div>
                  </div>
                      <div class="row">
                      <div class="col-12 mr-3 mb-2">
                          <form enctype="multipart/form-data" method="POST" action="{% url 'my_app:booklet' %}">
                              {% csrf_token %}
                              <input type="hidden" name="confnumx" value="{{ confnum }}" />
                          <button type="submit" id="downb" class="links-bs" data-toggle="tooltip" data-placement="right" title="{% trans 'Click this button to download the abstract book for accepted talks'%}" value="booklet">
                           <span class="fa fa-book" aria-hidden="true"></span>
                              <span><strong> {% trans 'Download abstract book'%}</strong></span></button>
                          </form>
                      </div>
                          <div class="col-12 mr-3 mb-2">
                          <form enctype="multipart/form-data" method="POST" action="{% url 'my_app:psg' confnum 0 %}">
                              {% csrf_token %}
                          <button type="submit" id="downc" class="links-bs" data-toggle="tooltip" data-placement="right" title="{% trans 'Click this button to download the list of participants'%}" value="listpar">
                           <span class="fa fa-heartbeat" aria-hidden="true"></span>
                              <span><strong> {% trans 'Download list of participants'%} {% if conftopass.masterconf %}{% trans 'to the plenary'%}{% endif %}</strong></span></button>
                          </form>
                      {% if conftopass.masterconf %}
                          <form enctype="multipart/form-data" method="POST" action="{% url 'my_app:psg' confnum 1 %}">
                              {% csrf_token %}
                          <button type="submit" id="downd" class="links-bs" data-toggle="tooltip" data-placement="right" title="{% trans 'Click this button to download the list of participants to all sessions of the conference'%}" value="listpar">
                           <span class="fa fa-heartbeat" aria-hidden="true"></span>
                              <span><strong> {% trans 'Download list of participants to all sessions'%}</strong></span></button>
                          </form>
                      {% endif %}
                      </div>
                      <div class="col-12 mr-3 mb-2">
                          <form enctype="multipart/form-data" method="POST" action="{% url 'my_app:book' %}">
                              {% csrf_token %}
                              <input type="hidden" name="confnumx" value="{{ confnum }}" />
                          <button type="submit" id="downe" class="links-bs" data-toggle="tooltip" data-placement="right" title="{% trans 'Click this button to download the list of submitted abstracts for talks and/or posters'%}" value="book">
                           <span class="fa fa-book" aria-hidden="true"></span>
                              <span><strong> {% trans 'Download list of submitted abstracts'%}</strong></span></button>
                          </form>


                      </div>
                  </div>
            <hr style="background-color: white; border-top:2px dotted #000">
            
                          <div class="mb-3"><small>{% trans 'Sort participants by'%} <p style="display: inline-block;margin: 0;"><a href="{% if sortingtem == 'dateu' %}{% url 'my_app2:createconf' 'dated' %}{% else %}{% url 'my_app2:createconf' 'dateu' %}{% endif %}">{% trans 'date'%}</a></p> <a href="{% url 'my_app2:createconf' 'dateu' %}" title="{% trans 'Sort in ascending order'%}" class="up-arrow" {% if sortingtem == 'dateu' %}style="border-bottom-color: lightgray"{% endif %}></a><a href="{% url 'my_app2:createconf' 'dated' %}" title="{% trans 'Sort in descending order'%}" class="down-arrow" {% if sortingtem == 'dated' %}style="border-top-color: lightgray;"{% endif %}></a> - <p style="display: inline-block;margin: 0;"><a href="{% if sortingtem == 'typeu' %}{% url 'my_app2:createconf' 'typed' %}{% else %}{% url 'my_app2:createconf' 'typeu' %}{% endif %}">{% trans 'participation type'%}</a></p> <a href="{% url 'my_app2:createconf' 'typeu' %}" title="{% trans 'Sort in ascending order'%}" class="up-arrow" {% if sortingtem == 'typeu' %}style="border-bottom-color: lightgray"{% endif %}></a><a href="{% url 'my_app2:createconf' 'typed' %}" title="{% trans 'Sort in descending order'%}" class="down-arrow" {% if sortingtem == 'typed' %}style="border-top-color: lightgray;"{% endif %}></a> - <p style="display: inline-block;margin: 0;"><a href="{% if sortingtem == 'statusu' %}{% url 'my_app2:createconf' 'statusd' %}{% else %}{% url 'my_app2:createconf' 'statusu' %}{% endif %}">{% trans 'status'%}</a></p> <a href="{% url 'my_app2:createconf' 'statusu' %}" title="{% trans 'Sort in ascending order'%}" class="up-arrow" {% if sortingtem == 'statusu' %}style="border-bottom-color: lightgray"{% endif %}></a><a href="{% url 'my_app2:createconf' 'statusd' %}" title="{% trans 'Sort in descending order'%}" class="down-arrow" {% if sortingtem == 'statusd' %}style="border-top-color: lightgray;"{% endif %}></a> - <p style="display: inline-block;margin: 0;"><a href="{% if sortingtem == '' %}{% url 'my_app2:createconf' 'named' %}{% else %}{% url 'my_app2:createconf' %}{% endif %}">{% trans 'name'%}</a></p> <a href="{% url 'my_app2:createconf' %}" title="{% trans 'Sort in ascending order'%}" class="up-arrow" {% if sortingtem == '' %}style="border-bottom-color: lightgray"{% endif %}></a><a href="{% url 'my_app2:createconf' 'named' %}" title="{% trans 'Sort in descending order'%}" class="down-arrow" {% if sortingtem == 'named' %}style="border-top-color: lightgray;"{% endif %}></a></small></div>

                      {% if conftopass.hybrid %}
                          <p>{% trans 'It is an Hybrid Meeting: so far'%} {{ subpeopleftflength }} {% trans 'accepted participant'%}{{ subpeopleftflength|pluralize:",s" }} {% trans 'declared coming in person and'%} {{ subpeoplenotftflength }} {% trans 'will assist virtually.'%}</p>
                      {% endif %}
                     {% if peoplefirstnames %}
                          <div id="nbpar"><h5><i class="far fa-handshake"></i> {{ peoplefirstnameslength }} {% trans 'participant'%}{{ peoplefirstnameslength|pluralize:",s" }} {% trans 'added by you'%}</h5></div>
                         {% if listnumberu != 0 %}
                             <h4 style="color: red" class="mt-2 mb-2"><strong><i class="far fa-star"></i> {{ listnumberu }} {% trans 'new update'%}{{ listnumberu|pluralize:",s" }} {% trans 'here below since you last loaded this page'%}.</strong></h4>
                         {% endif %}

                         <div class="mb-3">
                             <label><input type="checkbox" id="selectall"> <small>{% trans 'Select All'%}</small></label>
                         <!--<button type="submit" class="btn btn-info mb-3"><strong>Validate the participations of selected persons</strong></button><i data-toggle="tooltip" data-placement="bottom" title="An nly when you get. In the meantime you can add and delete peferene." class="fas fa-info-circle"></i>-->
                          <button type="submit" class="btn btn-info a-btn-slide-text" data-toggle="tooltip" data-placement="top" title="{% trans 'It will validate all participations selected at once (note that all participations for a given person will be accepted if several are submitted)'%}" id="buttonselectall" value="validall" style="display: none;">
                                           <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                              <span><strong>{% trans 'Validate the participations of selected persons'%}</strong></span></button>
                         </div>
                          {% for i in peoplefirstnames %}
                                  <div class="divpeop" id="{{ forloop.counter0 }}">

                                  <div class="row mb-4 align-items-center">

                                      <div class="col-md-auto">

                                              <input type="checkbox" id="selectperson{{ forloop.counter0 }}" name="selectperson" class="selectperson" value="{{ peopleemails|index:forloop.counter0 }}" {% ifequal liststatus|index:forloop.counter0 '3'%}disabled{% endifequal %}>

                                      </div>

                                      <div class="col-md-auto">

                                          <input class="form-control lll" type="text" size="10" placeholder="{{ peoplefirstnames|index:forloop.counter0 }}" readonly>

                                      </div>
                                      <div class="col-md-auto">

                                          <input class="form-control lll" type="text" size="10" placeholder="{{ peoplelastnames|index:forloop.counter0 }}" readonly>

                                      </div>
                                      <div class="col-md-auto">

                                          <input class="form-control ll" type="text" size="20" placeholder="{{ peopleemails|index:forloop.counter0 }}" readonly>

                                      </div>
                                      <div class="col-md-auto">
                                          <form enctype="multipart/form-data" class="del" id="{{forloop.counter0}}" method="POST" action="">
                                          {% csrf_token %}

                                          <input type="hidden" name="peoplefn" value="{{peoplefirstnames|index:forloop.counter0}}" />
                                          <input type="hidden" name="peopleln" value="{{peoplelastnames|index:forloop.counter0}}" />
                                          <input type="hidden" name="peopleemail" class="pemail" value="{{peopleemails|index:forloop.counter0}}" />
                                          <input type="hidden" name="confnum" class="pconfnum" value="{{ confnum }}" />
                                          <input type="hidden" name="idarg" class="pidarg" value="{{ forloop.counter0 }}" />

                                          <div class="bob"><button type="submit" class="btn btn-danger a-btn-slide-text bt-del" data-toggle="tooltip" data-placement="top" title="{% trans 'This participant will be removed from your list'%}" id="del{{forloop.counter0}}" value="delete">
                                           <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                              <!--<span><strong>Delete</strong></span>--></button></div>
                                          </form>
                                      </div>


                                      <div class="col-2" style="text-align:center;">
                                          <!--<a class="btn btn-primary a-btn-slide-text btn-warning" data-toggle="modall" class="open-modal" data-url="{% url 'my_app:valperson' peopleemails|index:forloop.counter0 confnum %}">
                                              <span class="fas fa-user" aria-hidden="true">Not Registered yet</span></a>-->

                                          <button type="submit"  class="btn btn-info a-btn-slide-text" {% ifequal listupdated|index:forloop.counter0 '1' %}style="border:4px solid black;border-color: red;"{% endifequal %} data-toggle="modall" rel="tooltip" data-placement="top" title="{% trans 'Validate the participant talk or update their info (T=Talk, P=Poster, R=Review, I=Invited talk, D=Discussion)'%}" class="open-modal" data-url="{% url 'my_app:valperson' peopleemails|index:forloop.counter0 confnum %}" {% ifequal liststatus|index:forloop.counter0 '3'%} disabled {% endifequal %}>
                                              <span class="fas fa-user" aria-hidden="true">{% ifequal liststatus|index:forloop.counter0 '3'%}{% trans 'Not Registered'%}{% endifequal %}{% ifequal liststatus|index:forloop.counter0 '1'%}{% trans 'Accepted'%} ({{ listnumber|index:forloop.counter0 }}) {% if listnumber2|index:forloop.counter0 != 0 %} <span style="color: #721c24;">{% trans 'Waiting'%}</span> ({{ listnumber2|index:forloop.counter0 }}) {% endif %}{% endifequal %}{% ifequal liststatus|index:forloop.counter0 '0'%}<span style="color: #721c24;">{% trans 'Waiting'%}</span> ({{ listnumber2|index:forloop.counter0 }}) {% endifequal %}{% if listt|index:forloop.counter0 != 0 %} T {% endif %}{% if listp|index:forloop.counter0 != 0 %} P {% endif %}{% if listi|index:forloop.counter0 != 0 %} I {% endif %}{% if listr|index:forloop.counter0 != 0 %} R {% endif %}{% if listd|index:forloop.counter0 != 0 %} D {% endif %}</span></button>

                                          <!--<button type="submit" class="btn btn-primary a-btn-slide-text btn-warning" data-toggle="modal" data-target="#seeModal" value="seeinfo">-->

                                      </div>
                                      <div class="col-md-auto">
                                          <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3"  rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:email' confnum peopleemails|index:forloop.counter0 %}" data-toggle="tooltip" data-placement="right" title="{% trans 'Click this button to send an email to this person.'%}" value="email">
                                          <span class="fa fa-envelope" aria-hidden="true"></span></button>
                                      </div>
                                      {% ifequal liststatus|index:forloop.counter0 '1'%}
                                      {% if listp|index:forloop.counter0 != 0 or listt|index:forloop.counter0 != 0 %}
                                      <div class="col-md-auto">
                                          <form enctype="multipart/form-data" method="POST" action="/addtoschedule/">
                                          {% csrf_token %}

                                          <input type="hidden" name="peoplefn" class="pfnplus" value="{{peoplefirstnames|index:forloop.counter0}}" />
                                          <input type="hidden" name="peopleln" class="plnplus" value="{{peoplelastnames|index:forloop.counter0}}" />
                                          <input type="hidden" name="peopleemail" class="pemailplus" value="{{peopleemails|index:forloop.counter0}}" />
                                          <input type="hidden" name="confnum" class="pconfnumplus" value="{{ confnum }}" />
                                          <input type="hidden" name="other" class="potherplus" value="n" />

                                          <button type="submit" class="btn btn-info a-btn-slide-text bt-plus" id="plus{{forloop.counter0}}" data-toggle="tooltip" data-placement="top" title="{% trans 'Add accepted participation(s) to schedule'%}" value="plus">
                                              <span class="fa fa-plus" aria-hidden="true"></span></button>
                                          </form>
                                      </div>
                                      {% endif %}
                                      {% endifequal %}
                                      {% ifequal listrole|index:forloop.counter0 '3'%}
                                      <div class="col-md-auto">
                                          <h4><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is a SuperUser: They have all controls on the conference settings'%}" class="fas fa-user-secret" style="color:#FF9933;"></i></h4>
                                      </div>
                                      {% endifequal %}
                                      {% ifequal listrole|index:forloop.counter0 '1'%}
                                      <div class="col-md-auto">
                                          <h5><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is a Moderator: They have all controls during the actual webinar'%}" class="fas fa-users" style="color:#003366;"></i></h5>
                                      </div>
                                      {% endifequal %}
                                      {% ifequal listsoc|index:forloop.counter0 '1'%}
                                      <div class="col-md-auto">
                                          <h4><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is a Member of the program committee: They are part of the organizing committee, which creates the conference program'%}" class="fas fa-rocket" style="color:#a41515;"></i></h4>
                                      </div>
                                      {% endifequal %}
                                      {% ifequal listsoc|index:forloop.counter0 '2'%}
                                      <div class="col-md-auto">
                                          <h4><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is an Organizer: They are the creators of the conference'%}" class="fas fa-eye" style="color:#f5dd5d;"></i></h4>
                                      </div>
                                      {% endifequal %}
                                  </div>
                                      <div class="test2b" class="mb-2 mt-2"></div>

                              </div>
                          {% endfor %}
                      {% endif %}
                      <div id="test"></div>
                      <div id="test2" class="mb-2 mt-2"></div>

                      {% if peoplefirstnames.has_other_pages %}
                          <div class="containerpage">
                        <ul class="pagination">
                          {% if peoplefirstnames.has_previous %}
                            <li class="page-item"><a class="page-link" href="?page={{ peoplefirstnames.previous_page_number }}">&laquo;</a></li>
                          {% else %}
                            <li class="disabled page-item"><a class="page-link" href="#" tabindex="-1"><span>&laquo;</span></a></li>
                          {% endif %}
                          {% for i in peoplefirstnames.paginator.page_range %}
                            {% if peoplefirstnames.number == i %}
                              <li class="active page-item"><a class="page-link" href="#">{{ i }} <span class="sr-only">{% trans '(current)'%}</span></a></li>
                            {% else %}
                              <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
                            {% endif %}
                          {% endfor %}
                          {% if peoplefirstnames.has_next %}
                            <li class="page-item"><a class="page-link" href="?page={{ peoplefirstnames.next_page_number }}">&raquo;</a></li>
                          {% else %}
                            <li class="disabled page-item"><a class="page-link" href="#" tabindex="-1"><span>&raquo;</span></a></li>
                          {% endif %}
                        </ul>
                          </div>
                      {% endif %}

                       <form enctype="multipart/form-data" id="add_people" method="POST" action="addpeople/">
                          {% csrf_token %}

                          <div class="row">
                              <div class="col">

                                  {{ createpeople_form.firstname|as_crispy_field }}

                              </div>
                              <div class="col">

                                  {{ createpeople_form.lastname|as_crispy_field }}
                              </div>
                              <div class="col">

                                  {{ createpeople_form.email|as_crispy_field }}
                                  {% if email2 %}
                                      <div>{% trans 'Email already exist in your list'%}</div>
                                  {% endif %}
                              </div>
                          </div>
                          <div id="results"></div>
                           <div class="mt-4 mb-4"><button type="submit" class="btn btn-info mb-3"><strong>{% trans 'Add this person!'%}</strong></button><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'An email will be sent to these added persons to start registering only when you go to emails and choose to send an email to the persons that have been invited but did not register yet. In the meantime you can add and delete people and come up with the right list. When you submit the conference and people start registering for a talk you can see and validate their talk here.'%}" class="fas fa-info-circle"></i></div>

                      </form>
                      <form name="createconf_form" enctype="multipart/form-data" method="POST" action="/addpeople/">
                          {% csrf_token %}

                          <table id="outerDiv" cellpadding="0" cellspacing="0" border="0">
                          <tr>
                              <td valign="middle" id="innerDiv" style="background-color: #17a2b8;display: flex;gap: 1rem; padding: 1rem;">
                                  <span class="btn-info btn-file">
                                      <i class="fa fa-image"></i> {% trans 'Upload an Excel file with participants'%}{{ excelform.excel_file|as_crispy_field }}
                                  </span>  <i data-toggle="tooltip" data-placement="bottom" title="{% trans 'If you do not want to enter the names of your participants one by one here, add them through an excel file, which first column is first name, second is last name and last is email. It will only add those with emails that are not already in your list and it will keep people you already added.'%}" class="fas fa-info-circle"></i>  <label id="file-nameexc"></label>
                              </td>
                          </tr>
                          </table>
                          <input type="hidden" name="excel" value="y" />
                          <div class="mt-1 mb-3"><button type="submit" id="load" class="btn btn-info load">{% trans 'Load participants from the uploaded excel file'%}</button><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'After uploading the excel file click here to load the participants in your administration.'%}" class="fas fa-info-circle"></i></div>

                      </form>
                      {% if messages %}
                          {% for message in messages %}
                              {%if "file" in message.tags %}
                                  <div class="alert alert-danger" role="alert">
                                      <p>{{ message }}</p>
                                  </div>
                              {% endif %}
                          {% endfor %}
                      {% endif %}
                      <script>
                      $("#id_excel_file").change(function(){
                          $("#file-nameexc").text(this.files[0].name);
                      });
                      </script>
                      <script>
                          $(document).ready(function() {
                               $('#load').prop('disabled', true);
                                  $(document).on('change', '#id_excel_file', function (event) {
                                     //$(':input[type="submit"]').prop('disabled', false);
                                     $('#load').prop('disabled', false);
                                  })
                               });
                      </script>
                      <script>
                          $('#add_people').on('submit', function(event){
                              event.preventDefault();
                              //alert('yo')
                              console.log("form submitted!")  // sanity check
                              addpeopleb($(this));
                          });

                      </script>

                    {% if subpeople %}
                        <div><h5><i class="far fa-handshake"></i> {{ subpeoplelength }} {% trans 'other participant'%}{{ subpeoplelength|pluralize:",s" }} {% trans 'that registered'%}</h5></div>
                        {% if listnumbersubu != 0 %}
                             <h4 style="color: red" class="mt-2 mb-2"><strong><i class="far fa-star"></i> {{ listnumbersubu }} {% trans 'new update'%}{{ listnumbersubu|pluralize:",s" }} {% trans 'here below since you last loaded this page'%}.</strong></h4>
                         {% endif %}
                        <div class="mb-3">
                            <label><input type="checkbox" id="selectall2"> <small>{% trans 'Select All'%}</small></label>
                         <!--<button type="submit" class="btn btn-info mb-3"><strong>Validate the participations of selected persons</strong></button><i data-toggle="tooltip" data-placement="bottom" title="An nly when you get. In the meantime you can add and delete peferene." class="fas fa-info-circle"></i>-->
                          <button type="submit" class="btn btn-info a-btn-slide-text" data-toggle="tooltip" data-placement="top" title="{% trans 'It will validate all participations selected at once (note that all participations for a given person will be accepted if several are submitted)'%}" id="buttonselectall2" value="validall2" style="display: none;">
                                           <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                              <span><strong>{% trans 'Validate the participations of selected persons'%}</strong></span></button>
                         </div>
                          {% for sub in subpeople %}

                                  <div class="row mb-4 align-items-center">
                                      <div class="col-md-auto">

                                          <input type="checkbox" id="selectperson2{{ forloop.counter0 }}" name="selectperson2" class="selectperson2" value="{{ sub.user.email }}" {% ifequal liststatussub|index:forloop.counter0 '3'%}disabled{% endifequal %}>

                                      </div>

                                      <div class="col-md-auto">

                                          <input class="form-control lll" type="text" size="10" placeholder="{{ sub.user.first_name }}" readonly>

                                      </div>
                                      <div class="col-md-auto">

                                          <input class="form-control lll" type="text" size="10" placeholder="{{ sub.user.last_name }}" readonly>

                                      </div>
                                      <div class="col-md-auto">

                                          <input class="form-control ll" type="text" size="20" placeholder="{{ sub.user.email }}" readonly>

                                      </div>


                                      <div class="col-2" style="text-align:center">
                                          <!--<a class="btn btn-primary a-btn-slide-text btn-warning" data-toggle="modall" class="open-modal" data-url="{% url 'my_app:valperson' sub.user.email confnum %}">
                                              <span class="fas fa-user" aria-hidden="true">Not Registered yet</span></a>-->

                                          <button type="submit" class="btn btn-info a-btn-slide-text" {% ifequal listupdatedsub|index:forloop.counter0 '1' %}style="border:4px solid black;border-color: red;"{% endifequal %} rel="tooltip" data-placement="top" title="{% trans 'Validate the participant talk or update their info (T=Talk, P=Poster, R=Review, I=Invited talk, D=Discussion)'%}" data-toggle="modall" class="open-modal" data-url="{% url 'my_app:valperson' sub.user.email confnum %}" >
                                              <span class="fas fa-user" aria-hidden="true">{% ifequal liststatussub|index:forloop.counter0 '0'%} <span style="color: #721c24;">{% trans 'Waiting'%}</span> ({{ listnumbersub2|index:forloop.counter0 }}) {% endifequal %} {% ifequal liststatussub|index:forloop.counter0 '1'%} {% trans 'Accepted'%} ({{ listnumbersub|index:forloop.counter0 }}) {% if listnumbersub2|index:forloop.counter0 != 0 %} <span style="color: #721c24;">{% trans 'Waiting'%}</span> ({{ listnumbersub2|index:forloop.counter0 }}) {% endif %} {% endifequal %}{% if listtsub|index:forloop.counter0 != 0 %} T {% endif %}{% if listpsub|index:forloop.counter0 != 0 %} P {% endif %}{% if listisub|index:forloop.counter0 != 0 %} I {% endif %}{% if listrsub|index:forloop.counter0 != 0 %} R {% endif %}{% if listdsub|index:forloop.counter0 != 0 %} D {% endif %}</span></button>

                                          <!--<button type="submit" class="btn btn-primary a-btn-slide-text btn-warning" data-toggle="modal" data-target="#seeModal" value="seeinfo">-->

                                      </div>
                                      <div class="col-md-auto">
                                          <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" class="open-modal" data-url="{% url 'my_app:email' confnum sub.user.email %}" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" value="email">
                                          <span class="fa fa-envelope" aria-hidden="true"></span></button>
                                      </div>
                                      {% ifequal liststatussub|index:forloop.counter0 '1'%}
                                          {% if listpsub|index:forloop.counter0 != 0 or listtsub|index:forloop.counter0 != 0 %}

                                      <div class="col-md-auto">
                                          <form enctype="multipart/form-data" method="POST" action="/addtoschedule/">
                                          {% csrf_token %}

                                          <input type="hidden" name="peoplefn" class="pfnplus" value="{{ sub.user.first_name }}" />
                                          <input type="hidden" name="peopleln" class="plnplus" value="{{ sub.user.last_name }}" />
                                          <input type="hidden" name="peopleemail" class="pemailplus" value="{{ sub.user.email }}" />
                                          <input type="hidden" name="confnum" class="pconfnumplus" value="{{ confnum }}" />
                                          <input type="hidden" name="other" class="potherplus" value="y" />

                                          <button type="submit" class="btn btn-info a-btn-slide-text bt-plus" id="plus{{forloop.counter0}}" data-toggle="tooltip" data-placement="top" title="{% trans 'Add accepted participation(s) to schedule'%}" value="plus">
                                              <span class="fa fa-plus" aria-hidden="true"></span></button>
                                          </form>

                                      </div>

                                          {% endif %}
                                      {% endifequal %}
                                      {% ifequal listrolesub|index:forloop.counter0 '3'%}
                                      <div class="col-md-auto">
                                          <h4><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is a SuperUser: They have all controls on the conference settings' %}" class="fas fa-user-secret" style="color:#FF9933;"></i></h4>
                                      </div>
                                      {% endifequal %}
                                      {% ifequal listrolesub|index:forloop.counter0 '1'%}
                                      <div class="col-md-auto">
                                          <h5><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is a Moderator: They have all controls during the actual webinar' %}" class="fas fa-users" style="color:#003366;"></i></h5>
                                      </div>
                                      {% endifequal %}
                                      {% ifequal listsocsub|index:forloop.counter0 '1'%}
                                      <div class="col-md-auto">
                                          <h4><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is a Member of the program committee: They are part of the organizing committee, which creates the conference program' %}" class="fas fa-rocket" style="color:#a41515;"></i></h4>
                                      </div>
                                      {% endifequal %}
                                      {% ifequal listsocsub|index:forloop.counter0 '2'%}
                                      <div class="col-md-auto">
                                          <h4><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is an Organizer: They are the creators of the conference' %}" class="fas fa-eye" style="color:#f5dd5d;"></i></h4>
                                      </div>
                                      {% endifequal %}

                                  </div>
                              <div class="test222" class="mb-2 mt-2"></div>
                          {% endfor %}
                      {% endif %}

                      <div id="test22" class="mb-2 mt-2"></div>
                      {% if subpeople.has_other_pages %}
                          <div class="containerpage">
                        <ul class="pagination">
                          {% if subpeople.has_previous %}
                            <li class="page-item"><a class="page-link" href="?page2={{ subpeople.previous_page_number }}">&laquo;</a></li>
                          {% else %}
                            <li class="disabled page-item"><a class="page-link" href="#" tabindex="-1"><span>&laquo;</span></a></li>
                          {% endif %}
                          {% for i in subpeople.paginator.page_range %}
                            {% if subpeople.number == i %}
                              <li class="active page-item"><a class="page-link" href="#">{{ i }} <span class="sr-only">{% trans '(current)' %}</span></a></li>
                            {% else %}
                              <li class="page-item"><a class="page-link" href="?page2={{ i }}">{{ i }}</a></li>
                            {% endif %}
                          {% endfor %}
                          {% if subpeople.has_next %}
                            <li class="page-item"><a class="page-link" href="?page2={{ subpeople.next_page_number }}">&raquo;</a></li>
                          {% else %}
                            <li class="disabled page-item"><a class="page-link" href="#" tabindex="-1"><span>&raquo;</span></a></li>
                          {% endif %}
                        </ul>
                          </div>
                      {% endif %}


                    </div>

                  </div>


                <div class="tab-pane fade" id="program" role="tabpanel" aria-labelledby="program-tab">
                    <div class="border mb-3">
                        <div class="mt-2"><p><a href="{% url 'my_app2:exampleModalprog' %}" class="btn btn-secondary mt-2 mb-4" data-toggle="modal" data-target="#exampleModalprog" id="goprog" style="text-decoration: none;"> <strong>{% trans 'What can I do here: a simple guide'%}</strong> </a></p></div>
                        <div class="mt-2">
                      <a href="#" class="btn btn-sm btn-info" data-toggle="modal" data-target="#basicModal">{% trans 'Check how to use our scheduler' %}</a>
                      {% if conftopass.masterconf %}
                          <a href="{% url 'my_app2:wholeprogram' confnum%}" target="_blank" class="btn btn-sm btn-info">{% trans 'Check the whole conference program'%}</a>
                      {% endif %}
                      <!--<p id="menu"></p>-->
                      {% include "my_app/schedule.html" with loca="createconf" confnum=confnum initially=initially start_date=start_date timestart=timestart timefinish=timefinish mineventheight=mineventheight heighthr=heighthr minieventtime=minieventtime opacity=opacity %}
                    </div>        <!--fields = ('timestart', 'timefinish', 'mineventheight')-->
                        <hr class="new5 mb-5">

                    <div class="mt-2">
                        <p><strong>{% trans 'Customize the schedule'%}</strong></p>
                        <form enctype="multipart/form-data" method="POST" action="">
                          {% csrf_token %}
                        <input type="hidden" name="progform" value="progform" />
                        <p><i data-toggle="tooltip" data-placement="top" title="{% trans 'Your program will be displayed starting from this time (in hour) thus reducing the total time span to less than 24 hours if needed'%}" class="fas fa-info-circle"></i></p>
                        {{ program_form.timestart|as_crispy_field }}
                        <p><i data-toggle="tooltip" data-placement="top" title="{% trans 'Your program will be displayed up to this maximum time (in hour) thus reducing the total time span to less than 24 hours if needed'%}" class="fas fa-info-circle"></i></p>
                        {{ program_form.timefinish|as_crispy_field }}
                        <p><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is the minimum height of a box in your program (make it 50 if you do not know). Too small a height would prevent from seeing info of short participations.'%}" class="fas fa-info-circle"></i></p>
                        {{ program_form.mineventheight|as_crispy_field }}
                        <p><i data-toggle="tooltip" data-placement="top" title="{% trans 'How many sub-boxes in a one hour time slot (make it 6 if you do not know)? The bigger the size, the easier it will be to read and separate the different parts of the program and avoid overlapping.'%}" class="fas fa-info-circle"></i></p>
                        {{ program_form.heighthr|as_crispy_field }}
                        <p><i data-toggle="tooltip" data-placement="top" title="{% trans 'This is the size under which the box format switches to the mini format (make it 15 if you do not know).'%}" class="fas fa-info-circle"></i></p>
                        {{ program_form.minieventtime|as_crispy_field }}
                        <p><i data-toggle="tooltip" data-placement="top" title="{% trans 'Set the opacity of the colored boxes between 1 and 10 (make it 10 if you do not know).'%}" class="fas fa-info-circle"></i></p>
                        {{ program_form.opacity|as_crispy_field }}

                            <div class="mt-5 mb-5"><button type="submit" class="btn btn-info"><strong>{% trans 'Save new program design'%}</strong></button></div>
                        </form>
                        {% if program_form.errors %}
      {% for field in program_form %}
          {% for error in field.errors %}
              <div class="alert alert-danger">
                  <strong>{{ error|escape }}</strong>
              </div>
          {% endfor %}
      {% endfor %}
      {% for error in program_form.non_field_errors %}
          <div class="alert alert-danger">
              <strong>{{ error|escape }}</strong>
          </div>
      {% endfor %}
  {% endif %}
                    </div>
                  </div>
                </div>

                <div class="tab-pane fade" id="website" role="tabpanel" aria-labelledby="website-tab">
                    <div class="border mb-3">
                        <div class="mt-2"><p><a href="{% url 'my_app2:exampleModalweb' %}" class="btn btn-secondary mt-2 mb-4" data-toggle="modal" data-target="#exampleModalweb" id="goweb" style="text-decoration: none;"> <strong>{% trans 'What can I do here: a simple guide'%}</strong> </a></p></div>
                    {% if conftopass.room_logo %}
                      <p class="ml-3 mb-3">{% trans 'Logo for the website'%}<br> <img src="{{ conftopass.room_logo.url }}" alt="Logo" style="width:100px!important" class="d-inline-block align-top"></p>
                      {% endif %}
                    {{ website_form.media }}
                  <form enctype="multipart/form-data" method="POST" action="">
                          {% csrf_token %}
                            <div class="col-5"><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'You can enter the url of your website here. If you enter exoplanet, the particpants would access your website via the url exoplanet.carbonfreeconf.com. 30 characters max, alphanumeric characters only, no spaces and no accents' %}" class="fas fa-info-circle"></i>
                                {{ website_form.titleurl|as_crispy_field }}</div>
                            <div class="col-5" style="margin-top: -10px; color: red;"><small>Not mandatory, only if you want an url of the form xxx.carbonfreeconf.com to access your website where xxx is 30 characters max. {% if website_form.titleurl.value %} Currently your website's url is {{ website_form.titleurl.value }}.carbonfreeconf.com {% endif %} </small></div>
                            <div class="col-5" style="color: red;font-weight: bold;" id="titleurl"></div>

                          <div class="col-5 mt-3">{{ website_form.color_background|as_crispy_field }}</div>
                          <div class="col-5">{{ website_form.color_text|as_crispy_field }}</div>
                          <div class="col-5">{{ website_form.color_men|as_crispy_field }}</div>

                          <div class="col-5 mb-3">
                            <p>{% trans "Hero (top) image on your website's frontpage" %}</p>
                            
                            {{ website_form.hero.as_hidden }}

                          <select class="js-example-templating" name="heroimages" id="selecthero">
                                <option value="nohero" data-id="0">{% trans 'No hero' %}</option>
                            {% for q in website_form.hero.field.queryset %}
                                <option value="{{ q.heroname }}" data-id="{{ q.id }}" {% if q.id == heroidselected %} selected {% endif %}>{{ q.heroname }}</option>
                            {% endfor %}
                          </select>
                          </div>

                          <p>{{ website_form.showprogram|as_crispy_field }}</p>
                          <p>{{ website_form.onlypprogram|as_crispy_field }}</p>
                          <p>{{ website_form.onlypabstract|as_crispy_field }}</p>
                          {% if conftopass.poster %}
                          <p>{{ website_form.onlypposter|as_crispy_field }}</p>
                          {% endif %}
                          <p>{{ website_form.showdoc|as_crispy_field }}</p>
                          <p>{{ website_form.onlypdoc|as_crispy_field }}</p>
                          <p>{{ website_form.share|as_crispy_field }}</p>

                          <input type="hidden" name="heroid" id="heroid" value="0" />

                          {% if conftopass.hybrid %}
                              <p><i>{% trans 'As this is an hybrid conference, you may want to detail the venue address in the Text for the Homepage below.'%}</i></p>
                          {% endif %}

                          <p><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'This is the text that will appear on the front page of your conference website. You can personalize it according to your wishes. You may want to add critical news here as well.' %}" class="fas fa-info-circle"></i></p>
                          <p style="display: inline-block">{{ website_form.homecontent|as_crispy_field }}</p>

                          <p><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'This is a page on your website dedicated to explain what your conference is about. You can personalize it and add images to it thanks to the editor provided. This is the selling point of your conference, which people will use to see whether the want to join.' %}" class="fas fa-info-circle"></i></p>
                          <p style="display: inline-block">{{ website_form.rationale|as_crispy_field }}</p>

                          <p><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'This is a part of the homepage of your website dedicated to give some guidelines to your participants. You should give important information such as when to last subscribe, if posters are allowed, how long talks are for, ...' %}" class="fas fa-info-circle"></i></p>
                          <p style="display: inline-block">{{ website_form.guidelines|as_crispy_field }}</p>

                          <div class="mt-4"><button id="updateweb" type="submit" class="btn btn-info {% if notselected %} disabled {% endif %}" {% if notselected %} onclick="return false;" {% endif %}>{% if webcrea %}{% trans 'Update Conference Website' %} {% else %} {% trans 'Create Conference Website' %} {% endif %}</button></div>
                      </form>
                         <form enctype="multipart/form-data" method="POST" target="_blank" action="{% url 'my_app:website' confnum 'home'%}">
                      {% csrf_token %}
                             <input type="hidden" name="cli" value="brah2" />

                      <div class="mt-4 mb-3"><button type="submit" class="btn btn-warning" {% if not webcrea %}disabled{% endif %}>{% if not webcrea %}{% trans 'When created, see' %}{% else %} {% trans 'See' %} {% endif %} {% trans 'the conference website' %}</button></div>
                      </form>
                    </div>
                </div>
              <div class="tab-pane fade" id="notes" role="tabpanel" aria-labelledby="notes-tab">
                    <!--<div class="border">-->
                  <div id="main2" class="mr-4">

                      <h4>{% trans 'Real time interaction notepad to take notes together' %}</h4>

                        <span class="username-label">{% trans 'Displayed name to others:'%} </span><span id="username"></span>
                      <textarea rows="4" id="textarea"></textarea>


                    </div>
                </div>
              <div class="tab-pane fade show" id="timeline" role="tabpanel" aria-labelledby="timeline-tab">
                    <script type="text/javascript" src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>
                    <link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
                  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>


                      <style type="text/css">
                          /*body {
                            font-family:  purisa, 'comic sans', cursive;
                          }*/

                          .vis-timeline {
                            border: 2px solid purple;
                            font-family:  purisa, 'comic sans', cursive;
                            font-size: 12pt;
                            background: #ffecea;
                          }

                          .vis-item {
                            border-color: #F991A3;
                            background-color: pink;
                            font-size: 15pt;
                            color: purple;
                            box-shadow: 5px 5px 20px rgba(128,128,128, 0.5);
                          }

                          .vis-item,
                          .vis-item.vis-line {
                            border-width: 3px;
                          }

                          .vis-item.vis-dot {
                            border-width: 10px;
                            border-radius: 10px;
                          }

                          .vis-item.vis-selected {
                            border-color: green;
                            background-color: lightgreen;
                          }

                          .vis-time-axis .vis-text {
                            color: purple;
                            padding-top: 10px;
                            padding-left: 10px;
                          }

                          .vis-time-axis .vis-text.vis-major {
                            font-weight: bold;
                          }

                          .vis-time-axis .vis-grid.vis-minor {
                            border-width: 2px;
                            border-color: pink;
                          }

                          .vis-time-axis .vis-grid.vis-major {
                            border-width: 2px;
                            border-color: #F991A3;
                          }

                          .menu {
                            /*position: absolute;
                            display: table-cell;
                            vertical-align: middle;
                            top: -55px;
                            right: 0;
                            margin: 10px;*/
                            padding-bottom: 10px;
                            z-index: 9999;
                          }
                  </style>

                  <div id="main2">
                          <p>{% trans 'Timeline (zoom in and out with your mouse or navigation bar to see more details)'%}</p>
                  </div>
                          <div id="visualization" class="mr-4 ml-3 mb-4">
                              <div class="menu">
                                <span>{% trans 'zoom out'%} </span>
                                <input id="sliderZoom" type="range" class="range" name="a" min="-1" max="1" step="0.1" value="0" title="{% trans 'Better use keyboard to each level zoom!'%}" />
                                <span> {% trans 'zoom in'%} </span>
                                <input type="button" id="fit" value=" &#8635; " title="reset" />
                                <input type="button" id="moveLeft" value="Move left" title="Move left" />
                                <input type="button" id="moveRight" value="Move right" title="Move right" />
                                <select name="dayvis" id="day-select">
                                  <option value="">--{% trans 'Select a specific day?'%}--</option>
                                    {% for s in starttimeline %}
                                          <option value="{{ s }}">{{ s }}</option>
                                    {% endfor %}
                                </select>
                              </div>
                          </div>





                </div>
          <div class="tab-pane fade show" id="graph" role="tabpanel" aria-labelledby="graph-tab">

                      <script type="text/javascript"
                          src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>


                  <div id="main2">
                          <p>{% trans 'Map of the conference (you can join the different rooms by clicking on their respective names'%}{% if not conftopass.masterconf %} {% trans 'or access posters if there are any'%}{% endif %}).</p>
                  </div>

                    <style type="text/css">

                        #mynetwork {
                          width: 100%;
                          height: 800px;
                          /*margin-top: 100px;*/
                          border: 1px solid lightgray;
                          /*background-color: #333333;*/
                          background-color: #FFFFFF;
                        }
                        #loadingBar {
                          position: absolute;
                          top: 0px;
                          left: 0px;
                          width: 100%;
                          height: 800px;
                          background-color: rgba(200, 200, 200, 0.8);
                          -webkit-transition: all 0.5s ease;
                          -moz-transition: all 0.5s ease;
                          -ms-transition: all 0.5s ease;
                          -o-transition: all 0.5s ease;
                          transition: all 0.5s ease;
                          opacity: 1;
                        }
                        #wrapper2 {
                          position: relative;
                          width: 100%;
                          /*height: 800px;*/
                        }

                        #text {
                          position: absolute;
                          top: 4px;
                          left: 530px;
                          width: 30px;
                          height: 50px;
                          margin: auto auto auto auto;
                          font-size: 22px;
                          color: #000000;
                        }

                        div.outerBorder {
                          position: relative;
                          top: 300px;
                          width: 600px;
                          height: 44px;
                          margin: auto auto auto auto;
                          border: 2px solid rgba(0, 0, 0, 0.1);
                          background: rgb(252, 252, 252); /* Old browsers */
                          background: -moz-linear-gradient(
                            top,
                            rgba(252, 252, 252, 1) 0%,
                            rgba(237, 237, 237, 1) 100%
                          ); /* FF3.6+ */
                          background: -webkit-gradient(
                            linear,
                            left top,
                            left bottom,
                            color-stop(0%, rgba(252, 252, 252, 1)),
                            color-stop(100%, rgba(237, 237, 237, 1))
                          ); /* Chrome,Safari4+ */
                          background: -webkit-linear-gradient(
                            top,
                            rgba(252, 252, 252, 1) 0%,
                            rgba(237, 237, 237, 1) 100%
                          ); /* Chrome10+,Safari5.1+ */
                          background: -o-linear-gradient(
                            top,
                            rgba(252, 252, 252, 1) 0%,
                            rgba(237, 237, 237, 1) 100%
                          ); /* Opera 11.10+ */
                          background: -ms-linear-gradient(
                            top,
                            rgba(252, 252, 252, 1) 0%,
                            rgba(237, 237, 237, 1) 100%
                          ); /* IE10+ */
                          background: linear-gradient(
                            to bottom,
                            rgba(252, 252, 252, 1) 0%,
                            rgba(237, 237, 237, 1) 100%
                          ); /* W3C */
                          filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfcfc', endColorstr='#ededed',GradientType=0 ); /* IE6-9 */
                          border-radius: 72px;
                          box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
                        }

                        #border {
                          position: absolute;
                          top: 10px;
                          left: 10px;
                          width: 500px;
                          height: 23px;
                          margin: auto auto auto auto;
                          box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2);
                          border-radius: 10px;
                        }

                        #bar {
                          position: absolute;
                          top: 0px;
                          left: 0px;
                          width: 20px;
                          height: 20px;
                          margin: auto auto auto auto;
                          border-radius: 11px;
                          border: 2px solid rgba(30, 30, 30, 0.05);
                          background: rgb(0, 173, 246); /* Old browsers */
                          box-shadow: 2px 0px 4px rgba(0, 0, 0, 0.4);
                        }
                      </style>
                          <div id="wrapper2" class="mb-5">
                                <div id="mynetwork"></div>
                                <div id="loadingBar">
                                  <div class="outerBorder">
                                    <div id="text">0%</div>
                                    <div id="border">
                                      <div id="bar"></div>
                                    </div>
                                  </div>
                                </div>
                          </div>


                </div>
              <div class="tab-pane fade" id="testroom" role="tabpanel" aria-labelledby="testroom-tab">
                    <!--<div class="border">-->
                    <div class="jumbotron">
                      <h4><i class="fas fa-video mr-3"></i>{% trans ' Before your conference starts, you can access a conference test room similar to the conference room that will be used on the big day by clicking'%} <a href="{% url "my_app2:joinconf" confnum %}" target="_blank" style="color:#003366;">{% trans 'here'%}</a>.</h4><h5> 
                          {% trans 'You will have moderator priviledge and will be able to change the room setup as you would like. You can also use this test room to gather with other organizers (as well as decision panel members or super-users, other participants cannot join this test room) to chat about the conference when needed.'%}</h5>
                    </div>
                </div>
              <div class="tab-pane fade" id="chatroom" role="tabpanel" aria-labelledby="chatroom-tab">
                        <!-- deja commente<div class="alert alert-info mt-3"> pas la ca-->
                      <p class="mb-3">{% blocktrans %}
                        Discussion rooms are created automatically for your conference in our open-source chat space. <a href="https://chat.carbonfreeconf.com" target="_blank">It is accessible here</a> or down below.
                          This is the place where your participants can gather and chat after talks to ask some more specific questions or even call each other via video or chat.
                          If you need to create more channels than those dedicated for your conference, you can do so easily at the bottom of this page. {% endblocktrans %}
                        </p>
                   <!--<iframe is="x-frame-bypass" src="https://chat.carbonfreeconf.com/"></iframe>-->
                  {% if messages %}
                  {% for message in messages %}
                      {%if "chat" in message.tags %}
                          <div class="alert alert-danger mt-3" role="alert">
                              <p>{{ message }}</p>
                          </div>
                      {% endif %}
                      {%if "csuc" in message.tags %}
                          <div class="alert alert-success mt-3" role="alert">
                              <p>{{ message }}</p>
                          </div>
                      {% endif %}
                  {% endfor %}
                  {% endif %}
                  <!--<div class="resp-container3 mb-3">
                      <iframe class="resp-iframe3" id="inlineFrameExample2" frameBorder="0"
                          title="CarbonFreeChat"
                          src="https://chat.carbonfreeconf.com/home?resumeToken={{ resumetoken }}"
                          allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera;">
                      </iframe>
                  </div>-->
                  <div id="main2" class="mr-4">
                    <div id="mainchat"></div>
                  <a href="https://chat.carbonfreeconf.com/home?resumeToken={{ resumetoken }}" target="_blank" id="newtabchat" class="btn btn-info mt-2 mb-2">{% trans 'Open chat in a new tab' %}</a>
                </div>

                  <hr>
                  <div><p><strong>{% trans 'Create a new private group for your conference?' %}</strong></p></div>
                  <form enctype="multipart/form-data" method="POST" action="">
                          {% csrf_token %}
                          {% for q in chatform %}
                              {{ q |as_crispy_field }}
                          {% endfor %}
                      <div class="mt-4"><button type="submit" class="btn btn-info mb-3">{% trans 'Create the private group' %}</button></div>
                  </form>
              </div>
              {% if conftopass.recording %}
              <div class="tab-pane fade" id="video" role="tabpanel" aria-labelledby="video-tab">
                    <!--<div class="border">-->
                  {% if status == '0' %}

          <div>{% trans 'Video'%}{{ archiveurl|length|pluralize:",s" }} {% trans 'for the meeting:'%} <strong>{{ title }}</strong> {% if conftopass.masterconf %}{% trans '(and its parallel sessions)'%}{% endif %}</div>
          <div class="d-flex justify-content-center">
          <div class="spinner-border text-success" role="status" style="margin-top: 10px;margin-bottom: 10px;" id="spinner-vid">
            <span class="sr-only">Loading...</span>
          </div>
          </div>

          <div id="menu-vid"></div>
          {% comment %}
          {% for vid in archiveurl %}
          <div class="mt-3">{% trans 'Here is a video for the session'%}{% if conftopass.masterconf %}: '{{ sessiontit|index:forloop.counter0 }}'{% endif %} {% trans 'that started on'%} {{ start|index:forloop.counter0 }} {% trans 'and finished at'%} {{ end|index:forloop.counter0|date:"g:i a" }}</div>
              <p><i><strong>{% trans 'Title:'%}</strong> {% if titles|index:forloop.counter0 %}{{ titles|index:forloop.counter0 }}{% else %} {% trans 'No title (you can enter the title in the Handle my archived videos menu)'%}{% endif %}</i></p>

              <p><small><a href="{% url 'my_app2:video' redvimurl2|index:forloop.counter0  %}">{% trans 'Go to individual video page'%}</a></small></p>

              
          <div class="resp-container-vid mb-3">

              <iframe class="resp-iframe-vid"
                  src="{{ vid }}" frameborder="0" allow="autoplay; fullscreen"
                  webkitallowfullscreen="true" mozallowfullscreen="true">
              </iframe>
          </div>
          <!--<div><a href="{{ mp4downloadurl|index:forloop.counter0 }}" target="_blank">See the video on Vimeo</a></div>-->
          {% endfor %}
          {% endcomment %}
      {% endif %}


          {% if status == '2c' or status == '4' or status == '2b' or status == '2' or status == '3' %}
                  <h5 class="mt-2"><strong>{% trans 'You decided to record your meeting.'%} </strong></h5>
                  <p>{% trans "The conference videos will appear here (and on your conference website) once they are recorded and imported. To import them after the meeting, go to the archive menu and click 'Handle my archived videos' and then click 'Import my recordings'."%}</p>
                    {% endif %}

                  </div>
              {% endif %}
              {% if conftopass.activateqandp %}
              <div class="tab-pane fade" id="qandp" role="tabpanel" aria-labelledby="qandp-tab">
              {% if not polls and not questions %}
              <h5 class="mt-2 mb-4">{% trans 'Questions and Polls asked during the conference will be visible here once the conference is over.'%}</h5>
              {% endif %}
              {% if polls %}
                  <h4 class="mb-4 mt-2"><strong>{% trans 'Polls created'%}</strong></h4>
                  {% for po in p %}

                      <p style="text-align : left;{% if forloop.counter0 != 0 %}margin-top: 3cm;{% endif %}"><strong>{% trans 'Poll'%} {{ forloop.counter }}:</strong> {{ po.question }} ({% trans 'by'%} {% if po.anonymous %}{% trans 'Anonymous'%}{% else %}{{ po.user.first_name }} {{ po.user.last_name }}{% endif %} - {{ po.created }} - {% trans 'Total votes'%}: {{ qp_votetotal|index:forloop.counter0 }})</p>
                      {% if po.pollimage %}
                          <p><a href="{{ po.pollimage.url }}" data-fancybox="images" data-caption="<strong>{% trans 'Poll image for:'%}</strong> {{ po.question }}"><img src="{{ po.pollimage.url }}" loading="lazy" alt="Poll image" style="width:300px!important;" class="mb-3"></a></p>
                      {% endif %}
                      {% for itot in qp_choices|index:forloop.counter0 %}
                          <p {% if forloop.counter0 != 0 %}class="mt-5"{% endif %} style="text-align : left;"><strong>{{ forloop.counter }})</strong> {{ itot }} ({{ qp_votetot|index:forloop.parentloop.counter0|index:forloop.counter0 }} {% trans 'vote'%}{{ qp_votetot|index:forloop.parentloop.counter0|index:forloop.counter0|pluralize:",s" }}) <span style="color:#FF9933"><strong> {{ qp_voteper|index:forloop.parentloop.counter0|index:forloop.counter0 }}%</strong></span></p>
                          <div class="mb-3" style="background:{% if qp_max|index:forloop.parentloop.counter0|index:forloop.counter0 == '1' %}#33cccc;{% else %}#d9d9d9;{% endif %} border: 1px solid #AD8346; height: 12px; width: {{ qp_voteper|index:forloop.parentloop.counter0|index:forloop.counter0 }}%; display:inline-block;float:left;"></div>
                      {% endfor %}
                              <hr style="border-top: 2px dotted black;margin-top: 3cm;">
                  {% endfor %}
              {% else %}
                  <p><strong>{% trans 'No polls have been created yet'%}</strong></p>
              {% endif %}

              {% if questions %}
                  <h4 class="mb-4 {% if not polls %}mt-2{% endif %}" {% if polls %}style="margin-top: 3cm;"{% endif %}><strong>{% trans 'Questions asked'%}</strong></h4>
                  {% for qu in q %}
                      <p {% if forloop.last %}class="mb-4"{% endif %}><strong>{{ forloop.counter }})</strong> {{ qu.question }} {% trans '(by'%} {% if qu.anonymous %}{% trans 'Anonymous'%}{% else %}{{ qu.user.first_name }} {{ qu.user.last_name }}{% endif %} - {{ voteq|index:forloop.counter0 }} {% trans 'vote'%}{{ voteq|index:forloop.counter0|pluralize:",s" }} - {{ qu.created }})</p>
                  {% endfor %}
              {% else %}
                  <p><strong>{% trans 'No questions have been asked yet'%}</strong></p>
              {% endif %}

              </div>
              {% endif %}
              </div>

      <!--</div>-->
              <div id="sub"></div>

              <div class="alert alert-custom alert-dismissable conftest" role="alert"><a href="#" class="close" data-dismiss="alert" style="color: white" aria-label="close">×</a>
              <h4>{% trans 'According to the program, the conference will proceed as follows (please check the dates and times carefully before you last submit):'%}</h4>
              {% if startdates %}
              {% for start in startdates %}
                  <p>* {{ start|date:'l d b Y' }} - {% trans 'From'%} {{ start|date:'g:i A' }} {% trans 'to'%} {{ enddates|index:forloop.counter0|date:'g:i A' }} {% if exceed|index:forloop.counter0 > 10 %} <i class="fas fa-exclamation-triangle ml-3"></i> <strong>{% trans 'This day should not exceed 10 hours!'%}</strong> {% endif %}</p>
              {% endfor %}
              {% else %}
                  <p>{% trans 'Please enter at least one participation in your program!'%}</p>
              {% endif %}
              </div>
              {% if res2 == 1 or res2 == 2 %}
                  <div class="alert alert-danger conftest2" role="alert"><p>{{ res }}</p></div>
              {% endif %}

              <div id="test3"></div>
              {% if messages %}
                  {% for message in messages %}
                      {%if "confsubm" in message.tags %}
                          <div class="alert alert-success" role="alert">
                              <p>{{ message }}</p>
                          </div>
                      {% endif %}
                      {%if "confpaid" in message.tags %}
                          <div class="alert alert-warning" role="alert">
                              <p>{{ message }}</p>
                          </div>
                      {% endif %}
                      {%if "sessionpay" in message.tags %}
                          <div class="alert alert-danger" role="alert">
                              <p>{{ message }}</p>
                          </div>
                      {% endif %}
                  {% endfor %}
              {% endif %}
              {% if not conftopass.justtools %}
              <div class="row">
                  <div class="col-6 text-center">
                  <form enctype="multipart/form-data" method="POST" action="/submit-conference/#sub">
                      {% csrf_token %}

                      <div class="mt-4"><button type="submit" {% if timeover or notselected %} onclick="return false;" {% else %} onclick="this.form.submit(); this.disabled=true; this.innerText = 'Loading...';" {% endif %} class="btn btn-warning {% if timeover or notselected %} disabled {% endif %}">{% if conftopass.status == 0 %}{% trans 'Submit'%}{% else %}{% trans 'Update'%}{% endif %} {% trans 'conference'%}</button><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'When you submit, your conference can be seen on our website. You can submit when ready for other people to see your conference and resubmit later when you make changes to your program or other parameters.'%}" class="fas fa-info-circle"></i></div>
                      <!--retirer 000-->
                  </form>
                  </div>
                  <div class="col-6 text-center">

                  <!--<form enctype="multipart/form-data" method="POST" action="/checkout">-->
                      {% if conftopass.daughterconf %}
                          {% if mastconfall.payingatonce %}
                              <div class="mt-4"><a href="javascript:void(0)"  type="submit" class="btn btn-success disabled">{% trans 'Payment is handled by the master conference'%}</a><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'It is the master conference that handles the conference payment.'%}" class="fas fa-info-circle"></i></div>
                          {% else %}
                              <div class="mt-4"><a href={% if status == 2 or notselected %}"javascript:void(0)"{% else %}"/{{LANGUAGE_CODE}}/checkout/{{ confnum }}"{% endif %}  type="submit" class="btn btn-warning {% if status == 2 or notselected %}disabled{% endif %}">{% if status == 2 %}{% trans 'Already paid'%}{% else %}{% trans 'Pay'%}{% endif %}</a><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'Pay before the conference starts or it will be automatically cancelled. After you paid, it is not possible to modify the number of participants or the conference dates anymore (unless you contact us).'%}" class="fas fa-info-circle"></i></div>
                          {% endif %}
                      {% else %}
                      <div class="mt-4"><a href={% if status == 2 or conftopass.feeunique %}"javascript:void(0)"{% else %}"/{{LANGUAGE_CODE}}/checkout/{{ confnum }}"{% endif %}  type="submit" class="btn btn-warning {% if status == 2 or conftopass.feeunique %}disabled{% endif %}">{% if status == 2 %}{% trans 'Already paid'%}{% else %}{% if conftopass.feeunique %}{% trans 'Fees shared across participants'%}{% else %}{% trans 'Pay'%}{% endif %}{% endif %}</a><i data-toggle="tooltip" data-placement="bottom" title="{% if conftopass.feeunique %}{% trans 'You do not have to pay for the conference as such because the fees are shared between all participants.'%}{% else %}{% trans 'Pay before the conference starts or it will be automatically cancelled. After you paid, it is not possible to modify the number of participants or the conference dates anymore (unless you contact us).'%}{% endif %}" class="fas fa-info-circle"></i></div>
                      {% endif %}
                  <!--</form>-->
                  </div>

              </div>
              {% endif %}
              {% if submitted %}
                      <div class="alert alert-success mt-3 col-5" role="alert"><p>{% trans 'The conference was updated. If you modify the program, update it again.'%}</p></div>
              {% endif %}
              <div class="row">
                  <div class="col-12 text-center">
                          <div class="mt-4 mb-3"><button type="submit" data-toggle="modal" data-target="#exampleModal" class="btn btn-danger">{% trans 'Delete Conference'%}</button></div>
                  </div>
              </div>

  <!-- Modal HTML -->
  <div id="exampleModal" class="modal fade">
    <div class="modal-dialog modal-confirm">
      <div class="modal-content">
        <div class="modal-header">
          <div class="icon-box">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h4 class="modal-title">{% trans 'Are you sure?'%}</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        </div>
        <div class="modal-body">
          <p>{% trans 'Do you really want to delete this conference? This process cannot be undone but you can create a new one straight away.'%}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
                  <form enctype="multipart/form-data" method="POST" action="/deleteconf/">
                  {% csrf_token %}
                   <input type="hidden" name="deleteconf" value="{{ confnum }}" />

          <button type="submit" class="btn btn-danger">{% trans 'Delete'%}</button>
                  </form>
        </div>

      </div>
    </div>
  </div>
  </div>

          {% else %}
          
          <p>You should not be here</p>
  
      {% endif %}
  {% endblock %}

{% block scripts %}
<script>
  tippy('#tooltipSessions', {
    content: "If the conference is public, participants will not have to register to your conference to access the virtual room. Though you will have to provide them with a private link. For private conferences, participants will register on your conference website for a talk or poster that you can accept or reject, which will decide if they will be able to join the virtual conference room.",
  });
  tippy('#tooltipFreeTools', {
    content: "This is the simplest option: You do not need to pay for the conference fees yourself as everyone contributes to pay for the price to organize the conference (with this option you have access to everything, e.g., you can create many parallel rooms, and, of course, we offset the carbon emissions).",
  });
  tippy('#tooltipFees', {
    content: "You can decide to pay the conferences fees yourself (if you do not tick the previous box) but ask for a participation from your attendees. This amount will then be provided to you when the conference is over via your bank account. As there are fees for gathering the participants money on our side, we take 10% of the participant fees.",
  });
</script>

 <!--fee_amount, fee_currency-->
 <script>
    $("#multi").change(function () {
    //check if its checked. If checked move inside and check for others value
    if (this.checked) {
        //add a text box next to it
        $("#multisession").show()
        $("#id_masterconf").prop('checked', false);
        $("#id_daughterconf").prop('checked', false);
        $("#id_masterconfpass").val('');
    } else {
        //remove if unchecked
        $("#multisession").hide();
        $("#id_masterconf").prop('checked', false);
        $("#id_daughterconf").prop('checked', false);
        $("#id_masterconfpass").val('');
    }
    });

</script>

<script>
    $("#id_daughterconf").change(function () {
    //check if its checked. If checked move inside and check for others value
    if($("#id_masterconf").prop('checked', true)){
        $("#id_masterconf").prop('checked', false);
    }
    if (this.checked) {
        //add a text box next to it
        $("#mastpass").show()
    } else {
        //remove if unchecked
        $("#mastpass").hide();
    }
    });

</script>
<script>
    $("#id_masterconf").change(function () {
    //check if its checked. If checked move inside and check for others value
    if($("#id_daughterconf").prop('checked', true)){
        $("#id_daughterconf").prop('checked', false);
        $("#id_masterconfpass").val('');
    }
    if (this.checked) {
        //add a text box next to it
        $("#mastpass").hide()
    } else {
        //remove if unchecked
        //$("#mastpass").hide();
    }
    });

</script>

    <script>

        $(document).on('dp.hide', '[id="id_start_date"]', function (e) {
        //function endchange() {
        //$("#id_end_date").datepicker().on('changeDate', function (ev) {//changeDate(function () {
            //alert(e.date);
            var startDate = document.getElementById("id_start_date").value;
            var endDate = document.getElementById("id_end_date").value;
            correctFormats = startDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1");
            startDat = new Date(correctFormats);
            correctFormate = endDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1"),
            endDat = new Date(correctFormate);
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();

            today = yyyy + '/' + mm + '/' + dd;
            toda= new Date(today);
            //alert('e '+Date.parse(startDat)+' '+Date.parse(toda));

            if ((Date.parse(startDat) < Date.parse(toda))) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("Start date should be greater than or equal to today's date");
                document.getElementById("id_start_date").value = "";
                //}
            }
            if ((Date.parse(endDat) < Date.parse(startDat))) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("End date should be greater than Start date");
                document.getElementById("id_end_date").value = "";
                //}
            }
            if ((Date.parse(endDat) - Date.parse(startDat))>864000000) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("The conference duration cannot be greater than 10 days or contact the administrator otherwise");
                document.getElementById("id_end_date").value = "";
                //}
            }
        });

        //$("#id_start_date, #id_end_date").datepicker();
        $(document).on('dp.hide', '[id="id_end_date"]', function (e) {
        //function endchange() {
        //$("#id_end_date").datepicker().on('changeDate', function (ev) {//changeDate(function () {
            //alert(e.date);
            var startDate = document.getElementById("id_start_date").value;
            var endDate = document.getElementById("id_end_date").value;
            correctFormats = startDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1");
            startDat = new Date(correctFormats);
            correctFormate = endDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1"),
            endDat = new Date(correctFormate);
            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();

            today = yyyy + '/' + mm + '/' + dd;
            toda= new Date(today);
            //alert('e '+startDate);
            if (startDate == ''){
                alert("Fill in the Start date first");
                document.getElementById("id_end_date").value = "";
            }
            //if (Date.parse(endDat.getMonth() + "/" + endDat.getDate() + "/" + endDat.getYear()) < Date.parse(startDat.getMonth() + "/" + startDat.getDate() + "/" + startDat.getYear())){
            if ((Date.parse(endDat) < Date.parse(startDat))) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("End date should be greater than Start date");
                document.getElementById("id_end_date").value = "";
                //}
            }
            if ((Date.parse(endDat) < Date.parse(toda))) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("End date should be greater than Today");
                document.getElementById("id_end_date").value = "";
                //}
            }
            if ((Date.parse(endDat) - Date.parse(startDat))>864000000) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("The conference duration cannot be greater than 10 days or contact the administrator otherwise");
                document.getElementById("id_end_date").value = "";
                //}
            }
        });
    </script>

    <script>

        $(document).on('dp.hide', '[id="id_closing_date"]', function (e) {
        //function endchange() {
        //$("#id_end_date").datepicker().on('changeDate', function (ev) {//changeDate(function () {
            //alert(e.date);
            var startDate = document.getElementById("id_closing_date").value;
            //var selected_date = new Date({{ selected_date|escapejs }});

            var endDate = new Date("{{ conftopass.end_date.isoformat }}");
            //alert('start'+startDate+' '+endDate);
            correctFormats = startDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1");
            startDat = new Date(correctFormats);
            //correctFormate = endDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1"),
            //endDat = endDate;//new Date(correctFormate);
            var today = new Date();
            var dd = String(today.getDate()-1).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyy = today.getFullYear();

            today = yyyy + '/' + mm + '/' + dd;
            toda= new Date(today);
            //alert('toda'+toda+' '+endDate);
            var dde = String(endDate.getDate()).padStart(2, '0');
            var mme = String(endDate.getMonth() + 1).padStart(2, '0'); //January is 0!
            var yyyye = endDate.getFullYear();


            ende = yyyye + '/' + mme + '/' + dde;
            endDat= new Date(ende);
            //alert('e '+Date.parse(startDat)+' '+Date.parse(toda)+' '+Date.parse(endDat));

            if ((Date.parse(startDat) < Date.parse(toda))) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("The closing date should be at most one day before today's date");
                document.getElementById("id_closing_date").value = "";
                //}
            }
            if ((Date.parse(endDat) < Date.parse(startDat))) {
                //if ((Date.parse(endDat) != Date.parse(toda))) {
                alert("The closing date should be before the conference finishes");
                document.getElementById("id_closing_date").value = "";
                //}
            }

        });
        </script>

    {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template-vid">

        {{#each archiveurl}}

        {{#ifCond ../mast '==' "0"}}
        
            <div class="mt-3">{% endverbatim %}{% trans 'Here is a video for the session'%} {% trans 'that started on'%} {% verbatim %}{{lookup ../start @index}}{% endverbatim %} {% trans 'and finished at'%} {% verbatim %}{{lookup ../end @index}}{% endverbatim %} {% verbatim %}</div>

        {{/ifCond}}

        {{#ifCond ../mast '==' "1"}}
            <div class="mt-3">{% endverbatim %}{% trans 'Here is a video for the session'%} {% verbatim %}{{lookup ../sessiontit @index}}{% endverbatim %} {% trans 'that started on'%} {% verbatim %}{{lookup ../start @index}}{% endverbatim %} {% trans 'and finished at'%} {% verbatim %}{{lookup ../end @index}}{% endverbatim %} {% verbatim %}</div>
        {{/ifCond}}

        {{#with (lookup ../titles @index) as |tit|}}
        <p><i><strong>{% endverbatim %}{% trans 'Title: '%}{% verbatim %}</strong>{{#ifCond tit '!=' ""}}{{tit}}{{/ifCond}}{{#ifCond tit '==' ""}}{% endverbatim %}{% trans 'No title (you can enter the title in the Handle my archived videos menu)'%}{% verbatim %}{{/ifCond}}</i></p>
        {{/with}} 
        <p><small><a href='../video/{{lookup ../redvimurl2 @index}}'>{% endverbatim %}{% trans 'Go to individual video page'%}{% verbatim %}</a></small></p>

        <div class="resp-container-vid mb-3">

            <iframe class="resp-iframe-vid"
                src="{{this}}" frameborder="0" allow="autoplay; fullscreen"
                webkitallowfullscreen="true" mozallowfullscreen="true">
            </iframe>
        </div>
        {{/each}}
        
    </script>
    {% endverbatim %}


    {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template">
        <div class="divpeop" id="{{ loopnum }}">
       <div class="row mb-4 align-items-center">
           <div class="col-md-auto">
                <input type="checkbox" id="selectperson{{ loopnum }}" name="selectperson" class="selectperson" value="{{ email }}" {{#ifCond liststatus '==' "3"}}disabled{{/ifCond}}>
            </div>
            <div class="col-md-auto">
                <input class="form-control lll" type="text" size="10" placeholder="{{ firstname }}" readonly>
            </div>
            <div class="col-md-auto">
                <input class="form-control lll" type="text" size="10" placeholder="{{ lastname }}" readonly>
            </div>
            <div class="col-md-auto">
                <input class="form-control ll" type="text" size="20" placeholder="{{ email }}" readonly>
            </div>
            <div class="col-md-auto">
                <form enctype="multipart/form-data" class="del" id="{{loopnum}}" method="POST" action="/deletepeople/">
                {% endverbatim %}
                {% csrf_token %}
                {% verbatim %}

                <input type="hidden" name="peoplefn" value="{{ firstname }}" />
                <input type="hidden" name="peopleln" value="{{ lastname }}" />
                <input type="hidden" name="peopleemail" class="pemail" value="{{ email }}" />
                <input type="hidden" name="confnum" class="pconfnum" value="{{ confnum }}" />
                <input type="hidden" name="idarg" class="pidarg" class="pidarg" value="{{ loopnum }}" />


                <div class="bob"><button type="submit" class="btn btn-danger a-btn-slide-text bt-del" data-toggle="tooltip" data-placement="top" title="This participant will be removed from your list" id="del{{loopnum}}" value="delete">
                 <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    <!--<span><strong>Delete</strong></span>--></button></div>
                </form>
            </div>
           <div class="col-2" style="text-align:center">
                <!--<a class="btn btn-primary a-btn-slide-text btn-warning" data-toggle="modall" class="open-modal" data-url="{% url 'my_app:valperson' peopleemails|index:forloop.counter0 confnum %}">
                    <span class="fas fa-user" aria-hidden="true">Not Registered yet</span></a>-->
                <button type="submit" class="btn a-btn-slide-text btn-info" data-toggle="modall" class="open-modal" data-url="/valperson/{{ email }}/{{ confnum }}/" {{#ifCond liststatus '==' "3"}} disabled {{/ifCond}}>
                <span class="fas fa-user" aria-hidden="true">{{#ifCond liststatus '==' "3"}}Not Registered{{/ifCond}}{{#ifCond liststatus '==' "1"}}Accepted ({{ listnumber }}) {{#ifCond listnumber2 '!=' "0"}} <span style="color: #721c24;">Waiting</span> ({{ listnumber2 }}) {{/ifCond}}{{/ifCond}}{{#ifCond liststatus '==' "0"}}<span style="color: #721c24;">Waiting</span> ({{ listnumber2 }}){{/ifCond}} {{#ifCond listt '!=' 0}} T {{/ifCond}} {{#ifCond listp '!=' 0}} P {{/ifCond}} {{#ifCond listi '!=' 0}} I {{/ifCond}} {{#ifCond listr '!=' 0}} R {{/ifCond}} {{#ifCond listd '!=' 0}} D {{/ifCond}}</span></button>

                <!--<button type="submit" class="btn btn-primary a-btn-slide-text btn-warning" data-toggle="modal" data-target="#seeModal" value="seeinfo">-->

            </div>
           <div class="col-md-auto">
               <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" class="open-modal" data-url="/email/{{ confnum }}/{{ email }}/" rel="tooltip" data-placement="top" title="Send an email to this person" value="email">
               <span class="fa fa-envelope" aria-hidden="true"></span></button>
           </div>
            {{#ifCond liststatus '==' "1"}}
             {{#checkIf listt '!==' "0" '|||' listp '!==' "0"}}
                <div class="col-md-auto">
                    <form enctype="multipart/form-data" method="POST" action="/addtoschedule/">
                    {% endverbatim %}
                    {% csrf_token %}
                    {% verbatim %}

                    <input type="hidden" name="peoplefn" class="pfnplus" value="{{ firstname }}" />
                    <input type="hidden" name="peopleln" class="plnplus" value="{{ lastname }}" />
                    <input type="hidden" name="peopleemail" class="pemailplus" value="{{ email }}" />
                    <input type="hidden" name="confnum" class="pconfnumplus" value="{{ confnum }}" />

                    <button type="submit" class="btn btn-info a-btn-slide-text bt-plus" id="plus{{loopnum}}" data-toggle="tooltip" data-placement="top" title="Add accepted participation(s) to schedule" value="plus">
                        <span class="fa fa-plus" aria-hidden="true"></span></button>
                    </form>
                </div>
            {{/checkIf}}
           {{/ifCond}}

            {{#ifCond listrole '==' "3"}}
            <div class="col-md-auto">
                <h4><i data-toggle="tooltip" data-placement="top" title="This is a SuperUser: They have all controls on the conference settings" class="fas fa-user-secret" style="color:#FF9933;"></i></h4>
            </div>
            {{/ifCond}}
            {{#ifCond listrole '==' "1"}}
            <div class="col-md-auto">
                <h4><i data-toggle="tooltip" data-placement="top" title="This is a Moderator: They have all controls during the actual webinar" class="fas fa-users" style="color:#003366;"></i></h4>
            </div>
            {{/ifCond}}
            {{#ifCond listsoc '==' "1"}}
            <div class="col-md-auto">
                <h4><i data-toggle="tooltip" data-placement="top" title="This is a Member of the program committee: They are part of the organizing committee, which creates the conference program" class="fas fa-rocket" style="color:#a41515;"></i></h4>
            </div>
            {{/ifCond}}
            {{#ifCond listsoc '==' "2"}}
            <div class="col-md-auto">
                <h4><i data-toggle="tooltip" data-placement="top" title="This is an Organizer: They are the creators of the conference" class="fas fa-eye" style="color:#f5dd5d;"></i></h4>
            </div>
            {{/ifCond}}
       </div>
      </div>
    </script>
    {% endverbatim %}


    <script>
    Handlebars.registerHelper('ifCond', function (v1, operator, v2, options) {

    switch (operator) {
        case '==':
            return (v1 == v2) ? options.fn(this) : options.inverse(this);
        case '===':
            return (v1 === v2) ? options.fn(this) : options.inverse(this);
        case '!=':
            return (v1 != v2) ? options.fn(this) : options.inverse(this);
        case '!==':
            return (v1 !== v2) ? options.fn(this) : options.inverse(this);
        case '<':
            return (v1 < v2) ? options.fn(this) : options.inverse(this);
        case '<=':
            return (v1 <= v2) ? options.fn(this) : options.inverse(this);
        case '>':
            return (v1 > v2) ? options.fn(this) : options.inverse(this);
        case '>=':
            return (v1 >= v2) ? options.fn(this) : options.inverse(this);
        case '&&':
            return (v1 && v2) ? options.fn(this) : options.inverse(this);
        case '||':
            return (v1 || v2) ? options.fn(this) : options.inverse(this);

        default:
            return options.inverse(this);
    }
    });

    Handlebars.registerHelper('checkIf', function (v1,o1,v2,mainOperator,v3,o2,v4,options) {
      var operators = {
          '!==': function(a, b){ return a!=b},
           '&&&': function(a, b){ return a&&b},
           '|||': function(a, b){ return a||b},
        }
      var a1 = operators[o1](v1,v2);
      var a2 = operators[o2](v3,v4);
      var isTrue = operators[mainOperator](a1, a2);
      return isTrue ? options.fn(this) : options.inverse(this);
  });

    </script>

    <script>
        function hasNonStandard(inputElem) {
            //alert(inputElem);
            //return /[^\w]/.test(inputElem.value);
            return /(#\w*)/.test(inputElem.charAt(0));

        }
    </script>
    <script>
        $("#id_twitterhashtag").keyup(function() {
            var regExp = $("#id_twitterhashtag").val();
            //alert(regExp+hasNonStandard(regExp));
            if (hasNonStandard(regExp) == false) {
                alert('It should start with a # so let us add one.');
                $("#id_twitterhashtag").val('#'+regExp);
            }
        }
    )
    </script>
    <script>
        /*
    $(document).on('input', '[id="id_title"]', function (event) {
        event.preventDefault();
        //alert($(this).closest("form").attr('id'));
        //alert('onfoc');
        checktitleb($(this));
        //var cn={{ confnum }}
        {% if confnum %}
            checktitlec($(this));
        {% endif %}
        return false;
    });*/
    </script>

    <script>
    function checktitleb(thisObj) {
        console.log("title is working!");// sanity check
        //console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
        $.ajax({
            url : "/checktitle/",//"{% url 'my_app:addpeople' %}", // the endpoint
            type : "POST", // http method
            data : {    title : $('#id_title').val(),
                        //loopnum : $('.divpeop').last().attr('id'),
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                $('#results').text('');
                $("div[id='testalr']").text('');
                $('#regconf').prop('disabled', false);
                //$('#id_firstname').val(''); // remove the value from the input
                //$('#id_lastname').val('');
                //$('#id_email').val('');
                //console.log(json); // log the returned json to the console
                //var source = $("#result-template").html();
                //alert(json.title)
                //$(document.body).append(html);

                if (json.already == 1) {
                    //alert('yes');
                    $("#testalr").append("<p>The title: '" + json.title + "' is already used by one of your conferences, please change.</p>");
                    $('#regconf').prop('disabled', true);

                }
                //alert('success');
                console.log("success"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

    <script>
    function checktitlec(thisObj) {
        console.log("titlec is working!");// sanity check
        //console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
        $.ajax({
            url : "/checktitlebis/",//"{% url 'my_app:addpeople' %}", // the endpoint
            type : "POST", // http method
            data : {    title : $('#id_title').val(),
                        //loopnum : $('.divpeop').last().attr('id'),
                        {% if confnum %}
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        {% endif %}
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                $('#results').text('');
                $("div[id='testalr2']").text('');
                $('#regconf2').prop('disabled', false);
                //$('#id_firstname').val(''); // remove the value from the input
                //$('#id_lastname').val('');
                //$('#id_email').val('');
                //alert('j');
                //console.log(json); // log the returned json to the console
                //var source = $("#result-template").html();
                //alert(json.title)
                //$(document.body).append(html);

                if (json.already == 1) {
                    //alert('yes');
                    $("#testalr2").append("<p>The title: '" + json.title + "' is already used by one of your conferences, please change.</p>");
                    $('#regconf2').prop('disabled', true);

                }
                //alert('success');
                console.log("success"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

    <script>
    function addpeopleb(thisObj) {
        console.log("create people is working!");// sanity check
        //console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
        $.ajax({
            url : "/addpeople/",//"{% url 'my_app:addpeople' %}", // the endpoint
            type : "POST", // http method
            data : {    firstname : $('#id_firstname').val(),
                        lastname : $('#id_lastname').val(),
                        email : $('#id_email').val(),
                        loopnum : $('.divpeop').last().attr('id'),
                        csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                $('#results').text('');
                $("div[id='test2']").text('');
                $('#id_firstname').val(''); // remove the value from the input
                $('#id_lastname').val('');
                $('#id_email').val('');
                //console.log(json); // log the returned json to the console
                var source = $("#result-template").html();
                //console.log(source);
                var template = Handlebars.compile(source);
                //console.log(template);

                // The 'template' function returns the rendered HTML
                //var diva = template({results: json});
                var context = json;
                //console.log(context);

                //diva.appendTo("body");
                //document.getElementById('test').innerHTML = diva;
                if (json.result2 == 0) {
                    var html = template(context);
                    $("#test").append(html);
                    $("div[id='nbpar']").text('');
                    $("#nbpar").append('<h5><i class="far fa-handshake"></i> '+json.nbpar+' participant'+json.nbparl+' added by you</h5>');

                    $(function () {
                      $('[data-toggle="popover"]').popover()
                    })
                   $(function () {
                      $('[data-toggle="tooltip"]').tooltip()
                    })

                    $('[data-toggle="tooltip"]').on('click', function () {
                        $(this).tooltip('hide')
                    })

                }
                //$(document.body).append(html);

                if (json.result2 == 1) {
                    $("#test2").append("<p>" + json.result + "</p>");
                }

                scheduler.init('scheduler_here', starting_date, "week");
                scheduler.load(("../apischedule/"+json.confnum));//.concat(confnum));
                console.log("success"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

  

    <script>
        $("#id_fee_variable").click(function(){

            if($("#id_fee_variable").prop( "checked" )==true){
                //alert('e');
                $("#id_fee_amount").hide();
                $("#amount").text('');
                $("#regconf").prop("disabled",false);
                $("#regconf2").prop("disabled",false);
            }
            else{
                $("#id_fee_amount").show();
                $("#amount").html('<small style="color:red;">The fee amount cannot be empty</small>');
                $("#regconf").prop("disabled", true);
                $("#regconf2").prop("disabled", true);
            }
    });
    </script>

    <script>
        $(document).ready(function() {
              //alert("document ready occurred!");
              if($("#id_fee_variable").prop( "checked" )==true){
                //alert('e');
                $("#id_fee_amount").hide();

            }
            else{
                $("#id_fee_amount").show();
            }
        });

    </script>

    <script>
        $("#newmeeting").click(function(){
            {% if confnum %}
        createzoommeetingb();
            {% endif %}
    });
    </script>

        <script>
    function createzoommeetingb() {
        console.log("zoom is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/instantzoom/', // the endpoint
            type : "POST", // http method
            data : {
                    {% if confnum %}
                        confnum : {{ confnum }},//$('#confnumid').val(),
                    {% endif %}
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                //alert('f'+json.starturl)
                if (json.starturl==1) {
                    alert('Sorry for that, there are too many connections right now. Try again later or contact us if it persists.');
                }else {
                    window.open(json.starturl, '_blank');
                }
                console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

    <script>
    function deletepeopleb(thisObj) {
        console.log("delete people is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/deletepeople/', // the endpoint
            type : "POST", // http method
            data : {    //firstname : $('#id_firstname').val(),
                        //var item1 = $("#peopleemailid");
                        //alert(thisObj);
                        //var hidden_fields = thisObj.find('input:hidden');
                        //alert(hidden_fields);
                        email : thisObj.closest("form").find('.pemail').val(),//$('#peopleemailid').val(),
                        confnum : thisObj.closest("form").find('.pconfnum').val(),//$('#confnumid').val(),
                        idarg : thisObj.closest("form").attr('id'),//$('#idarg').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                $('#results').text('');
                $("div[id='test2']").text('');

                console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);
                if (json.result2 == 0){

                $("div[id='" + json.idarg + "']").remove();
                //$("#divpeop id."+json.idarg).remove();
                //$("#test").append("<div>what</div>");
                $("div[id='nbpar']").text('');
                $("#nbpar").append('<h5><i class="far fa-handshake"></i> '+json.nbpar+' participant'+json.nbparl+' added by you</h5>');

                /*$(function () {
                      $('[data-toggle="tooltip"]').tooltip('hide')
                    })*/

                scheduler.init('scheduler_here', starting_date, "week");
                scheduler.load(("../apischedule/" + json.confnum));//.concat(confnum));
                console.log("success delete"); // another sanity check
                }else{
                    $("#test2").append("<p>" + json.result + "</p>");
                }
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

    <script>
    function plusb(thisObj) {
        console.log("plus is working!"); // sanity check
        console.log(thisObj.closest("form").find('.pfnplus').val());
        //alert(thisObj.closest("form").find('.test222').val());
        $.ajax({
            url : '/addtoschedule/', // the endpoint
            type : "POST", // http method
            data : {    confnum : thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                        //idarg : thisObj.closest("form").attr('id'),//$('#idarg').val(),
                        email : thisObj.closest("form").find('.pemailplus').val(),//$('#peopleemailid').val(),
                        firstname : thisObj.closest("form").find('.pfnplus').val(),//$('#peopleemailid').val(),
                        lastname : thisObj.closest("form").find('.plnplus').val(),//$('#peopleemailid').val(),
                        other : thisObj.closest("form").find('.potherplus').val(),//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2')
                $('#results').text('');
                $("div[id='test2']").text('');
                $("div[id='test22']").text('');

                console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);
                 if (json.result2 == 0) {
                     if (json.other == 1){
                        //$("#test22").append("<p>" + json.result + "</p>");
                         thisObj.parent().closest("div").parent().nextAll('.test222:first').text('');
                         thisObj.parent().closest("div").parent().nextAll('.test222:first').append('<div class="alert alert-success alert-dismissable" role="alert">'+'<a href="#" class="close" style="color: black" data-dismiss="alert" aria-label="close">×</a>'+
                '<h4>'+ json.result +'</h4>'+
                '</div>');
                         //$("#test22").append('<div class="alert alert-success alert-dismissable" role="alert">'+'<a href="#" class="close" style="color: black" data-dismiss="alert" aria-label="close">×</a>'+
                //'<h4>'+ json.result +'</h4>'+
                //'</div>');
                     }
                     if (json.other == 0){
                         thisObj.parent().closest("div").parent().nextAll('.test2b:first').text('');
                         thisObj.parent().closest("div").parent().nextAll('.test2b:first').append('<div class="alert alert-success alert-dismissable" role="alert">'+'<a href="#" class="close" style="color: black" data-dismiss="alert" aria-label="close">×</a>'+
                         //$("#test2b").append('<div class="alert alert-success alert-dismissable" role="alert">'+'<a href="#" class="close" style="color: black" data-dismiss="alert" aria-label="close">×</a>'+
                '<h4>'+ json.result +'</h4>'+
                '</div>');

                        /*$("#test2").append("<p>" + json.result + "</p>");*/
                     }
                     scheduler.init('scheduler_here', starting_date, "week");
                    scheduler.load(("../apischedule/"+json.confnum));//.concat(confnum));
                    //scheduler.setCurrentView();

                }


                console.log("success plus"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

     <!--<script>
    $(function () {
      $('[data-toggle="popover"]').popover()
    })

    $(function () {
      $('[data-toggle="tooltip"]').tooltip()
    })
</script>-->

<script>
    var modalDiv = $("#modal-div");
    $(function () {
     $(document).on('click', '[data-toggle="modall"]', function () {
  //$('[data-toggle="modall"]').on('click', function() {
      //alert('open');
        $.ajax({
            url: $(this).attr("data-url"),
            success: function (data) {
                //alert('brah')
                modalDiv.html(data);
                $("#myEdit").modal();
            }
        });
  });
})

</script>

<script>
    var modalDiv2 = $("#modal-div2");
    $(function () {
        $('[data-toggle="modall2"]').on('click', function() {
      //alert('open');
        $.ajax({
            url: $(this).attr("data-url"),
            success: function (data) {
                //alert('brah')
                modalDiv2.html(data);
                $("#myEdit2").modal();
            }
        });
  });
})


 $('#myTab a').on('shown.bs.tab', function (e) {
             scheduler.setCurrentView();
        });


</script>

    <script>
        $("#id_fee_amount").keyup(function() {
            var regExp = $("#id_fee_amount").val();
            //alert(regExp+hasNonStandard(regExp));
            if(regExp == ''){

                    $("#amount").html('<small style="color:red;">The fee amount cannot be empty</small>');
                    $("#regconf").prop("disabled", true);
                    $("#regconf2").prop("disabled", true);

            }else{
                $("#amount").text('');
                $("#regconf").prop("disabled",false);
                $("#regconf2").prop("disabled",false);
            }
        }
    )
    </script>

<script>
    var modalDiv3 = $("#modal-div3");
     $(function () {
      $(document).on('click', '[data-toggle="modall3"]', function() {
          //alert('open');
            $.ajax({
                url: $(this).attr("data-url"),
                success: function (data) {
                    //alert('brah')
                    modalDiv3.html(data);
                    $("#myEdit3").modal();
                }
            });
      });
    })
</script>
<script>
    $(document).on('click', '.btn.btn-danger.a-btn-slide-text.bt-del', function (event) {
        //$('.bt-del').live('click', function (event) {
        //$('.bt-del').click(function(event){
        event.preventDefault();
        //alert($(this).closest("form").attr('id'));
        //$('.del').each(function(index, value) {
        //alert($(this));
        //  console.log($(this).attr('id'));
        //});
        //alert('joe');
        deletepeopleb($(this));
        return false;
    });
</script>

<script>
    $(document).on('click', '.btn.btn-info.a-btn-slide-text.bt-plus', function (event) {
        event.preventDefault();
        //alert($(this).closest("form").attr('id'));

        plusb($(this));
        return false;
    });
</script>
<script>
    //var confnum="{{ confnum }}";
    //console.log(confnum);
    scheduler.attachEvent("onEventAdded", function(id,ev){
        //alert("oneventadded");
        //alert(confnum);
        changetimes();

    });
    scheduler.attachEvent("onEventChanged", function(id,ev){
        //alert("oneventchanged");
        changetimes();
    });

    scheduler.attachEvent("onEventDeleted", function(id,ev){
        changetimes();
    });
</script>
<script>
    var confnumb="{{ confnum }}";
    function changetimes() {
        console.log("changetimes is working!"); // sanity check
        console.log(confnumb);
        //console.log(thisObj.closest("form").find('.pfnplus').val());
        //alert(thisObj.closest("form").find('.pfnplus').val());
        $.ajax({
            url : '/changetimes/', // the endpoint
            type : "POST", // http method
            data : {    confnum : confnumb,//thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                $('#results').text('');
                //alert('yo2')
                $("div[id='test3']").text('');
                $(".alert.alert-custom.conftest").remove();
                $(".alert.alert-danger.conftest2").remove();

                console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);
                var text="";
                var x;
                var exc="";
                sen=0;
                for (x in json.sentence) {
                    sen=1;
                    exc = "";
                    if (json.exceed[x] > 10. * 60.) {
                        exc = '<i class="fas fa-exclamation-triangle ml-3"></i> <strong>This day should not exceed 10 hours!</strong>';
                    }
                    if (json.exceed[x] > 5.) {
                        text += '<p>* ' + json.sentence[x] + exc + '<p>'
                    }
                }
                if(sen==0){
                    text='<p>Please enter at least one participation within the dates you have set-up for the conference!</p>'
                }

                $("#test3").append('<div class="alert alert-custom alert-dismissable conftest" role="alert">'+'<a href="#" class="close" style="color: white" data-dismiss="alert" aria-label="close">×</a>'+
                '<h4>According to the program, the conference will proceed as follows (please check the dates and times carefully before you last submit):</h4>'+
                text+
                '</div>');

                if (json.result2 == 1) {
                    $("#test3").append("<div class=\"alert alert-danger\" role=\"alert\"><p>" + json.result +"</p></div>");
                    //alert('ok');
                }
                if (json.result2 == 2) {
                    $("#test3").append("<div class=\"alert alert-danger\" role=\"alert\"><p>" + json.result + "</p></div>");
                    //alert('ok2');
                }
                //if (json.result2 == 0) {
                  //  $("#test3").append("<div class=\"alert alert-success\" role=\"alert\"><p>" + json.result + json.sentence + "</p></div>");
                //}
                     //scheduler.init('scheduler_here', starting_date, "week");
                    //scheduler.load(("apischedule/"+json.confnum));//.concat(confnum));
                    //scheduler.setCurrentView();

                //}


                console.log("changetimes plus"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
</script>

<script>
    $('#modal-div').on('hidden.bs.modal', function () {
    //location.reload();
        var name  = $("#modal-div").data("name");
        if (name=="updated"){
            window.location.href = window.location.href;
        }
        //alert('r'+name);
        //window.location.href = window.location.href;
    });
</script>
<script>
    $('[id="multi"]').on('change', function() {
            var startDate = document.getElementById("id_start_date").value;
            var endDate = document.getElementById("id_end_date").value;
            correctFormats = startDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1");
            startDat = new Date(correctFormats);
            correctFormate = endDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1"),
            endDat = new Date(correctFormate);

            //var start = $('#id_start_date').val();
            //var end = $('#id_end_date').val();

            // end - start returns difference in milliseconds
            var diff = new Date(endDat - startDat);

            // get days
            var days = diff/1000/60/60/24;

            //alert(startDate);
        if ((startDate == '') || (endDate == '')) {
            //alert('brah');

            $('#nope').text('Fill in the start and end dates first').css("color", "red");
            $("#id_fee").prop('checked', false);
            $("#id_feeunique").prop('checked', false);
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);

            //alert('1');

        }
        else if(((($('#id_size').val()=="<10") || ($('#id_size').val()=="10-50")) && (days<1)) && ($("#multi").prop('checked') == false)){
            $('#nope').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants (unless there are multiple sessions, then click the more than one parallel session checkbox and come back here). Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $('#nopeu').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants (unless there are multiple sessions, then click the more than one parallel session checkbox and come back here). Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $("#id_fee").prop('checked', false);
            $("#id_feeunique").prop('checked', false);
            $('#nope2').text('');
            $('#fees').toggle(this.checked);
            //alert('2');
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);

        }else {
            $('#nope').text('');
            $('#nopeu').text('');
            $('#nope2').text('');
            //$('#fees').toggle(this.checked);
            //alert('3');
        }
    });
</script>

        <script>
    $(document).ready(function() {

        if($("#id_justtools").prop('checked') == false) {
            //alert('first');
            $('#nottools').toggle(true);


        }else{
            //alert('else');
            $('#nottools').toggle(false);
        }
        //$('#id_fee_currency').toggle(this.checked);
    });
</script>

    <script>
    $('[id="id_justtools"]').on('change', function() {

        if($("#id_justtools").prop('checked') == false) {
            //alert('first');
            $('#nottool').toggle(true);
            $('#nottools').toggle(true);


        }else{
            //alert('else');
            $('#nottool').toggle(false);
            $('#nottools').toggle(false);
        }
        //$('#id_fee_currency').toggle(this.checked);
    });
</script>

<script>
    $('[id="id_fee"]').on('change', function() {
            var startDate = document.getElementById("id_start_date").value;
            var endDate = document.getElementById("id_end_date").value;
            correctFormats = startDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1");
            startDat = new Date(correctFormats);
            correctFormate = endDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1"),
            endDat = new Date(correctFormate);

            //var start = $('#id_start_date').val();
            //var end = $('#id_end_date').val();

            // end - start returns difference in milliseconds
            var diff = new Date(endDat - startDat);

            // get days
            var days = diff/1000/60/60/24;

        {% if createdconf %}

            var mul={{ conftopass.daughterconf|yesno:"true,false" }};
            if (mul==false){
                mul={{ conftopass.masterconf|yesno:"true,false" }};
            }
        {% endif %}
            //alert(mul);
            //alert(startDate);
        if ((startDate == '') || (endDate == '')) {
            //alert('brah');

            $('#nope').text('Fill in the start and end dates first').css("color", "red");
            $("#id_fee").prop('checked', false);
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);
            //alert('1');

        }
        else if(((($('#id_size').val()=="<10") || ($('#id_size').val()=="10-50")) && (days<1)) && ($("#multi").prop('checked') == false)) {
            $('#nope').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants (unless there are multiple sessions, then click the more than one parallel session checkbox and come back here). Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $("#id_fee").prop('checked', false);
            $('#nope2').text('');
            $('#fees').toggle(this.checked);
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);
            //alert('2');
        }
        {% if createdconf %}
        else if(((($('#id_size').val()=="<10") || ($('#id_size').val()=="10-50")) && (days<1)) && (mul == false)){
            $('#nope').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants. Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $("#id_fee").prop('checked', false);
            $('#nope2').text('');
            $('#fees').toggle(this.checked);
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);
            //alert('2');

        }{% endif %}
        else {
            $('#nope').text('');
            $('#nope2').text('');
            $('#fees').toggle(this.checked);
            //alert('3');
        }

        if ($("#id_fee").prop('checked') == true){
            $("#id_feeunique").prop('checked', false);
            $('#feesu').toggle(false);
        }

        //$('#id_fee_currency').toggle(this.checked);
    });
</script>


<script>
    $('[id="id_fee_to_carbon"]').on('change', function() {
            //alert('ok');
            var startDate = document.getElementById("id_start_date").value;
            var endDate = document.getElementById("id_end_date").value;
            correctFormats = startDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1");
            startDat = new Date(correctFormats);
            correctFormate = endDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1"),
            endDat = new Date(correctFormate);

            //var start = $('#id_start_date').val();
            //var end = $('#id_end_date').val();

            // end - start returns difference in milliseconds
            var diff = new Date(endDat - startDat);

            // get days
            var days = diff/1000/60/60/24;

            {% if createdconf %}
            var mul={{ conftopass.daughterconf|yesno:"true,false" }};
            if (mul==false){
                mul={{ conftopass.masterconf|yesno:"true,false" }};
            }
        {% endif %}

            //alert(startDate);
        if ((startDate == '') || (endDate == '')) {
            //alert('brah');

            $('#nope').text('Fill in the start and end dates first').css("color", "red");
            $("#id_fee").prop('checked', false);
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);

        }
        else if(((($('#id_size').val()=="<10") || ($('#id_size').val()=="10-50")) && (days<1)) && ($("#multi").prop('checked') == false)){
            $('#nope').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants (unless there are multiple sessions, then click the more than one parallel session checkbox and come back here). Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $("#id_fee").prop('checked', false);
            $('#nope2').text('');
            $('#fees').hide();
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);
            //alert('2');

        }
        {% if createdconf %}
        else if(((($('#id_size').val()=="<10") || ($('#id_size').val()=="10-50")) && (days<1)) && (mul == false)){
            $('#nope').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants (unless there are multiple sessions, then click the more than one parallel session checkbox and come back here). Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $("#id_fee").prop('checked', false);
            $('#nope2').text('');
            $('#fees').hide();
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);
            //alert('2');

        }
        {% endif %}
        else {
            $('#nope').text('');
            $('#nope2').text('');
            //alert('3'+days+' '+$('#id_size').val()+' '+$("#multi").prop('checked'));
            /*$('#fees').toggle(this.checked);*/
        }
        //$('#id_fee_currency').toggle(this.checked);
    });
</script>

<script>
    $('[id="id_feeunique"]').on('change', function() {
            var startDate = document.getElementById("id_start_date").value;
            var endDate = document.getElementById("id_end_date").value;
            correctFormats = startDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1");
            startDat = new Date(correctFormats);
            correctFormate = endDate.replace(/(\d+)\/(\d+)\/(\d+)/, "$3/$2/$1"),
            endDat = new Date(correctFormate);

            //var start = $('#id_start_date').val();
            //var end = $('#id_end_date').val();

            // end - start returns difference in milliseconds
            var diff = new Date(endDat - startDat);

            // get days
            var days = diff/1000/60/60/24;

        {% if createdconf %}
            var mul={{ conftopass.daughterconf|yesno:"true,false" }};
            if (mul==false){
                mul={{ conftopass.masterconf|yesno:"true,false" }};
            }
        {% endif %}
            //alert(startDate);
        if ((startDate == '') || (endDate == '')) {
            //alert('brah');

            $('#nopeu').text('Fill in the start and end dates first').css("color", "red");
            $("#id_feeunique").prop('checked', false);
            //alert('1');

        }
        else if(((($('#id_size').val()=="<10") || ($('#id_size').val()=="10-50")) && (days<1)) && ($("#multi").prop('checked') == false)) {
            $('#nopeu').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants (unless there are multiple sessions, then click the more than one parallel session checkbox and come back here). Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $("#id_feeunique").prop('checked', false);
            $('#nope2').text('');
            $('#feesu').toggle(this.checked);
            //alert('2');
        }
        {% if createdconf %}
        else if(((($('#id_size').val()=="<10") || ($('#id_size').val()=="10-50")) && (days<1)) && (mul == false)){
            $('#nopeu').html('The conference is for one day only and with less than 50 participants so it is free and no fees can be asked to the participants. Though, you can add a fee to your participants if the profit goes towards offsetting carbon emissions, if this is the case, click <a href="#" id="altruist">here</a>.').css("color", "red");
            $("#id_feeunique").prop('checked', false);
            $('#nope2').text('');
            $('#feesu').toggle(this.checked);
            //alert('2');

        }{% endif %}
        else {
            $('#nopeu').text('');
            $('#nope2').text('');
            $('#feesu').toggle(this.checked);
            //alert('3');
        }

        if ($("#id_feeunique").prop('checked') == true){
            $("#id_fee").prop('checked', false);
            $('#fees').toggle(false);
            $("#regconf").prop("disabled", false);
            $("#regconf2").prop("disabled", false);
        }

        //$('#id_fee_currency').toggle(this.checked);
    });
</script>

<script>
    function scrollToAnchor(aid){
    var aTag = $("#"+ aid);
    $('html,body').animate({scrollTop: aTag.offset().top},'slow');
    }
</script>


<script>
$(document).on('click', '#altruist', function( event ) {
    $('#nope').html('Thank you for the planet!').css("color", "red");
    $('#fees').toggle(this.checked);
    $("#id_fee_to_carbon").prop('checked', true);
    $("#id_fee").prop('checked', true);
    scrollToAnchor('div_id_fee');
});

</script>

<script>
$(document).on('click', '#id_fee,#altruist', function( event ) {
    var regExp = $("#id_fee_amount").val();
            //alert(regExp+hasNonStandard(regExp));
            if ($('#id_fee').is(':checked')) {
                //alert('ok');
                if (regExp == '') {

                    $("#amount").html('<small style="color:red;">The fee amount cannot be empty</small>');
                    $("#regconf").prop("disabled", true);
                    $("#regconf2").prop("disabled", true);
                } else {
                    $("#amount").text('');
                    $("#regconf").prop("disabled", false);
                    $("#regconf2").prop("disabled", false);
                }
            }else{
                $("#amount").text('');
                    $("#regconf").prop("disabled", false);
                    $("#regconf2").prop("disabled", false);
            }

});

</script>

<!--<script>
    $(document).ready(function(){
        $('[rel="tooltip"]').tooltip({trigger: "hover"});
    });
$('[data-toggle="tooltip"]').on('click', function () {
    $(this).tooltip('hide')
})
</script>-->

<script>
    $(function () {

        if ($('#id_fee').is(':checked')){
            //alert('chec');
            $('#fees').toggle(this.checked);
        }
    });
</script>
    <script>
    $(function () {

        if ($('#id_feeunique').is(':checked')){
            //alert('chec');
            $('#feesu').toggle(this.checked);
        }
    });
</script>
<script>
    $(function () {

        if ($('#multi').is(':checked')){
            //alert('chec');
            $("#multisession").show()
        }
    });
</script>


<script>
    $("body").on('change','.success.addtoconf', function () {
        var self = $(this);
        //alert('t');
        var checkedornot=$('#' + self.attr("id")).is(":checked");
        //if (self.is(":checked")) {
            console.log("checkbox  id =" + self.attr("id") + " is checked ");
            //$("#content").html('yo');
            $.ajax({
            url : '/changeconfdau/', // the endpoint
            type : "POST", // http method
            data : {    confnum : self.attr("id"),//thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                        checkedornot : checkedornot,
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2')
                //$("div[id='content']").text('');
                //$("#content").remove();
                //var sched = ;
                if (json.success == 1) {
                    $('#ok').text('');
                    $('#ok').append('<div class="alert alert-danger mt-3 mr-5 ml-5" role="alert"><p>The daughter conference - ' + json.title + ' - is not part of the conference anymore.</p></div>');
                    //decoche
                }
                else if(json.success == 2 || json.success == 3){
                    if (json.success == 2){self.prop( "checked", true );}
                    else {self.prop( "checked", false );}

                    $('#ok').text('');
                    $('#ok').append('<div class="alert alert-info mt-3 mr-5 ml-5" role="alert"><p>The daughter conference - '+ json.title +' - cannot be changed because it has been paid for already.</p></div>');
                }else {// coche
                    //alert('r');
                    $('#ok').text('');
                    $('#ok').append('<div class="alert alert-success mt-3 mr-5 ml-5" role="alert"><p>The daughter conference - '+ json.title +' - is now accepted.</p></div>');
                }
                console.log("changesdau"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });

        //} else {
          //  console.log("Id = " + self.attr("id") + " is Unchecked ");
        //}
    });
</script>

    <script>
     $("#buttonselectall").click(function () {
         //alert('r');
         var fav = [];//define array

        $.each($(':checkbox.selectperson:checked').not(":disabled"), function(){
            fav.push($(this).val());
        });

        //alert("Selected: " + fav.join(", "));

        if(fav.length == 0){
          alert("Select something before clicking this button");
          return false;
        }

         $.ajax({
            url : '/validateall/', // the endpoint
            type : "POST", // http method
            data : {    {% if confnum %}
                        confnum : {{ confnum }},//thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                        {% endif %}
                        fav:fav,
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2')
                //$("div[id='content']").text('');
                //$("#content").remove();
                //var sched = ;
                if (json.success == 1) {
                    //alert('good');
                    //$('#ok').text('');
                    location.href = '/create-conference';

                    //$('#ok').append('<div class="alert alert-danger mt-3 mr-5 ml-5" role="alert"><p>The daughter conference - ' + json.title + ' - is not part of the conference anymore.</p></div>');
                    //decoche
                }

                console.log("chan"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });

         });
    </script>
    <script>
     $("#selectall").click(function () {
         //alert('ggh');
         $(':checkbox.selectperson').not(":disabled").prop('checked', this.checked);
         var atLeastOneIsChecked = $(':checkbox.selectperson:checked').length > 0;
            if (atLeastOneIsChecked == true){
                $('#buttonselectall').show();
            }
            else{
                $('#buttonselectall').hide();
            }
     });
    </script>

    <script>
     $(":checkbox.selectperson").click(function () {
            var atLeastOneIsChecked = $(':checkbox.selectperson:checked').length > 0;
            if (atLeastOneIsChecked == true){
                $('#buttonselectall').show();
            }
            else{
                $('#buttonselectall').hide();
            }
     });
    </script>

    <script>
     $("#buttonselectall2").click(function () {
         //alert('r');
         var fav = [];//define array

        $.each($(':checkbox.selectperson2:checked').not(":disabled"), function(){
            fav.push($(this).val());
        });

        //alert("Selected: " + fav.join(", "));

        if(fav.length == 0){
          alert("Select something before clicking this button");
          return false;
        }

         $.ajax({
            url : '/validateall/', // the endpoint
            type : "POST", // http method
            data : {    {% if confnum %}
                        confnum : {{ confnum }},//thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                        {% endif %}
                        fav:fav,
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2')
                //$("div[id='content']").text('');
                //$("#content").remove();
                //var sched = ;
                if (json.success == 1) {
                    //alert('good');
                    //$('#ok').text('');
                    location.href = '/create-conference';

                    //$('#ok').append('<div class="alert alert-danger mt-3 mr-5 ml-5" role="alert"><p>The daughter conference - ' + json.title + ' - is not part of the conference anymore.</p></div>');
                    //decoche
                }

                console.log("chan"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });

         });
    </script>
    <script>
     $("#selectall2").click(function () {
         //alert('ggh');
         $(':checkbox.selectperson2').not(":disabled").prop('checked', this.checked);
         var atLeastOneIsChecked = $(':checkbox.selectperson2:checked').length > 0;
            if (atLeastOneIsChecked == true){
                $('#buttonselectall2').show();
            }
            else{
                $('#buttonselectall2').hide();
            }
     });
    </script>

    <script>
     $(":checkbox.selectperson2").click(function () {
            var atLeastOneIsChecked = $(':checkbox.selectperson2:checked').length > 0;
            if (atLeastOneIsChecked == true){
                $('#buttonselectall2').show();
            }
            else{
                $('#buttonselectall2').hide();
            }
     });
    </script>

    <script>
    $('.copy_text').click(function (e) {
   e.preventDefault();
   //alert('joe');
   var copyText = $(this).attr('href');
   console.log(copyText); 

   document.addEventListener('copy', function(e) {
      e.clipboardData.setData('text/plain', copyText);
      e.preventDefault();
   }, true);

   document.execCommand('copy');
   $(".copy_text").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);

   //console.log('copied text : ', copyText);
   //alert('copied text: ' + copyText);
 });
    </script>

    <script>
    $(document).ready(function() {
    $("#buttonselectall").click(function() {
      // disable button
      $(this).prop("disabled", true);
      // add spinner to button
      $(this).html(
        `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...`
      );
    });
});
    </script>
    <script>
    $(document).ready(function() {
    $("#buttonselectall2").click(function() {
      // disable button
      $(this).prop("disabled", true);
      // add spinner to button
      $(this).html(
        `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...`
      );
    });
});
    </script>

    <script>
    $(document).ready(function() {
    $("#saveconfdetails").click(function() {
      // disable button
      $(this).prop("disabled", true);
      // add spinner to button
      $(this).html(
        `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...`
      );
      $("#saveconf")[0].submit()
    });
});
    </script>


    <script>
    $(document).ready(function() {
    $("#regconf2").click(function() {
      // disable button
      $(this).prop("disabled", true);
      // add spinner to button
      $(this).html(
        `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...`
      );
      $("#formup")[0].submit()
    });
});
    </script>

    <script>
    $(document).ready(function() {
    $("#downb,#downc,#downd,#downe").click(function() {
      // disable button
      //$(this).prop("disabled", true);
      // add spinner to button
      //$(this).html(
      //  `<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...`
      //);
      //alert($(this).attr('id'));
      idtosubmit='#'+$(this).attr('id')+'2';
      //alert(idtosubmit);
      $(this).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);

      $(idtosubmit).submit()
    });
});
    </script>

    <script>
    //$("#exampleModalhome").click(function(){

    $('body').on('click', '#gohome,#gopart,#goweb,#goprog,#gocrea', function(){
        //alert('p'+$(this).attr('href'));
        $($(this).data("target")+' .modal-body').load($(this).attr('href'));
    });
    </script>
<script>
   var gotit = 0;

    $('#exampleModalhome,#exampleModalpart,#exampleModalprog,#exampleModalweb,#exampleModalcrea').on('shown.bs.modal', function() {
    //$('#exampleModalhome').on('show.bs.modal', function() {
        //alert($(this).attr('id'));
        var smw='nada';
        if($(this).attr('id')=='exampleModalhome'){
            smw='';
        }
        if($(this).attr('id')=='exampleModalprog'){
            smw='prog';
        }
        if($(this).attr('id')=='exampleModalweb'){
            smw='web';
        }
        if($(this).attr('id')=='exampleModalpart'){
            smw='part';
        }
        if($(this).attr('id')=='exampleModalcrea'){
            smw='crea';
        }
       //alert('ok'+smw);
        if (!gotit) {
            //alert('ok1');
            $.getScript("https://unpkg.com/smartwizard@5/dist/js/jquery.smartWizard.min.js", function () {
                //alert('ok2');
                var $def = $.Deferred();
                if (typeof smartWizard === 'undefined') { // "foo" isn't available
                    //alert('ok');
                    var attempts = 0;
                    // create an interval
                    // that will check each 100ms if the "foo" function
                    // was loaded
                    var interval = setInterval(function () {
                        if (typeof smartWizard !== 'undefined') { // loaded
                            window.clearInterval(interval);
                            $def.resolve();
                        }
                        // after X unsuccessfull attempts, abort the operation
                        else if (attempts >= 100) {
                            window.clearInterval(interval);
                            $def.reject('Something went wrong');
                            //alert('ik');
                        }

                        attempts++;
                    }, 100);
                } else { // "foo" is available
                    $def.resolve();
                    //alert('il');
                }
                return $def.promise();
            }).then(function () {
                // at this point "foo()" is definitely available.
                $('head').append('<link rel="stylesheet" type="text/css" href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css">');
                //$('head').append('<link rel="stylesheet" type="text/css" href="https://res.cloudinary.com/dxfq3iotg/raw/upload/v1581152091/smartwizard/smart_wizard_theme_arrows.min.css">');
                //alert('ok3');

                gotit = 0;/*1*/
                //alert('ah?');
                $('#smartwizard'+smw).smartWizard({
                      selected: 0, // Initial selected step, 0 = first step
                      theme: 'arrows', // theme for the wizard, related css need to include for other than default theme
                      justified: true, // Nav menu justification. true/false
                      darkMode:false, // Enable/disable Dark Mode if the theme supports. true/false
                      autoAdjustHeight: true, // Automatically adjust content height
                      cycleSteps: false, // Allows to cycle the navigation of steps
                      backButtonSupport: true, // Enable the back button support
                      enableURLhash: true, // Enable selection of the step based on url hash
                      transition: {
                          animation: 'fade', // Effect on navigation, none/fade/slide-horizontal/slide-vertical/slide-swing
                          speed: '400', // Transion animation speed
                          easing:'' // Transition animation easing. Not supported without a jQuery easing plugin
                      },
                      toolbarSettings: {
                          toolbarPosition: 'bottom', // none, top, bottom, both
                          toolbarButtonPosition: 'right', // left, right, center
                          showNextButton: true, // show/hide a Next button
                          showPreviousButton: true, // show/hide a Previous button
                          toolbarExtraButtons: [] // Extra buttons to show on toolbar, array of jQuery input/buttons elements
                      },
                      anchorSettings: {
                          anchorClickable: true, // Enable/Disable anchor navigation
                          enableAllAnchors: true, // Activates all anchors clickable all times
                          markDoneStep: true, // Add done state on navigation
                          markAllPreviousStepsAsDone: true, // When a step selected by url hash, all previous steps are marked done
                          removeDoneStepOnNavigateBack: false, // While navigate back done step after active step will be cleared
                          enableAnchorOnDoneStep: true // Enable/Disable the done steps navigation
                      },
                      keyboardSettings: {
                          keyNavigation: true, // Enable/Disable keyboard navigation(left and right keys are used if enabled)
                          keyLeft: [37], // Left key code
                          keyRight: [39] // Right key code
                      },
                      lang: { // Language variables for button
                          next: 'Next',
                          previous: 'Previous'
                      },
                      disabledSteps: [], // Array Steps disabled
                      errorSteps: [], // Highlight step with errors
                      hiddenSteps: [] // Hidden steps

                });
            }).fail(function () {
                // deal with the failure
                console.log('failure with smartwizard');
            });

        }
        //else{
            //alert('alr');
        //}
 });
</script>

    {% if createdconf %}
    <script src="https://cdn.jsdelivr.net/npm/rxjs@6.6.2/bundles/rxjs.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/convergence@latest/convergence.global.min.js"></script>
    <!--<script src="https://cdn.jsdelivr.net/npm/@convergence/convergence/convergence.global.js"></script>-->

    <!--<script src="https://cdn.jsdelivr.net/npm/@convergence/input-element-bindings@latest/browser/convergence-input-element-bindings.min.js"></script>-->
    <script src="https://cdn.jsdelivr.net/npm/@convergence/string-change-detector/browser/string-change-detector.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/input-element-bindings@0.5.0/dist/umd/convergence-input-element-bindings.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/html-text-collab-ext/umd/html-text-collab-ext.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/color-assigner/umd/color-assigner.js"></script>
    <!--<script src="/config.js" language="JavaScript" charset="utf-8"></script>-->
    <script>
        //const CONVERGENCE_URL = "http://localhost:3000/api/realtime/convergence/default";
        //const CONVERGENCE_URL = "http://ec2-18-220-115-125.us-east-2.compute.amazonaws.com:7000/api/realtime/convergence/default";
        const CONVERGENCE_URL = "https://conv.carbonfreeconf.com/api/realtime/convergence/default";

    </script>

    <script src="{% static 'js/convergence.js' %}" idconv="{{ conftopass.id }}crea" usern="{{ user.get_full_name }}" language="JavaScript" charset="utf-8"></script>
    {% endif %}

    <script>
    function loadtimelineb() {
        console.log("timeline is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/apitimeline/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                //alert('f'+json.starturl)
                //window.open(json.starturl, '_blank');
                //$("#sch").text('');
                var container = document.getElementById('visualization');

                      // note that months are zero-based in the JavaScript Date object
                     /* var items = new vis.DataSet([
                        {start: new Date(2010,7,23,22.5,0,0), content: '<div>Conversation</div><img src="{% static 'img/avatar-1.jpg' %}" width="30px"><div><small>Quentin Kral</small></div>'},
                        {start: new Date(2010,7,23,23,0,0), content: '<div>Mail from boss</div><img src="{% static 'img/avatar-2.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,16,0,0), content: 'Report'},
                        {start: new Date(2010,7,24,17,0,0), end: new Date(2010,7,24,18,0,0), content: 'Traject A'},
                        {start: new Date(2010,7,24,18,0,0), content: '<div>Memo</div><img src="{% static 'img/avatar-3.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,19,0,0), content: '<div>Phone call</div><img src="{% static 'img/avatar-1.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,20,0,0), end: new Date(2010,7,24,21,0,0), content: 'Traject B'},
                        {start: new Date(2010,7,24,21,0,0), content: '<div>Report</div><img src="{% static 'img/avatar-2.jpg' %}" width="30px">'}
                      ]);*/

                      //str.replace(/^"|"$/g, '');
                      var items2=new vis.DataSet(JSON.parse(json.timelineinput));
                      //var items2=new vis.DataSet([{start:"2021-07-30 10:00:00",content:'ok'}]);

                      //console.log(JSON.parse(json.timelineinput));

                      var options = {
                        start: json.startd,//new Date(),
                          //start:'auto',
                        /*end: new Date(100000*60*60*24 + (new Date()).valueOf()),*/
                        loadingScreenTemplate: function() {
                          return '<br><br><h4>Loading Timeline...</h4>'
                        },
                        editable: false,//true if want to allow to move position and size
                        margin: {
                          item: 20,
                          axis: 40
                        },
                        //zoomMax: 31536000000, // just one year
                        //zoomMax: 315360000000000, // 10,000 years is maximum possible
                        //zoomMin: 10 // 10ms
                      };

                  var timeline = new vis.Timeline(container, items2, options);

                timeline.fit(items2.getIds());

                $('#day-select').change(function(){
                      var parts = $(this).val().split("-");
                      var dt = new Date(
                        parseInt(parts[0], 10),      // year
                        parseInt(parts[1], 10) - 1,  // month (starts with 0)
                        parseInt(parts[2], 10)       // date
                      );
                      dt.setDate(dt.getDate() + 1);
                      parts[0] = "" + dt.getFullYear();
                      parts[1] = "" + (dt.getMonth() + 1);
                      if (parts[1].length < 2) {
                        parts[1] = "0" + parts[1];
                      }
                      parts[2] = "" + dt.getDate();
                      if (parts[2].length < 2) {
                        parts[2] = "0" + parts[2];
                      }
                      //alert($(this).val()+' '+parts.join("-"));

                    timeline.setWindow($(this).val(), parts.join("-"));
                })
                                  /**
                     * Move the timeline a given percentage to left or right
                     * @param {Number} percentage   For example 0.1 (left) or -0.1 (right)
                     */
                function move(percentage) {
                  var range = timeline.getWindow();
                  var interval = range.end - range.start;
                  timeline.setWindow({
                    start: range.start.valueOf() - interval * percentage,
                    end: range.end.valueOf() - interval * percentage
                  });
                }

                // attach events to the navigation buttons
                document.getElementById("moveLeft").onclick = function() {
                  move(0.2);
                };
                document.getElementById("moveRight").onclick = function() {
                  move(-0.2);
                };

                // Using slider to zoomIn or zoomOut
                document.getElementById("sliderZoom").addEventListener("input", function(e) {
                  var value = this.value;
                  if (value < 0) {
                    var start = moment().year(moment().year() - 100000), // to adjust with options
                      end = moment().year(moment().year() + 1);
                    timeline.zoomOut(-value);
                    //if (value === "-1") timeline.setWindow(start, end);
                  } else if (value > 0) {
                    var start = moment(), end = moment(moment().utc() + 10);
                    timeline.zoomIn(value);
                    /*if (value === "1") {
                        //alert(start + ' ' + end);
                        timeline.setWindow(start, end);
                    }*/
                  } else {
                    timeline.fit(items2.getIds());
                    this.value = 0;
                  }
                });

                // To reset zoom initial state
                document.getElementById("fit").onclick = function() {
                  //$('.range').next().text('0'); // set default if to use output with input range
                  document.getElementById("sliderZoom").value = 0;
                  timeline.fit(items2.getIds());
                };

                //console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

         <script>
    function loadnetworkb() {
        console.log("network is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/apinetwork/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('suc');
                  var DIR = "{% static 'img/' %}";

                  var nodes = null;
                  var edges = null;
                  var network = null;

                  // Called when the Visualization API is loaded.
                  //function draw() {
                    // create people.
                    // value corresponds with the age of the person
                    //var DIR = "../img/indonesia/";
                  //var nodess = new vis.DataSet();

                  var nodes=JSON.parse(json.networkinput);

                  // create connections between people
                  // value corresponds with the amount of contact between two people
                  var edges=JSON.parse(json.networkedge);



                    // create a network
                    var container = document.getElementById("mynetwork");
                    var data = {
                      nodes: nodes,
                      edges: edges,
                    };
                    var options = {
                      autoResize: true,
                      interaction: { selectable: true,hover:true, navigationButtons: true},
                      physics: {
                        barnesHut: {
                          springConstant: 0.004,
                          avoidOverlap: 0.7,
                        },
                      },
                      width: "100%",
                      height: "100%",
                      nodes: {
                        borderWidth: 2,
                        borderWidthSelected: 8,
                        size: 24,
                        color: {
                          border: "white",
                          background: "black",
                          highlight: {
                            border: "black",
                            background: "white",
                          },
                          hover: {
                            border: "orange",
                            background: "grey",
                          },
                        },
                        font: { color: "#eeeeee" },
                        shapeProperties: {
                          useBorderWithImage: true,
                        },
                      },
                      edges: {
                        color: "lightgray",
                      },
                    };
                    //var nodee = data.nodess.get( 0 );
                    //alert('no'+nodee);
                    var network = new vis.Network(container, data, options);


                    //network.on('click', onClick);
                    network.on("click", function (params) {onClick(params,this)});

                    //network.on('doubleClick', onDoubleClick);
                    network.on("doubleClick", function (params) {onDoubleClick(params,this)});

                    var doubleClickTime = 0;
                    var threshold = 200;

                    function onClick(params,t) {
                        var t0 = new Date();
                        if (t0 - doubleClickTime > threshold) {
                            setTimeout(function () {
                                if (t0 - doubleClickTime > threshold) {
                                    doOnClick(params,t);
                                }
                            },threshold);
                        }
                    }

                    function doOnClick(params,t) {
                        //console.log("execute onClick function");
                        if (params.nodes.length === 1) {
                            //alert('p'+this.body.nodes[params.nodes[0]].options.url);
                            //alert('ps'+nodes2.get( 1 ));
                            //var node = nodess.get(params.nodes[0]);
                            //var node = nodes.get(0);
                            var nodeurl = t.body.nodes[params.nodes[0]].options.url;
                            //var node = nodes.get(params.nodes[0]);
                            //alert('n'+nodeurl);
                            if (typeof nodeurl !== 'undefined'){
                                window.open(nodeurl, '_blank');
                            }
                        }
                    }

                    function onDoubleClick(params,t) {
                        doubleClickTime = new Date();
                        //console.log("execute onDoubleClick function");
                        if (params.nodes.length === 1) {
                            //alert('p'+this.body.nodes[params.nodes[0]].options.url);
                            //alert('ps'+nodes2.get( 1 ));
                            //var node = nodess.get(params.nodes[0]);
                            //var node = nodes.get(0);
                            var nodeurl = t.body.nodes[params.nodes[0]].options.url2;
                            //var node = nodes.get(params.nodes[0]);
                            //alert('n'+nodeurl);
                            if (typeof nodeurl !== 'undefined') {
                                window.open(nodeurl, '_blank');
                            }
                        }
                    }

                    network.on("hoverNode", function (params) {
                            network.canvas.body.container.style.cursor = 'pointer'
                     });

                    network.on("blurNode", function (params) {
                            network.canvas.body.container.style.cursor = 'default'
                     });

                    network.on("stabilizationProgress", function (params) {
                    var maxWidth = 496;
                    var minWidth = 20;
                    var widthFactor = params.iterations / params.total;
                    var width = Math.max(minWidth, maxWidth * widthFactor);

                    document.getElementById("bar").style.width = width + "px";
                    document.getElementById("text").innerText =
                      Math.round(widthFactor * 100) + "%";
                  });
                  network.once("stabilizationIterationsDone", function () {
                    document.getElementById("text").innerText = "100%";
                    document.getElementById("bar").style.width = "496px";
                    document.getElementById("loadingBar").style.opacity = 0;
                    // really clean the dom element
                    setTimeout(function () {
                      document.getElementById("loadingBar").style.display = "none";
                    }, 500);
                  });



                    var height = Math.round(window.innerHeight * 0.80) + 'px';     // The DOM way

                    // Now, resize the container (and not the canvas)
                    document.getElementById('mynetwork').style.height = height;

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>


    <script>
        var timelineloadb=0;
        //console.log('1'+timelineload)
            $('#timeline-tab').on('shown.bs.tab', function (e) {
                if (timelineloadb == 0) {

                    //alert('th');
                    loadtimelineb();
                    //loadnetworkb();
                    timelineloadb = 1;
                    //console.log('2' + timelineload)
                }
            });

    </script>
    <script>
        var graphloadb=0;
        //console.log('1'+timelineload)
            $('#graph-tab').on('shown.bs.tab', function (e) {
                if (graphloadb == 0) {

                    //alert('th');
                    loadnetworkb();
                    graphloadb = 1;
                    //console.log('2' + timelineload)
                }
            });

    </script>
    <script>
            $("#id_fee_currency_unique").change(function () {
                //changecurrencyb(thisObj);
                //alert('ch');

                changecurrencycreab($(this));

                //var firstDropVal = $('#pick').val();
            });
            </script>
<script>
    function changecurrencycreab(thisObj) {
        console.log("change currency crea is working!");// sanity check
        //console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
        //alert($('#id_currency option:selected').val());
        $.ajax({
            url : "/changecurrencycrea/",//the endpoint
            type : "POST", // http method
            data : {    currency:$('#id_fee_currency_unique option:selected').val(),//thisObj.val(),//$('#id_currency option:selected').val(),//thisObj.val(),//        var end = this.value;
                        csrfmiddlewaretoken:'{{ csrf_token }}',
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //$("div[id='test2']").text('');
                //$('#id_firstname').val(''); // remove the value from the input
                console.log(json.unit+' '+json.currency); // log the returned json to the console
                if(json.good) {
                    $('#tota').text(json.tota);
                    if (json.currency == 'EUR') {
                        //$('#prepa').text(json.unit);
                        //$('#offa').text(json.unit);
                        //alert('ok');
                        $('#totaa').text(json.unit);
                        //$('#prepb').text('');
                        //$('#offb').text('');
                        $('#totab').text('');
                    } else {
                        //$('#prepb').text(json.unit);
                        //$('#offb').text(json.unit);
                        $('#totab').text(json.unit);
                        //$('#prepa').text('');
                        //$('#offa').text('');
                        $('#totaa').text('');
                    }
                }else{
                    console.log('notgood');
                }
                        //alert(json.currency);

                console.log("success"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>
    <script>
        $(document).on('input', '[id="id_titleurl"]', function (event) {
            event.preventDefault();
            //alert('onfoc');
            checktitleurlb($(this));
            return false;
        });
    </script>
    <script>
        function checktitleurlb(thisObj) {
            //console.log("titleurl is working!");// sanity check
            //console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
            $.ajax({
                url : "/checktitleurl/",//", // the endpoint
                type : "POST", // http method
                data : {    uurl : $('#id_titleurl').val(),
                            confnum: {{ confnum }},
                            //loopnum : $('.divpeop').last().attr('id'),
                            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
                        }, // data sent with the post request
    
                // handle a successful response
                success : function(json) {
                    //$('#results').text('');
                    $("div[id='titleurl']").text('');
                    $('#updateweb').removeAttr('onclick');
                    $("#updateweb").removeClass('disabled');

                    //$('#regconf').prop('disabled', false);
                    //$('#id_firstname').val(''); // remove the value from the input
                    //$('#id_lastname').val('');
                    //$('#id_email').val('');
                    //console.log(json); // log the returned json to the console
                    //var source = $("#result-template").html();
                    //alert(json.title)
                    //$(document.body).append(html);
                    //onclick="return false;"class=disabled
                    $("#titleurl").append("<p style='color: red;'>The url of your website will be: " + json.uurl + ".carbonfreeconf.com</p>");

                    if (json.already == 1) {
                        //alert('yes');
                        $("#titleurl").append("<p style='color: red;'>The url: '" + json.uurl + "' is already used, please select another one.</p>");
                        $("#updateweb").addClass('disabled');
                        $('#updateweb').removeAttr('onclick');
                        $('#updateweb').attr('onClick', 'return false;');
                        //$('#regconf').prop('disabled', true);
    
                    }
                    if (json.alphanum == 1) {
                        //alert('yes');
                        $("#titleurl").append("<p style='color: red;'>Wrong url: Only alphanumeric characters are allowed (letters, digits, hyphens and underscores, no accents, no space).</p>");
                        $("#updateweb").addClass('disabled');
                        $('#updateweb').removeAttr('onclick');
                        $('#updateweb').attr('onClick', 'return false;');
                        //$('#regconf').prop('disabled', true);
    
                    }
                    if (json.toolong == 1) {
                        //alert('yes');
                        $("#titleurl").append("<p style='color: red;'>Your url is too long. It should be less than 30 characters.</p>");
                        $("#updateweb").addClass('disabled');
                        $('#updateweb').removeAttr('onclick');
                        $('#updateweb').attr('onClick', 'return false;');
                        //$('#regconf').prop('disabled', true);
    
                    }
                    //alert('success');
                    //console.log("success"); // another sanity check
                },
    
                // handle a non-successful response
                error : function(xhr,errmsg,err) {
                    $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                        " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                    console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
                }
            });
        };
    </script>
    
<script>
    var videoloadb=0;
    //console.log('1'+timelineload)
        $('#video-tab').on('shown.bs.tab', function (e) {
            if (videoloadb == 0) {

                //alert('th');
                loadvideob();
                //loadnetworkb();
                videoloadb = 1;
                //console.log('2' + timelineload)
            }
        });

</script>



<script>
    function loadvideob() {
        console.log("video is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/apivideo/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        lang: "{{LANGUAGE_CODE}}",
                        status : {{ status }},//$('#confnumid').val(),
                        redvimurl2:"{{ redvimurl2 }}",
                        sessiontit: "{{ sessiontit }}",
                        start: "{{ start }}",
                        end: "{{ end }}",
                        titles: "{{ titles }}",
                        archiveurl : "{{ archiveurl }}",//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                //$("#menu").load("/schedulepage");     
                var source = $("#result-template-vid").html();
                //console.log(source);
                var template = Handlebars.compile(source);
                //console.log(template);

                // The 'template' function returns the rendered HTML
                //var diva = template({results: json});
                var context = json;
                //console.log(context);

                //diva.appendTo("body");
                //document.getElementById('test').innerHTML = diva;
                if (json.result == 0) {
                    var html = template(context);
                    $("#menu-vid").append(html);
                    //$("#spinner-vid").hide();
                    $('#spinner-vid').css('display','none');

                }     

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

<script>
    function formatState (state) {
        //var $state = $(state.element).data('id') + ' ' + state.text;

        if (!state.id) {
        return state.text;
        }
        //alert(state.element.value);
        var baseUrl = "{% static 'heroimages' %}";
        if(state.element.value=='nohero'){
            var $state = $(
                '<p style="width: 200px;height:60px;">' + state.text + '</p>'
            );
        }else{
            var $state = $(
                '<p style="width: 200px;height:60px;"><img src="' + baseUrl + '/' + state.element.value.toLowerCase() + '.jpg" style="float: right;width:100px;height:60px;" />' + state.text + '</p>'
            );
        }
        return $state;
    };
    
    $(".js-example-templating").select2({
        templateResult: formatState,
        //tags:true,
        //placeholder: "{% trans 'No hero image selected yet' %}"
    });

</script>

<script>
    $("#selecthero").change(function () {
        //alert($(this).find(':selected').data('id'));
        document.getElementById("heroid").value = $(this).find(':selected').data('id');

    });
</script>

<script>
    $('#myTab a[href="#chatroom"]').on('show.bs.tab', function (e) {
                 //scheduler.setCurrentView();

        //alert('ok'+$('#inlineFrameExample2').length);
        if ($('#inlineFrameExample2').length == 0) {
            $('#mainchat').append('<div class="resp-container2">\n' +
                '                    <iframe class="resp-iframe2" id="inlineFrameExample2" frameBorder="0"\n' +
                '                        title="CarbonFreeChat"\n' +
                '                        src="https://chat.carbonfreeconf.com/home?resumeToken={{ resumetoken }}"\n' +
                '                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera;">\n' +
                '                    </iframe>\n' +
                '                </div>')

        }
        });
</script>

{% endblock %}

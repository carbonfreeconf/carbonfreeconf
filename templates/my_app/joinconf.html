{% extends 'base.html' %}
{% load static %}
{% load thumbnail %}
{% load index %}
{% load crispy_forms_tags %}
{% load i18n %}

{% block title %} {% trans 'Join a virtual meeting' %} {% endblock title %}

{% block extra_head_tags %}
  <meta name="description" content="{% trans 'Make your own Carbon-Free virtual workshop in a few seconds' %}" />
{% endblock extra_head_tags %}

{% block extrahead %}
<script src="https://export.dhtmlx.com/scheduler/api.js" defer></script>
<script src="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler.js"></script>
<link rel="stylesheet" href="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler.css" type="text/css" media="print" onload="this.media='all'">
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.6/handlebars.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" media="print" onload="this.media='all'">
<!--<script src="{% static "vendor/@fancyapps/fancybox/jquery.fancybox.min.js" %}"></script>-->
<script src="https://cdn.jsdelivr.net/gh/Wruczek/Bootstrap-Cookie-Alert@gh-pages/cookiealert.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wruczek/Bootstrap-Cookie-Alert@gh-pages/cookiealert.css" media="print" onload="this.media='all'">
<!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" media="print" onload="this.media='all'">-->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" media="print" onload="this.media='all'">
<script src="{% static "js/summernote-math.js" %}"></script>

{% endblock %}

{% block header_class %}{% endblock %}

{% block content %}

  <script>
  $(document).ready(function(){
      $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
          localStorage.setItem('activeTab', $(e.target).attr('href'));
      });
      var activeTab = localStorage.getItem('activeTab');
      if(activeTab){
          $('#myTab a[href="' + activeTab + '"]').tab('show');
      }
  });
  </script>

<style>

.switch {
	position: relative;
	display: block;
	vertical-align: top;
	width: 100px;
	height: 30px;
	padding: 3px;
	margin: 0 10px 10px 0;
	background: linear-gradient(to bottom, #eeeeee, #FFFFFF 25px);
	background-image: -webkit-linear-gradient(top, #eeeeee, #FFFFFF 25px);
	border-radius: 18px;
	box-shadow: inset 0 -1px white, inset 0 1px 1px rgba(0, 0, 0, 0.05);
	cursor: pointer;
	box-sizing:content-box;
}
.switch-input {
	position: absolute;
	top: 0;
	left: 0;
	opacity: 0;
	box-sizing:content-box;
}
.switch-label {
	position: relative;
	display: block;
	height: inherit;
	font-size: 10px;
	text-transform: uppercase;
	background: #eceeef;
	border-radius: inherit;
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.12), inset 0 0 2px rgba(0, 0, 0, 0.15);
	box-sizing:content-box;
}
.switch-label:before, .switch-label:after {
	position: absolute;
	top: 50%;
	margin-top: -.5em;
	line-height: 1;
	-webkit-transition: inherit;
	-moz-transition: inherit;
	-o-transition: inherit;
	transition: inherit;
	box-sizing:content-box;
}
.switch-label:before {
	content: attr(data-off);
	right: 11px;
	color: #aaaaaa;
	text-shadow: 0 1px rgba(255, 255, 255, 0.5);
}
.switch-label:after {
	content: attr(data-on);
	left: 11px;
	color: #FFFFFF;
	text-shadow: 0 1px rgba(0, 0, 0, 0.2);
	opacity: 0;
}
.switch-input:checked ~ .switch-label {
	background: #E1B42B;
	box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.15), inset 0 0 3px rgba(0, 0, 0, 0.2);
}
.switch-input:checked ~ .switch-label:before {
	opacity: 0;
}
.switch-input:checked ~ .switch-label:after {
	opacity: 1;
}
.switch-handle {
	position: absolute;
	top: 4px;
	left: 4px;
	width: 28px;
	height: 28px;
	background: linear-gradient(to bottom, #FFFFFF 40%, #f0f0f0);
	background-image: -webkit-linear-gradient(top, #FFFFFF 40%, #f0f0f0);
	border-radius: 100%;
	box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.2);
}
.switch-handle:before {
	content: "";
	position: absolute;
	top: 50%;
	left: 50%;
	margin: -6px 0 0 -6px;
	width: 12px;
	height: 12px;
	background: linear-gradient(to bottom, #eeeeee, #FFFFFF);
	background-image: -webkit-linear-gradient(top, #eeeeee, #FFFFFF);
	border-radius: 6px;
	box-shadow: inset 0 1px rgba(0, 0, 0, 0.02);
}
.switch-input:checked ~ .switch-handle {
	left: 74px;
	box-shadow: -1px 1px 5px rgba(0, 0, 0, 0.2);
}

/* Transition
========================== */
.switch-label, .switch-handle {
	transition: All 0.3s ease;
	-webkit-transition: All 0.3s ease;
	-moz-transition: All 0.3s ease;
	-o-transition: All 0.3s ease;
}

.sidenav {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 1;
  top: 0;
  right: 0;
  background-color: #9AD4D6;
  overflow-x: hidden;
  transition: 0.5s;
  padding-top: 60px;
  border-radius: 70px;
}

.sidenav a {
  /*padding: 8px 8px 8px 32px;*/
  text-decoration: none;
  /*font-size: 25px;*/
  color: #818181;
  display: block;
  transition: 0.3s;
}

.sidenav a:hover {
  color: #f1f1f1;
}

.sidenav .closebtn {
  position: absolute;
  top: 0;
  right: 25px;
  font-size: 36px;
  margin-left: 50px;
    color:#000000;
}

#main {
  transition: margin-right .5s;
  padding: 16px;
}

#main2 {
  padding: 16px;
}

@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}

    .fa-twitter {
        background: #00aced;/*#55ACEE;*/
        color: white;
        background-position: 0 0;
    }


  .fa-twitter:hover {
    background-position: 0 -21px;
      color: orange;
  }
  .tweet-button {
    /*float: right;*/
    padding: 5px 20px;
    background-color: #00aced;
    color: white;
    font-weight: bold;
    border-radius: 5px;
}

.tweet-button:hover {
    background-color: #00acd0;
    color: white;
    text-decoration: none;
}
    #leaveWarning {
  background-color: #f00;
  display: none;
  text-align: center;
  top: 0;
  padding: 38px;
  position: fixed;
  width: 100%;
  z-index: 42;
}
.at {
  color: red;
}

.hashtag {
  color: orange;
}

.vertical-right-aligned {
    transform: rotate(-90deg);
    /*transform-origin: 100% 100%;*/
    position: fixed;
    left: 0;
    top: 30%;
    z-index: 100;
}

#feedback {
	float: left;
	position: fixed;
	top: calc(50% - 47px);
	left: 0;
  z-index: 100;
  display: none !important;
}

#feedback a {
	background: #9AD4D6;
	border-radius: 5px 0 0 5px;
	box-shadow: 0 0 3px rgba(0, 0, 0, .3);
	border: 3px solid #fff;
	border-left: 0;
	display: block;
	padding: 20px 12px;
	transition: all .2s ease-in-out;
}

#feedback a:hover {
	padding-left: 20px;
}



.card-body img {
    width: 150px!important;
    height: auto;
}

.image3 img {
    width: 300px !important;
    height: auto;
}



.image3 {
  opacity: 1;
  display: block;
  width: 100%;
  height: auto;
  transition: .5s ease;
  backface-visibility: hidden;

}

.image4 img {
    width: 20px !important;
}

.dot {
  height: 15px;
  width: 15px;
  background-color: #209966;
  border-radius: 50%;
  display: inline-block;
}

/* Define what each icon button should look like */
.buttonn {
  color: red;
  display: inline-block; /* Inline elements with width and height. TL;DR they make the icon buttons stack from left-to-right instead of top-to-bottom */
  position: relative; /* All 'absolute'ly positioned elements are relative to this one */
  padding: 2px 5px; /* Add some padding so it looks nice */
}

/* Make the badge float in the top right corner of the button */
.button__badge {
  background-color: #fa3e3e;
  border-radius: 2px;
  color: white;

  padding: 1px 3px;
  font-size: 12px;

  position: absolute; /* Position the badge within the relatively positioned button */
  top: 4px;
  right: 0;
}

.resp-iframe2{
    /*document.getElementById("inlineFrameExample").style.height = "90%";*/
    /*height: 80%!important;*/
    min-height: 90vh
}

.resp-container2{
    /*document.getElementById("inlineFrameExample").style.height = "90%";*/
    /*overflow: hidden;*/
}

#main {
/*max-height: 700px;*/
    /*overflow: hidden;*/
}

.container {
    /*document.getElementById("inlineFrameExample").style.width = "100%";*/

    /*padding-left: 20px;
    padding-right: 20px;*/
    margin-left: 20px;
    margin-right: 20px;
    max-width: none;
    width:100%;
        /*$(".resp-container2.joe").css('overflow', 'hidden');
        $(".container").css('width', '100%');
        $(".container").css('padding-left', '0');
        $(".container").css('margin-left', '0');
        $(".container").css('padding-right', '0');
        $(".container").css('margin-right', '0');*/
}

#main {
    margin-left: 20px;
    margin-right: 40px;
}

div.vis-tooltip {
    color:black!important;
    border: 3px solid #444444!important;
    background-color: #EEEEEE!important;
    max-width:400px;
    /* word-break: normal|break-all|keep-all|break-word|initial|inherit; */
    white-space: normal!important;
}
</style>


    <div id="modal-div"></div>
    <div id="modal-divqaa"></div>
    <div id="modal-div3"></div>


    {% if request.GET.cb == '1' and conftopass.coffeebreakgames or roleq == 1 %}

<style>
textarea {
  width: 100%;
  box-sizing: border-box;
  height: 300px;
  line-height: 1.2;
  resize: none;
  margin-top: 5px;
  padding: 4px;
}

textarea:focus {
  outline: none;
}

span.username-label {
  font-weight: bold;
}

</style>
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@convergence/html-text-collab-ext@0.2.0/css/html-text-collab-ext.min.css" />

    {% endif %}

<script>
 $(document).ready(function () {
     var gotit = 0;

    $('#exampleModal').on('shown.bs.modal', function() {
        //alert('ok');
        if (!gotit) {

            $.getScript("https://unpkg.com/smartwizard@5/dist/js/jquery.smartWizard.min.js", function () {
                var $def = $.Deferred();
                if (typeof smartWizard === 'undefined') { // "foo" isn't available
                    var attempts = 0;
                    // create an interval
                    // that will check each 100ms if the "foo" function
                    // was loaded
                    var interval = setInterval(function () {
                        if (typeof smartWizard !== 'undefined') { // loaded
                            window.clearInterval(interval);
                            $def.resolve();
                        }
                        // after X unsuccessfull attempts, abort the operation
                        else if (attempts >= 100) {
                            window.clearInterval(interval);
                            $def.reject('Something went wrong');
                        }

                        attempts++;
                    }, 100);
                } else { // "foo" is available
                    $def.resolve();
                }
                return $def.promise();
            }).then(function () {
                // at this point "foo()" is definitely available.
                $('head').append('<link rel="stylesheet" type="text/css" href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css">');
                //$('head').append('<link rel="stylesheet" type="text/css" href="https://res.cloudinary.com/dxfq3iotg/raw/upload/v1581152091/smartwizard/smart_wizard_theme_arrows.min.css">');

                gotit = 1;
                //alert('ah?');
                $('#smartwizard').smartWizard({
                      selected: 0, // Initial selected step, 0 = first step
                      theme: 'arrows', // theme for the wizard, related css need to include for other than default theme
                      justified: true, // Nav menu justification. true/false
                      darkMode:false, // Enable/disable Dark Mode if the theme supports. true/false
                      autoAdjustHeight: true, // Automatically adjust content height
                      cycleSteps: false, // Allows to cycle the navigation of steps
                      backButtonSupport: true, // Enable the back button support
                      enableURLhash: true, // Enable selection of the step based on url hash
                      transition: {
                          animation: 'fade', // Effect on navigation, none/fade/slide-horizontal/slide-vertical/slide-swing
                          speed: '400', // Transion animation speed
                          easing:'' // Transition animation easing. Not supported without a jQuery easing plugin
                      },
                      toolbarSettings: {
                          toolbarPosition: 'bottom', // none, top, bottom, both
                          toolbarButtonPosition: 'right', // left, right, center
                          showNextButton: true, // show/hide a Next button
                          showPreviousButton: true, // show/hide a Previous button
                          toolbarExtraButtons: [] // Extra buttons to show on toolbar, array of jQuery input/buttons elements
                      },
                      anchorSettings: {
                          anchorClickable: true, // Enable/Disable anchor navigation
                          enableAllAnchors: true, // Activates all anchors clickable all times
                          markDoneStep: true, // Add done state on navigation
                          markAllPreviousStepsAsDone: true, // When a step selected by url hash, all previous steps are marked done
                          removeDoneStepOnNavigateBack: false, // While navigate back done step after active step will be cleared
                          enableAnchorOnDoneStep: true // Enable/Disable the done steps navigation
                      },
                      keyboardSettings: {
                          keyNavigation: true, // Enable/Disable keyboard navigation(left and right keys are used if enabled)
                          keyLeft: [37], // Left key code
                          keyRight: [39] // Right key code
                      },
                      lang: { // Language variables for button
                          next: 'Next',
                          previous: 'Previous'
                      },
                      disabledSteps: [], // Array Steps disabled
                      errorSteps: [], // Highlight step with errors
                      hiddenSteps: [] // Hidden steps

                });
            }).fail(function () {
                // deal with the failure
                console.log('failure with smartwizard');
            });

        }
        //else{
            //alert('alr');
        //}
    }) ;
 });
</script>

 <div class="container">
     <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
         <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
             <div class="modal-content">
                 <div class="modal-header">
                     <h5 class="modal-title" id="exampleModalLabel"><strong>{% trans 'Check how to navigate during the meeting' %}</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                 </div>
                 <div class="modal-body">
                     <div id="smartwizard">
                         <ul class="nav">
                             <li><a class="nav-link" href="#step-0">Step 0<br /><small>Important</small></a></li>
                             <li><a class="nav-link" href="#step-1">Step 1<br /><small>Browser or Zoom client</small></a></li>
                             <li><a class="nav-link" href="#step-2">Step 2<br /><small>Q&A and polls</small></a></li>
                             <li><a class="nav-link" href="#step-3">Step 3<br /><small>Chat</small></a></li>
                             <li><a class="nav-link" href="#step-4">Step 4<br /><small>Other rooms</small></a></li>
                             <li><a class="nav-link" href="#step-5">Step 5<br /><small>Explore</small></a></li>
                         </ul>
                         <div class="tab-content">
                             <div id="step-0" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Important</h3>
                                 {% if not request.session.joinconftuto %}
                                     <h5><strong>This guide will appear automatically only once!</strong></h5>
                                 {% endif %}
                                 <h5>It is recommended that you read all information here at least once to get a hand of all the functionalities available to you once in the virtual meeting!</h5>
                                 <p>Note that you can always come back here by clicking on this button <span><a href="#" class="btn btn-secondary py-0" style="font-size: 0.8em;"> Check how to navigate </a></span> at the bottom right of the web page once the guide is closed.</p>

                             </div>
                             <div id="step-1" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Browser or Zoom client</h3>
                                     <h5>You can access the virtual room in two ways</h5>
                                 <p><i>In the browser:</i> It is the mode by default that you will see when you close this guide. Then you can set-up your camera and microphone and just click on join when you are ready to access the room with other participants. For now it is best to access it with Chrome to get access to the gallery view.</p>
                                 <p><strong>Important 1:</strong> The browser should automatically ask you whether you want to grant access to <i>CarbonFreeConf</i> to share your camera/microphone (and screen when you share): you should accept them all for it to work (if it doesn't ask automatically then you should go in the browser preferences and grant access yourself).
                                <p><strong>Important 2:</strong> Note that the in-browser zoom version may not be optimal for your configuration though it works perfectly for most people. In case of any problem with the sound quality, screen sharing, microphone or video, please use the zoom client instead (see below).

                                    <p><i>In the zoom client:</i> You can also access the meeting with the traditional zoom client version. To do so (after closing this box), click on the blue button at the bottom left of the web page that looks like that <span><a href="#" class="btn btn-primary py-0" style="font-size: 0.8em;">Technical issue? Open in {% if conftopass.roomtype == "Big Marker" %}a new window{% else %}zoom client instead{% endif %}</a></span>. Make sure that the zoom client is already opened in the background on your computer as otherwise it will ask you to download it rather than get you to the zoom room.</p>
                                 <p><strong>Important:</strong> If you lose your moderator rights when transiting to the zoom client, you should either give them back to you through the browser version or ask the new host to make you host or co-host again.

                             </div>
                             <div id="step-2" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Q&A and polls</h3>
                                 <h5>There are two tools that can be accessed by clicking on the button
                                 <span style="font-size:20px;cursor:pointer;color: red;">
                                    <div class="buttonn">
                                        <i class="fas fa-comments"></i>
                                    </div>
                                     See Questions & Polls</span> at the top left of the web page.</h5>
                                 <p><i>Q&A:</i> This is the tool to ask questions to the speaker. Enter your question in the box (tick the anonymous checkbox if you do not want your name to appear), and click <span><a class="btn btn-info py-0" style="font-size: 0.8em;">Send my question</a></span></p>
                                 <p><strong>Important:</strong> All questions can be upvoted by other participants and questions with most votes appear at the top of the screen and they may be read first by the chair(wo)man.</p>

                                 <p><i>Polls:</i> You can also write a poll by clicking the yellow button <a href="#" class="btn btn-warning a-btn-slide-text py-0" style="font-size: 0.8em;">
                                            <span class="fas fa-balance-scale"> Write a poll?</span></a></p>
                                 <p><strong>Important 1:</strong> Polls are not immediately visible to all after creation. The moderator has to click 'activate' to show it to all and then 'show results' to display the number of votes and percentages obtained for each choice. The moderators can also 'highlight' the poll that participants should answer to (it will become red) and 'remove' the poll when it is over.</p>
                                 <p><strong>Important 2:</strong> Polls can be used by organizers to see how the room feels like about a certain matter. It is widely used by speakers to make their talk more interactive and engage their audience. </p>
                                 <p><strong>Important 3:</strong> Images can be added to the poll if needed. Participants can only pick one choice when they answer. </p>

                             </div>
                             <div id="step-3" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Access chat</h3>
                                 <h5>You can access private chat rooms associated to your conference to chat further about the talks or discussions you have just heard.
                                     You can see a series of tabs above the text: <span><strong><i class="fas fa-hand-spock"></i> This is {% if conftopass.daughterconf or conftopass.masterconf %}a room of{% else %}the room for{% endif %} the conference entitled: {% if conftopass.daughterconf %} {{ mastconftitle }} {% else %} {{ conftopass.title }} {% endif %} {% if conftopass.masterconf %} - It is the plenary session {% endif %}{% if conftopass.daughterconf %}{% if conftopass.daughterconfstarwars %} --- for the session: {{ conftopass.masterconfdaughtername }}{% else %} --- S{{ conftopass.masterconfdaughterposition }}: {{ conftopass.title }}{% endif %} {% endif %}</strong></span>; the first one called 'Access Conference' to go in the virtual room. Another of these tabs is called 'Chat Room'.</h5>
                                 <p>Once in the right tab, you can see all the chat rooms you have access to on the left hand side. Click on the room of interest and start chatting.</p>
                                 <p><strong>Important 0:</strong> There are two public rooms accessible to everyone. You can use the help-desk public room if you need help or the-bar if you want to share some more informal information.</p>
                                 <p><strong>Important 1:</strong> The private rooms are only visible to participants of your conference.</p>
                                 <p><strong>Important 2:</strong> You can chat but also share files or video call each other if needed.</p>
                                 <p><strong>Important 3:</strong> If you have access to many chat rooms, use the search bar to look for the room you want to access to.</p>
                                 <p><strong>Important 4:</strong> Once you visualized a poster, it becomes accessible directly from the chat on the left hand side or by writing the name of the person's poster in the search bar.</p>
                                 <p><strong>Important 5:</strong> You can also communicate privately with other participants (search for their names in the search bar) and video call each other or as a group (i.e. you have access to breakout rooms if needed).</p>
                                 <p><strong>Important 6:</strong> Use @username to mention someone, who will then receive a notification about your message (e.g. if you need their help to answer a question).</p>
                                 <p><strong>Important 7:</strong> If there is a room that you often access, put it in your favorite (click on the right on the room's name on the three vertical dots and select favorite) to find it easily when you come back.</p>
                                 <p><strong>Important 8:</strong>  You can click on the <span><a href="#" class="btn btn-primary py-0" style="font-size: 0.8em;">Open chat in a new tab</a></span>
                                    button to open it in a separate tab in your browser. Note that you can also download the rocket chat desktop client and open it independently of your browser.</p>

                             </div>
                             <div id="step-4" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Access other rooms</h3>
                                 <h5>If you are in a conference with several parallel sessions, you can easily go from one to the other.
                                 To do so, click on the 'Travel to another session' list at the top of the screen below the main menu.</h5>
                                 <p>Select the session you want to travel to in the list and you will be pushed there instantly. Easy right?</p>

                             </div>
                            <div id="step-5" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Explore the different tabs</h3>
                                <h5>You should now explore the myriad of possibilities offered by the different tabs:</h5>
                                <ul>
                                <li><strong>Access conference:</strong> Go there to access the virtual room and check out what is being said by the current speaker.</li>
                                <li><strong>Details:</strong> Find out about some details about the conference you joined.</li>
                                <li><strong>My participations:</strong> See what talk or poster you contribute to the conference.</li>
                                <li><strong>Program:</strong> See what comes next in the full program.</li>
                                <li><strong>Abstracts:</strong> Check out the abstracts of speakers in advance.</li>
                                <li><strong>Posters:</strong> Read the posters and upvote the ones you like.</li>
                                <li><strong>Organizers:</strong> Look who organizes the meeting and contact them if needed.</li>
                                <li><strong>Tweet:</strong> Check the latest tweets with the meeting's hashtag.</li>
                                <li><strong>Past Q&P:</strong> Access the already answered questions and polls.</li>
                                <li><strong>Chat room:</strong> Access the conference chat and discuss with participants.</li>
                                </ul>

                                <h5>There is also a <span style="font-size:20px;cursor:pointer;color: red;">
                                <div class="buttonn">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                See What's Next?</span> button (at the top right corner) to visualize the immediate upcoming talks at a glance (for the session you are in and other parallel sessions).
                                It can be opened together with the almost fullscreen video of the virtual room (not to miss anything vital).</h5>

                                <h5>Last but not least, moderators can send <strong>sound notifications</strong> (e.g. 2 minutes left) to notify the <i>speaker that they run out of time soon</i> by selecting how much time is left in a list (it's at the bottom of the page).
                                    If you agree to receive these notifications, you should toggle the switch underneath "Activate sound notifications to hear time left warnings from moderators to speakers" that looks like that:</h5>
                                <div class="d-flex justify-content-center mt-4">
                                <span style="text-align: center"><label class="switch">
                                            <input class="switch-input" id="unmuteButto" type="checkbox"/>
                                            <span class="switch-label" data-on="On" data-off="Off"></span>
                                            <span class="switch-handle"></span>
                                    </label></span>
                                </div>
                             </div>
                         </div>
                     </div>
                 </div>
                   <div class="modal-footer">
                     <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                   </div>
             </div>
         </div>
     </div>
 </div>




        {% if status == '1' or status == '0' or status == '15' or status == '18' %}
    <div id="mySidenav" class="sidenav">

  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <div class="row justify-content-center" id="newp" align="center"></div>


              <div id="iniq" align="center">


              </div>


                  <div class="row justify-content-center" id="newq"></div>

                {% if  questionactive %}
                    {% if roleq == 1 %}
                      <div class="mt-4" style="text-align: right;" id="rq"><button type="submit" class="btn btn-danger mb-3" id="removequest">{% trans 'Remove all questions' %}</button></div>
                    {% endif %}
                  {% endif %}

                <div style="text-align: center;">
                    <p class="mt-4"><strong>{% trans 'Ask a question to the speaker here' %}</strong></p>
                    <form enctype="multipart/form-data" method="POST" action="">
                        {% csrf_token %}

                            {{ questionform.question |as_crispy_field }}
                            {{ questionform.anonymous |as_crispy_field }}

                    <input type="hidden" name="confnum" value="{{ confnum }}" />
                    <input type="hidden" name="question" value="qaa" />
                    <div class="mt-4"><button type="submit" class="btn btn-info mb-3" id="sendquestion">{% trans 'Send my question' %}</button></div>

                </form>


                    <button type="submit" class="btn btn-warning a-btn-slide-text mt-3 mb-3" data-toggle="modalqaa" class="open-modal" data-url="{% url 'my_app:poll' confnum %}" >
                                            <span class="fas fa-balance-scale"> {% trans 'Write a poll?'%}</span></button>
</div>
</div>

<div id="mySidenavsch" class="sidenav">

  <a href="javascript:void(0)" class="closebtn" onclick="closeNavsch()">&times;</a>
    <div class="ml-2 mr-2 mb-3" id="pream"></div>
  <div class="row justify-content-center ml-2 mr-2" id="sch" align="center"></div>



</div>
    {% endif %}

    {% if conffailed %}
        <p class="ml-2 mt-3"><strong><i class="fas fa-bomb"></i> {% trans 'Oopsie, you may want to wait a little bit as there is a heavy usage of conference rooms at the moment.'%}</strong> {% trans 'Please contact the administrator if it happens for too long.'%}</p>
    {% endif %}

    {% if status == '1' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oops, you are a bit early (the conference' %} "{{ title }}" {% trans 'starts on'%} {{ start_date }}) {% trans 'but you can access the test room to test it before the big day.'%}</h3>
          </div>
        </div>

    {% elif status == '2' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oh no, you are a bit late as the conference' %} "{{ title }}" {% trans 'ended on' %} {{ start_date }}. {% trans 'You may want to look it up in the' %} <a href="{% url 'my_app2:archive' %}">{% trans 'archive' %}</a>.</h3>
          </div>
        </div>

    {% elif status == '2b' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oh no, you are a bit late as session of the conference' %} "{{ title }}" {% trans 'ended on' %} {{ start_date }}. {% trans 'You may want to look it up in the' %} <a href="{% url 'my_app2:archive' %}">{% trans 'archive' %}</a>. {% trans 'The session starts again on' %} {{ end_date }}.</h3>
          </div>
        </div>

    {% elif status == '4' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'There are no conferences under your name yet, go ahead and' %} <a href="{% url 'my_app2:createconf' %}">{% trans 'create one' %}</a>.</h3>
          </div>
        </div>


    {% elif status == '5' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oopsie, the conference has no ID, something went wrong when you created it.' %}</h3>
          </div>
        </div>


    {% elif status == '6' %}

        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'This conference exists but you have not subscribed to it yet (go do it anytime on the conference website or ask the organizers:' %} {{ conftopass.user.email }}).</h3>
          </div>
        </div>


    {% elif status == '7' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans "Whoops, I'm afraid you don't have the right to access here as you are not registered as a formal participant to this conference." %}</h3>
          </div>
        </div>


    {% elif status == '8' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans "Oops, there is a problem to access this conference I'm afraid. Either it has ended or you have just created it? Then, just give it a minute dear colleague as it may be creating in the background right now." %}</h3>
          </div>
        </div>

    {% elif status == '9' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans "Oh no, the organizers decided that there is a fee to pay to access the conference and you haven't paid yet. Go pay on the conference website and come back when you are ready." %} </h3>
          </div>
        </div>


    {% elif status == '10' %}

        <div class=container>

    <div class="jumbotron mt-4">
        <p class="lead"> {% blocktrans %} Dear colleague, the test room is being created now in the background. You can use it for <strong>1.5 hours</strong> with all other superusers that are organizing the conference. Everyone
            is set as a moderator and can test the different possibilities while you chat about the conference setup. When you finish using the test room, <strong>please exit the webinar</strong> to save
            some extra CO<sub>2</sub> emissions. {% endblocktrans %}</p>
    </div>
        <h3 id="countdown"></h3>
        </div>
        <script>
    var deadline = new Date();
    //deadline.setMinutes( deadline.getMinutes() + 1 );
    deadline.setSeconds( deadline.getSeconds() + 90 );
    var x = setInterval(function() {
    var now = new Date().getTime();
    var t = deadline - now;
    var days = Math.floor(t / (1000 * 60 * 60 * 24));
    var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((t % (1000 * 60)) / 1000);
    //document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    document.getElementById("countdown").innerHTML = "You will be redirected to the test room in "+minutes+"min "+ seconds + "s ";
        if (t < 1000) {
            clearInterval(x);
            window.location = "{% url "my_app:joinconf" confnum %}";
            //document.getElementById("countdown").innerHTML = "You can click!";
            //$("#link").append('<a href="{% url "my_app:joinconf" %}">Click here when one minute has elapsed</a>')
        }
    }, 1000);
</script>

    {% elif status == '11' %}
        <div class=container>

    <div class="jumbotron mt-4">
        <p class="lead"> {% blocktrans %} Sorry for the inconvenience, the test room takes a bit longer than usual to be created. When you finish using the test room, please exit the webinar to save
            some extra CO<sub>2</sub> emissions.{% endblocktrans %}</p>
    </div>
        <h3 id="countdown"></h3>
        </div>
        <script>
    var deadline = new Date();
    deadline.setMinutes( deadline.getMinutes() + 1 );
    var x = setInterval(function() {
    var now = new Date().getTime();
    var t = deadline - now;
    var days = Math.floor(t / (1000 * 60 * 60 * 24));
    var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((t % (1000 * 60)) / 1000);
    //document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    document.getElementById("countdown").innerHTML = "You will be redirected to the test room in "+ seconds + "s ";
        if (t < 3) {
            clearInterval(x);
            window.location = "{% url "my_app:joinconf" confnum %}";
            //document.getElementById("countdown").innerHTML = "You can click!";
            //$("#link").append('<a href="{% url "my_app:joinconf" %}">Click here when one minute has elapsed</a>')
        }
    }, 1000);
</script>
    {% elif status == '12' %}

        <div class=container>
          <div class="alert alert-warning alert-dismissable mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oopsie, you are a bit early as the conference' %} "{{ title }}" {% trans 'starts on' %} {{ start_date }}.</h3>
          </div>
        </div>

    {% elif status == '13' %}

        <div class=container>
    <div class="jumbotron mt-4">
        <p class="lead"> {% trans 'The virtual room for recording your talk'%} <strong>"{{ talktitle }}"</strong> {% trans 'is being created in the background as part of the conference'%} <strong>"{{ title }}"</strong>. {% blocktrans %} You can use it for <strong>1.5 hours</strong> and it is only accessible to you. You are set
            as a moderator and should click on start recording (it should appear after a few seconds) when you are ready to present your work and stop recording when you finish. When you want to leave the virtual room, <strong>please end the webinar</strong>
            (click at the bottom right of the black host control panel) to save
            some extra CO<sub>2</sub> emissions. <strong>Do not refresh this page</strong>. You can copy/paste this text in case you might forget. When the room is ready, the navigator may ask you if you want to leave this page (for security reasons), say "Yes" and you will be catapulted to the recording room.{% endblocktrans %}</p>
    </div>
        <h3 id="countdown"></h3>
        </div>
    <form method="POST" action="{% url "my_app:joinconf" confnum %}" id="recordconf">
    {% csrf_token %}
    <input type="hidden" name="confnum" value="{{ confnum }}" />
    <input type="hidden" name="talkidd" value="{{ talkid }}" />
    <input type="hidden" name="recordtalk" value="brah44" />
    </form>

        <script>
    var deadline = new Date();
    //deadline.setMinutes( deadline.getMinutes() + 1 );
    deadline.setSeconds( deadline.getSeconds() + 90 );
    var x = setInterval(function() {
    var now = new Date().getTime();
    var t = deadline - now;
    var days = Math.floor(t / (1000 * 60 * 60 * 24));
    var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((t % (1000 * 60)) / 1000);
    //document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    document.getElementById("countdown").innerHTML = "You will be redirected to the virtual room in "+minutes+"min "+ seconds + "s ";
        if (t < 1000) {
            clearInterval(x);
            document.getElementById("recordconf").submit();

            //document.getElementById("countdown").innerHTML = "You can click!";
            //$("#link").append('<a href="{% url "my_app:joinconf" %}">Click here when one minute has elapsed</a>')
        }
    }, 1000);
</script>

    {% elif status == '14' %}

        <div class=container>

    <div class="jumbotron mt-4">
        <p class="lead"> {% trans 'That's it, you can now record your talk that will be forwarded to the organizers. Once recorded you need to come back on the
        conference website (in "my participations") to validate your recording and check that it is all correct.'%}</p>
    </div>
            </div>

    {% elif status == '15' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oops, you are a bit early (the conference'%} "{{ title }}" {% trans 'starts on'%} {{ start_date }}) {% trans 'but if you wish you can access the test room to test it before the big day (or come 1 hour before it starts as we open it early).'%}</h3>
          </div>
        </div>

    {% elif status == '16' %}
        <div class=container>
          <div class="alert alert-warning alert-dismissable mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oh no, you have already tested the virtual conference room and it can only be done once. You can ask the organizers to test your presentation one more time during the live conference breaks in between different sessions.'%}</h3>
          </div>
        </div>

        {% elif status == '17' %}

        <div class=container>
    <div class="jumbotron mt-4">
        <p class="lead"> {% trans 'The virtual room for testing the virtual conference room is being created in the background as part of the conference'%} <strong>"{{ title }}"</strong>. {% blocktrans %} You can use it for a maximum of <strong>15 min</strong> and it is only accessible to you. You are set
            as a moderator (and so you see an additional black panel on the right of the room) so that you can stop the webinar when finished. When you want to leave the virtual room, <strong>please end the webinar</strong>
            (click at the bottom right of the black host control panel) to save
            some extra CO<sub>2</sub> emissions. <strong>Do not refresh this page</strong>. You can copy/paste this text in case you might forget. When the room is ready, the navigator may ask you if you want to leave this page (for security reasons), say "Yes" and you will be catapulted to the virtual room.{% endblocktrans %}</p>
    </div>
        <h3 id="countdown"></h3>
        </div>
    <form method="POST" action="{% url "my_app:joinconf" confnum %}" id="testbm">
    {% csrf_token %}
    <input type="hidden" name="confnum" value="{{ confnum }}" />
    <input type="hidden" name="testbm" value="brah442" />
    <input type="hidden" name="testbm2" value="brah443" />

    </form>

        <script>
    var deadline = new Date();
    //deadline.setMinutes( deadline.getMinutes() + 1 );
    deadline.setSeconds( deadline.getSeconds() + 90 );
    var x = setInterval(function() {
    var now = new Date().getTime();
    var t = deadline - now;
    var days = Math.floor(t / (1000 * 60 * 60 * 24));
    var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((t % (1000 * 60)) / 1000);
    //document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    document.getElementById("countdown").innerHTML = "You will be redirected to the virtual room in "+minutes+"min "+ seconds + "s ";
        if (t < 1000) {
            clearInterval(x);
            document.getElementById("testbm").submit();

            //document.getElementById("countdown").innerHTML = "You can click!";
            //$("#link").append('<a href="{% url "my_app:joinconf" %}">Click here when one minute has elapsed</a>')
        }
    }, 1000);
</script>

    {% elif status == '18' %}

        <div class=container>

    <div class="jumbotron mt-4">
        <p class="lead"> {% trans 'Hi! You can now test the virtual conference room as it pleases you.'%}</p>
    </div>
            </div>

        {% elif status == '19' %}

        <div class=container>
    <div class="jumbotron mt-4">
        <p class="lead">{% trans 'Oh no, the room takes longer than usual to be created but patience is a virtue. Please wait and do not refresh this page and the test room will appear soon.'%} </p>
    </div>
        <h3 id="countdown"></h3>
        </div>
    <form method="POST" action="{% url "my_app:joinconf" confnum %}" id="testbm">
    {% csrf_token %}
    <input type="hidden" name="confnum" value="{{ confnum }}" />
    <input type="hidden" name="testbm" value="brah442" />
    <input type="hidden" name="testbm2" value="brah443" />

    </form>

        <script>
    var deadline = new Date();
    //deadline.setMinutes( deadline.getMinutes() + 1 );
    deadline.setSeconds( deadline.getSeconds() + 90 );
    var x = setInterval(function() {
    var now = new Date().getTime();
    var t = deadline - now;
    var days = Math.floor(t / (1000 * 60 * 60 * 24));
    var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((t % (1000 * 60)) / 1000);
    //document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    document.getElementById("countdown").innerHTML = "You will be redirected to the virtual room in "+minutes+"min "+ seconds + "s ";
        if (t < 1000) {
            clearInterval(x);
            document.getElementById("testbm").submit();

            //document.getElementById("countdown").innerHTML = "You can click!";
            //$("#link").append('<a href="{% url "my_app:joinconf" %}">Click here when one minute has elapsed</a>')
        }
    }, 1000);
</script>

        {% elif status == '20' %}

        <div class=container>
    <div class="jumbotron mt-4">
        <p class="lead"> {% trans 'Oh no, the pre-recording room takes longer than usual to be created. Wait and do not refresh the page. Take some time to meditate!'%}</p>
    </div>
        <h3 id="countdown"></h3>
        </div>
    <form method="POST" action="{% url "my_app:joinconf" confnum %}" id="recordconf">
    {% csrf_token %}
    <input type="hidden" name="confnum" value="{{ confnum }}" />
    <input type="hidden" name="talkidd" value="{{ talkid }}" />
    <input type="hidden" name="recordtalk" value="brah44" />
    </form>

        <script>
    var deadline = new Date();
    //deadline.setMinutes( deadline.getMinutes() + 1 );
    deadline.setSeconds( deadline.getSeconds() + 90 );
    var x = setInterval(function() {
    var now = new Date().getTime();
    var t = deadline - now;
    var days = Math.floor(t / (1000 * 60 * 60 * 24));
    var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
    var minutes = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((t % (1000 * 60)) / 1000);
    //document.getElementById("countdown").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
    document.getElementById("countdown").innerHTML = "You will be redirected to the virtual room in "+minutes+"min "+ seconds + "s ";
        if (t < 1000) {
            clearInterval(x);
            document.getElementById("recordconf").submit();

            //document.getElementById("countdown").innerHTML = "You can click!";
            //$("#link").append('<a href="{% url "my_app:joinconf" %}">Click here when one minute has elapsed</a>')
        }
    }, 1000);
</script>

        {% elif status == '21' %}

        <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Hi there! This conference is happening now but you do not have the right link to access it (ask the organizers:'%} {{ conftopass.user.email }}).</h3>
          </div>
        </div>

        {% elif status == '22' %}

            <div class=container>
          <div class="alert alert-warning alert-dismissable mt-2 mr-5">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">x</a>
            <h3>{% trans 'Oops! You must wait at least 1.5 hours before creating a new test room.'%} </h3>
          </div>
        </div>

    {% endif %}
        <div class="container mb-3">
    {% if status == '1' or status == '0' or status == '2' or status == '5' or status == '6' or status == '7' or status == '4' or status == '15' or status == '18' %}
        <div class="row mt-2 mb-3 mr-4">
        {% if conf_list_user_inv|length > 0 %}
        <div class="col-4">
        <label for="confinv-select">{% trans 'Access a conference you participate in?'%}</label>
        <form name=changeconfinvForm action="{% url 'my_app:joinconf' 'a' %}" method=POST>
            {% csrf_token %}
        <select name="confinv" class="browser-default custom-select" id="confinv-select" onChange="changeconfinvForm.submit();">
            <option value="">--{% trans 'Change conference?'%}--</option>
            {% for conf in conf_list_user_inv %}
                <option value="{{ conf.id }}">{% if conf.masterconf or conf.daughterconf %}{% if conf.daughterconfstarwars %}{% if conf.masterconfdaughtername %}{{ conf.masterconfdaughtername }}{% else %}{% trans 'Plenaries'%}{% endif %}{% else %} S{{ conf.masterconfdaughterposition }} {% endif %} - {% endif %}{{ conf.title|ellipses:50 }}</option>
            {% endfor %}
        </select>
        </form>
        </div>


        {% endif %}


        {% if conftopass.daughterconf or conftopass.masterconf %}
        <div class="col-4">
                {% if conf_list_session|length > 1 %}
                <label for="confses-select">{% trans 'Travel to another session?'%}</label>
                <form name=changeconfsesForm action="{% url 'my_app:joinconf' 'a' %}" method=POST>
                    {% csrf_token %}
                <select name="confinv" class="browser-default custom-select" id="confses-select" onChange="changeconfsesForm.submit();">
                    <option value="">--{% trans 'Change session?'%}--</option>
                    {% for conf in conf_list_session %}
                        <option value="{{ conf.id }}">{% if conf.daughterconfstarwars %}{% if conf.masterconfdaughtername %}{{ conf.masterconfdaughtername }}{% else %}{% trans 'Plenaries'%}{% endif %}{% else %} S{{ conf.masterconfdaughterposition }} {% endif %} - {{ conf.title|ellipses:50 }}</option>
                    {% endfor %}
                </select>
                </form>
                {% endif %}
            </div>
        {% endif %}
        {% if conf_list_user|length > 1 %}
        <div class="col-4">

        <label for="conf-select">{% trans 'Access a conference you created?'%}</label>
        <form name=changeconfForm action="{% url 'my_app:joinconf' %}" method=POST>
            {% csrf_token %}
        <select name="conf" class="browser-default custom-select" id="conf-select" onChange="changeconfForm.submit();">
            <option value="">--{% trans 'Choose another conference to join'%}--</option>
            {% for conf in conf_list_user %}
                <option value="{{ conf.id }}">{% if conf.masterconf or conf.daughterconf %}{% if conf.daughterconfstarwars %}{% if conf.masterconfdaughtername %}{{ conf.masterconfdaughtername }}{% else %}{% trans 'Plenaries'%}{% endif %}{% else %} S{{ conf.masterconfdaughterposition }} {% endif %} - {% endif %}{{ conf.title|ellipses:50 }}</option>
            {% endfor %}
        </select>
        </form>
        </div>
        {% endif %}
        </div>
    {% endif %}
    {% if status == '1' or status == '0' or status == '15' or status == '18' %}
        <div id="right"></div>
        <div class="row">
                <div class="col-4">
        {% if conftopass.activateqandp %}
            <span style="font-size:25px;cursor:pointer;color: red;" onclick="openNav()">
            <div class="buttonn">
                <i class="fas fa-comments"></i>
                <span class="button__badge" id="newqp" style="display: none;"></span>
            </div>
            {% trans 'See Questions & Polls'%}</span>


        {% endif %}
                </div>
                <div class="col-4">
            {% if conftopass.coffeebreak %}
                <div class="d-flex justify-content-center">
            {% if request.GET.cb == '1' %}

            <a href="{{ request.path }}" style="font-size:25px;cursor:pointer;color: red;text-decoration: none;">
            <div class="buttonn">
                <i class="fas fa-backward"></i>
            </div>
            {% trans 'Go back to conference'%}</a>
            {% else %}
            <a href={% if status == '18' %}"#"{% else %}"{{ request.path }}?cb=1"{% endif %} style="font-size:25px;cursor:pointer;color: red;text-decoration: none;">
            <div class="buttonn">
                <i class="fas fa-coffee"></i>
            </div>
            {% trans 'Go to coffee break area'%} {% if status == '18' %}<br><small style="margin-left:2em;">{% trans '(disabled in test room mode)'%}</small>{% endif %}</a>
                {% endif %}
                </div>
            {% endif %}
                </div>
            <div class="col-4">

        <span style="font-size:25px;cursor:pointer;color: red;float:right;padding-right: 30px;" onclick="openNavsch()">
            <div class="buttonn">
                <i class="fas fa-newspaper"></i>
            </div>
            {% trans "See What's Next?"%}</span>

        </div>
        </div>

      <div id="main2" class="mr-4">

      <h5><strong><i class="fas fa-hand-spock"></i> {% trans 'This is'%} {% if conftopass.daughterconf or conftopass.masterconf %}{% trans 'a room of'%}{% else %}{% trans 'the room for'%}{% endif %} {% trans 'the conference entitled:'%} {% if conftopass.daughterconf %} {{ mastconftitle }} {% else %} {{ conftopass.title }} {% endif %} {% if conftopass.masterconf %} - {% trans 'It is the plenary session'%} {% endif %}{% if conftopass.daughterconf %}{% if conftopass.daughterconfstarwars %} --- {% trans 'for the session:'%} {{ conftopass.masterconfdaughtername }}{% else %} --- S{{ conftopass.masterconfdaughterposition }}: {{ conftopass.title }}{% endif %} {% endif %}</strong></h5>


        <ul class="nav nav-tabs mt-2" id="myTab" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">{% trans 'Access Conference' %}</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="details-tab" data-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="true">{% trans 'Details' %}</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="mypart-tab" data-toggle="tab" href="#mypart" role="tab" aria-controls="mypart" aria-selected="true">{% trans 'My participation' %}{{ talks|length|pluralize:",s" }}</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="schedule-tab" data-toggle="tab" href="#schedule" role="tab" aria-controls="schedule" aria-selected="false">{% trans 'Program' %}</a>
              </li>
            <li class="nav-item">
                <a class="nav-link" id="timeline-tab" data-toggle="tab" href="#timeline" role="tab" aria-controls="timeline" aria-selected="false">{% trans 'Timeline' %}</a>
              </li>
            <li class="nav-item">
                <a class="nav-link" id="graph-tab" data-toggle="tab" href="#graph" role="tab" aria-controls="graph" aria-selected="false">{% trans 'Map' %}</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" id="participants-tab" data-toggle="tab" href="#participants" role="tab" aria-controls="participants" aria-selected="false">{% trans 'Abstracts' %}</a>
              </li>
            {% if conftopass.poster %}
              <li class="nav-item">
                <a class="nav-link" id="poster-tab" data-toggle="tab" href="#posters" role="tab" aria-controls="posters" aria-selected="false">{% trans 'Posters' %}</a>
              </li>
            {% endif %}
              <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">{% trans 'Organizers' %}</a>
              </li>
        {% ifnotequal conftopass.twitterhashtag '#' %}
              <li class="nav-item">
                <a class="nav-link" id="tweet-tab" data-toggle="tab" href="#tweet" role="tab" aria-controls="tweet" aria-selected="false">{% trans 'Tweet' %}</a>
              </li>
        {% endifnotequal %}
            {% if conftopass.activateqandp %}
                <li class="nav-item">
                <a class="nav-link" id="qaa-tab" data-toggle="tab" href="#qaa" role="tab" aria-controls="qaa" aria-selected="true">{% trans 'Past Q&P' %}</a>
              </li>
            {% endif %}
              <li class="nav-item">
                <a class="nav-link" id="chatroom-tab" data-toggle="tab" href="#chatroom" role="tab" aria-controls="chatroom" aria-selected="false">{% trans 'Chat Room' %}</a>
              </li>
            {% if request.GET.cb == '1' %}
                {% if conftopass.coffeebreakgames %}
                <li class="nav-item">
                    <a class="nav-link" id="interact-tab" data-toggle="tab" href="#interact" role="tab" aria-controls="interact" aria-selected="false" style="color: red;"><strong>{% trans 'Interact' %}</strong></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="game-tab" data-toggle="tab" href="#game" role="tab" aria-controls="game" aria-selected="false" style="color: red;"><strong>{% trans 'Play' %}</strong></a>
                </li>
                {% endif %}
            {% endif %}

        </ul>
      </div>
        <style>
        .tab-content {
          min-height: 600px !important;
        }
        .tab-pane {
          min-height: 600px !important;
        }
        .resp-container{
            width: 100%;
            height: 100%;
            min-height: 600px !important;
        }
        </style>
        <div class="tab-content" id="myTabContent">
              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
              <div id="main">

                    {% if status == '15' %}
                            <div class="jumbotron mt-4">
                                <h5><i class="fas fa-video mr-3"></i>{% trans ' If you are an organizer, you can have access to a test room by clicking'%} <a href="{% url "my_app2:joinconf" %}{{ confnum }}/" target="_blank">{% trans 'here'%}</a> {% if conftopass.coffeebreak %}{% trans 'and for the coffee-break room example click'%} <a href="{% url "my_app2:joinconf" %}{{ confnum }}/?cb=1" target="_blank">{% trans 'here'%}</a>{% endif %}.</h5>
                                <p>{% trans 'You can use this test room to talk to other organizers and familiarize yourself with moderator tools and the multiple possibilities offered by our conference rooms.'%}</p>
                            </div>
                    {% else %}
                <div class="newwindow"></div>
                    {% if conftopass.hybrid and facetofaceuser %}
                            <p><i class="fas fa-exclamation-triangle"></i> {% trans 'You mentioned you were coming in person to the conference so that you may not need to Join the virtual room (though you can if needed and the organizers planned on big enough licenses) but you can access the other tabs to access chat rooms, questions, tweet, see the program, ...'%} </p>
                    {% endif %}

                <div class="resp-container2 joe">
                {% if conftopass.roomtype == "Big Marker" %}
                    <iframe class="resp-iframe2" id="inlineFrameExample" frameBorder="0"
                        title="CarbonFreeConf webinar"
                        src="{{ enter_url }}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated;">
                    </iframe>
                {% else %}
                    {% if not request.session.joinconftuto %}
                        <script>
                            $(window).on('load', function() {
                                $('#exampleModal').modal('show');
                            });
                            </script>
                    {% endif %}
                    {% if status == '18' %}
                        {% if conftopass.hybrid %}<p>{% trans 'Hybrid Conference'%} 18</p>{% endif %}

                        <iframe class="resp-iframe2" id="inlineFrameExample" frameBorder="0"
                        title="{% trans 'CarbonFreeConf webinar test room'%}"
                        src="{% url 'my_app:zoomroom' confnum idconf 1 "exitpageparticipantstest" %}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">
                    </iframe>
                    {% else %}
                    <iframe class="resp-iframe2" id="inlineFrameExample" frameBorder="0"
                        title="{% trans 'CarbonFreeConf webinar'%}"
                        src="{% url 'my_app:zoomroom' confnum idconf inj "exitpageparticipants" %}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">
                    </iframe>
                    {% endif %}
                {% endif %}
                </div>
                    {% endif %}
              </div>
              </div>

              <div class="tab-pane fade show" id="details" role="tabpanel" aria-labelledby="details-tab">
                  <div class="jumbotron mt-4 mr-5">
                  {% if conftopass.room_logo %}
                <p style="text-align: center"><img src="{{ conftopass.room_logo.url }}" alt="Logo" style="width:150px;" class="d-inline-block align-top" alt=""></p>
              {% endif %}
                  <p> <strong>{% if conftopass.daughterconf %} Session {% else %}Conference {% endif %} {% trans 'Title:'%} </strong> {{ conftopass.title }} {% if web %}<a href="{% url 'my_app2:website' conftopass.id 'home' %}" target="_blank">{% trans '(See website)'%}</a>{% endif %}</p>
              <p class="lead mt-3 mb-3">{% trans 'The conference starts on'%} {{ start_date }} {% trans 'and finishes on'%} {{ end_date }}.</p>
               <p> {{ web.rationale | safe}}</p>

                  {% if progorga %}
                <h3>{% trans 'Program committee'%}</h3>
           {% for peop in peoplesocloc %}
               {% if peop.socloc == 1%}
                    <ul class="list-group">
                      <li class="list-group-item"> {{ peop.user.first_name }} {{ peop.user.last_name }} / <a href="mailto:{{ peop.user.email }}">{{ peop.user.email }}</a></li>
                    </ul>
               {% endif %}
          {% endfor %}
                      {% endif %}
                  {% if orga %}
          <h3 class="mt-3">{% trans 'Organizers'%}</h3>
           {% for peop in peoplesocloc %}
               {% if peop.socloc == 2%}
            <ul class="list-group">
              <li class="list-group-item"> {{ peop.user.first_name }} {{ peop.user.last_name }} / <a href="mailto:{{ peop.user.email }}">{{ peop.user.email }}</a></li>
            </ul>
               {% endif %}
          {% endfor %}
                      {% endif %}
          <h3 class="mt-3">{% trans 'Contacts in case of technical problem'%}</h3>
            <ul class="list-group">
                {% blocktrans %}<li class="list-group-item"> An issue in the conference room? Check this <a href="https://support.zoom.us/hc/en-us/sections/200305593-Troubleshooting" target="_blank">page</a> or <a href="https://support.zoom.us/hc/en-us/categories/200101697" target="_blank">that one</a> or try <a href="https://support.zoom.us/hc/en-us" target="_blank">here</a>.</li>
              <li class="list-group-item"> For other issues contact <a href="mailto:support@carbonfreeconf.com">this email address</a> or contact us directly using the widget at the bottom right of the page.</li>{% endblocktrans %}
            </ul>
              </div>
              </div>
              <div class="tab-pane fade show" id="mypart" role="tabpanel" aria-labelledby="mypart-tab">
        {% if talks %}
            <p><strong><i class="fas fa-hand-peace"></i> {% trans 'You have created'%} {{ talks | length }} {% trans 'participation'%}{{ talks|length|pluralize:",s" }}</strong></p>
            {% for talk in talks %}
                <div class="card text-center mb-2 mr-4">
                  <div class="card-header" style="background-color: #E0CBA8;">
                      <font color="#FF6542"><strong>{{ talk.user }}</strong> | {% trans 'Submitted on'%} {{ talk.created }} | <strong>{{ talk.get_type_display }}</strong></font>
                  </div>
                  <div class="card-body">
                      {% if talk.type == 5 %}
                          <h5 class="card-title"><font color="black">{% trans 'Attendance only'%}</font></h5>
                      {% endif %}
                      {% if talk.type < 5 or talk.type == 6%}
                          <h5 class="card-title"><font color="black"><strong>{% trans 'Participation title:'%}</strong> {{ talk.title }}</font></h5>
                        {% if talk.type < 5 or talk.type == 6%}
                            <p class="card-text"><font color="black"><strong>{% trans 'Abstract:'%}</strong> {{ talk.abstract|safe }}</font></p>
                            {% if talk.biography %}
                            <p class="card-text"><font color="black"><strong>{% trans 'Biography:'%}</strong> {{ talk.biography }}</font></p>
                            {% endif %}
                        {% endif %}
                      {% endif %}
                  </div>
                  <div class="card-footer text-muted" style="background-color: #E0CBA8;">
                      <font color="#94599A">{% ifequal talk.status 0 %} {% trans 'Participation submitted (waiting for acceptance)'%} {% endifequal %} {% ifequal talk.status 1 %} <strong>{% trans 'Participation accepted'%}</strong> {% endifequal %} {% trans 'for the conference entitled:'%} {% if conftopass.daughterconf %} {{ mastconftitle }} {% else %} {{ conftopass.title }} {% endif %} {% if conftopass.masterconf %} --- {% trans 'Plenary session'%} {% endif %}{% if conftopass.daughterconf %}{% if conftopass.daughterconfstarwars %} --- {% trans 'for the session:'%} {{ conftopass.masterconfdaughtername }}{% else %} --- S{{ conftopass.masterconfdaughterposition }}: {{ conftopass.title }}{% endif %} {% endif %}</font>
                  </div>
                </div>
            {% endfor %}

        {% else %}
            <p class="mt-2"><strong><i class="fas fa-comment"></i> {% trans 'You have not created any participation for this meeting'%}</strong></p>
        {% endif %}
              </div>
              <div class="tab-pane fade show" id="schedule" role="tabpanel" aria-labelledby="schedule-tab">
                    {% if conftopass.masterconf %}
                        <a href="{% url 'my_app2:wholeprogram' conftopass.id %}" target="_blank" style="color: #ff0000">{% trans 'See the program for other sessions?'%}</a>
                    {% endif %}

                    {% if conftopass.daughterconf %}
                        <a href="{% url 'my_app2:wholeprogram' confma.id %}" target="_blank" style="color: #ff0000">{% trans 'See the program for other sessions?'%}</a>
                    {% endif %}
                <div id="main2">
                    {% include "my_app/schedule.html" with loca="joinconf" confnum=confnum start_date=start_date2 timestart=timestart timefinish=timefinish mineventheight=mineventheight heighthr=heighthr minieventtime=minieventtime opacity=opacity %}
                </div>
              </div>
              <div class="tab-pane fade show" id="timeline" role="tabpanel" aria-labelledby="timeline-tab">
                  <script type="text/javascript" src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>
                  <link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
                <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>

                    <style type="text/css">
                        /*body {
                          font-family:  purisa, 'comic sans', cursive;
                        }*/

                        .vis-timeline {
                          border: 2px solid purple;
                          font-family:  purisa, 'comic sans', cursive;
                          font-size: 12pt;
                          background: #ffecea;
                        }

                        .vis-item {
                          border-color: #F991A3;
                          background-color: pink;
                          font-size: 15pt;
                          color: purple;
                          box-shadow: 5px 5px 20px rgba(128,128,128, 0.5);
                        }

                        .vis-item,
                        .vis-item.vis-line {
                          border-width: 3px;
                        }

                        .vis-item.vis-dot {
                          border-width: 10px;
                          border-radius: 10px;
                        }

                        .vis-item.vis-selected {
                          border-color: green;
                          background-color: lightgreen;
                        }

                        .vis-time-axis .vis-text {
                          color: purple;
                          padding-top: 10px;
                          padding-left: 10px;
                        }

                        .vis-time-axis .vis-text.vis-major {
                          font-weight: bold;
                        }

                        .vis-time-axis .vis-grid.vis-minor {
                          border-width: 2px;
                          border-color: pink;
                        }

                        .vis-time-axis .vis-grid.vis-major {
                          border-width: 2px;
                          border-color: #F991A3;
                        }
                        .menu {
                          /*position: absolute;
                          display: table-cell;
                          vertical-align: middle;
                          top: -55px;
                          right: 0;
                          margin: 10px;*/
                          padding-bottom: 10px;
                          z-index: 9999;
                        }

                </style>

                <div id="main2">
                        <p>{% trans 'Timeline - It shows the next 6 hours from now so if you want to see more, zoom out with your mouse or navigation bar (or zoom in to see more details).'%}</p>
                </div>
                        <div id="visualization" class="mr-4 ml-3 mb-4">
                            <div class="menu">
                              <span style="font-size: 13px;">{% trans 'zoom out'%} </span>
                              <input id="sliderZoom" type="range" class="range" name="a" min="-1" max="1" step="0.1" value="0" title="{% trans 'Better use keyboard to each level zoom!'%}" />
                              <span style="font-size: 13px;"> {% trans 'zoom in'%} </span>
                              <input type="button" id="fit" value=" &#8635; " title="reset" />
                              <input type="button" id="moveLeft" value="Move left" title="Move left" />
                              <input type="button" id="moveRight" value="Move right" title="Move right" />
                              <select name="dayvis" id="day-select">
                                <option value="">--{% trans 'Select a specific day?'%}--</option>
                                  {% for s in starttimeline %}
                                        <option value="{{ s }}">{{ s }}</option>
                                  {% endfor %}
                              </select>
                            </div>
                        </div>
              </div>
        <div class="tab-pane fade show" id="graph" role="tabpanel" aria-labelledby="graph-tab">

                    <script type="text/javascript"
                        src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>


                <div id="main2">
                        <p>{% trans 'Map of the conference (you can join the different rooms by clicking on their respective names'%}{% if not conftopass.masterconf %} {% trans 'or access posters if there are any'%}{% endif %}).</p>
                </div>

                  <style type="text/css">

                      #mynetwork {
                        width: 100%;
                        height: 800px;
                        /*margin-top: 100px;*/
                        border: 1px solid lightgray;
                        /*background-color: #333333;*/
                        background-color: #FFFFFF;
                      }
                      #loadingBar {
                        position: absolute;
                        top: 0px;
                        left: 0px;
                        width: 100%;
                        height: 800px;
                        background-color: rgba(200, 200, 200, 0.8);
                        -webkit-transition: all 0.5s ease;
                        -moz-transition: all 0.5s ease;
                        -ms-transition: all 0.5s ease;
                        -o-transition: all 0.5s ease;
                        transition: all 0.5s ease;
                        opacity: 1;
                      }
                      #wrapper2 {
                        position: relative;
                        width: 97%;
                        padding-left: 20px!important;
                        /*height: 800px;*/
                      }

                      #text {
                        position: absolute;
                        top: 4px;
                        left: 530px;
                        width: 30px;
                        height: 50px;
                        margin: auto auto auto auto;
                        font-size: 22px;
                        color: #000000;
                      }

                      div.outerBorder {
                        position: relative;
                        top: 300px;
                        width: 600px;
                        height: 44px;
                        margin: auto auto auto auto;
                        border: 2px solid rgba(0, 0, 0, 0.1);
                        background: rgb(252, 252, 252); /* Old browsers */
                        background: -moz-linear-gradient(
                          top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%
                        ); /* FF3.6+ */
                        background: -webkit-gradient(
                          linear,
                          left top,
                          left bottom,
                          color-stop(0%, rgba(252, 252, 252, 1)),
                          color-stop(100%, rgba(237, 237, 237, 1))
                        ); /* Chrome,Safari4+ */
                        background: -webkit-linear-gradient(
                          top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%
                        ); /* Chrome10+,Safari5.1+ */
                        background: -o-linear-gradient(
                          top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%
                        ); /* Opera 11.10+ */
                        background: -ms-linear-gradient(
                          top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%
                        ); /* IE10+ */
                        background: linear-gradient(
                          to bottom,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%
                        ); /* W3C */
                        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfcfc', endColorstr='#ededed',GradientType=0 ); /* IE6-9 */
                        border-radius: 72px;
                        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
                      }

                      #border {
                        position: absolute;
                        top: 10px;
                        left: 10px;
                        width: 500px;
                        height: 23px;
                        margin: auto auto auto auto;
                        box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2);
                        border-radius: 10px;
                      }

                      #bar {
                        position: absolute;
                        top: 0px;
                        left: 0px;
                        width: 20px;
                        height: 20px;
                        margin: auto auto auto auto;
                        border-radius: 11px;
                        border: 2px solid rgba(30, 30, 30, 0.05);
                        background: rgb(0, 173, 246); /* Old browsers */
                        box-shadow: 2px 0px 4px rgba(0, 0, 0, 0.4);
                      }
                    </style>

                        <div id="wrapper2" class="mb-5 mr-4">
                              <div id="mynetwork"></div>
                              <div id="loadingBar">
                                <div class="outerBorder">
                                  <div id="text">0%</div>
                                  <div id="border">
                                    <div id="bar"></div>
                                  </div>
                                </div>
                              </div>
                        </div>


              </div>
              <div class="tab-pane fade show" id="participants" role="tabpanel" aria-labelledby="participants-tab">

              <div id="accordion" class="mt-2 mr-4">
                  <div class="card">
                    <div class="card-header" id="headingOne">
                      <h5 class="mb-0">
                        <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            <p><strong>{% trans 'See the registered participants and who is currently present?'%}</strong></p>
                        </button>
                      </h5>
                    </div>

                    <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                      <div class="card-body">
                        <div id="regpart"></div>
                      </div>
                    </div>
                  </div>
              </div>

                      {% comment %}{% for peop in people %}
                        <ul class="list-group">
                        {% if peop.user.userprofileinfo.orcid %}
                            <li class="list-group-item">{{ forloop.counter }}) <a href="https://orcid.org/{{ peop.user.userprofileinfo.orcid }}" target="_blank" style="color: blue;">{{ peop.user.first_name }} {{ peop.user.last_name }}</a> / <a href="mailto:{{ peop.user.email }}">{{ peop.user.email }}</a><span class="joe" id="{{ peop.user.email }}"></span></li>
                        {% else %}
                          <li class="list-group-item">{{ forloop.counter }}) {{ peop.user.first_name }} {{ peop.user.last_name }} / <a href="mailto:{{ peop.user.email }}">{{ peop.user.email }}</a><span class="joe" id="{{ peop.user.email }}"></span></li>
                        {% endif %}
                        </ul>
                      {% endfor %}{% endcomment %}

              <p class="lead mt-3 ml-4">Abstracts</p>
                  <p class="ml-4">{% trans 'There is a total of'%} {{ abstract|length }} abstract{{ abstract|length|pluralize:",s" }}.</p>
           <section class="pt-5 pb-5">
              <div class="container">
                <div class="row d-flex ">
                   {% for abs in abstract %}
                    <div class="col-12 col-md-4 mb-4 mt-2">
                        <div class="card  h-100 {% if abs.type == 1 %}border-danger{% else %}border-light{% endif %} bg-light shadow" {% if abs.type == 1 %} style="border: 5px solid black;"{% endif %}>
                            <div class="card-body d-flex-row">
                                <blockquote class="blockquote mb-4 pb-2">
                                    <p class="mb-0 font-weight-bold">{{ forloop.counter }}) {{ abs.title }}</p>
                                    {% if abs.user.userprofileinfo.orcid %}
                                        <a href="https://orcid.org/{{ abs.user.userprofileinfo.orcid }}" target="_blank"><font color="blue">{{ abs.user.first_name }} {{ abs.user.last_name }}</font></a>
                                    {% else %}
                                    {{ abs.user.first_name }} {{ abs.user.last_name }}
                                    {% endif %}
                                    <div class="meta-item ml-auto">
                                            <p {% if abs.type == 1 %}style="color: red;"{% endif %}><small>{{abs.get_type_display}}</small></p>
                                    </div>
                                </blockquote>
                                <div class='shorttext'><p class="card-text mb-5">{{ abs.abstract|truncatewords_html:75|safe }}</p></div>
                                <div class='fulltext' style="display: none;"><p class="card-text mb-5">{{ abs.abstract|safe }}</p></div>

                                {% if abs.abstract|truncatewords_html:75|safe != abs.abstract|safe %}
                                    <a href="#" class="more" style="color: black;"><i class="fas fa-caret-down"></i> {% trans 'READ MORE'%}</a>
                                {% endif %}

                                <div class="w-100 pb-1"></div>
                                <div class="m-2 mt-2">
                                    <div class="mailabs" style="text-align: center;"><button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum abs.user.username 'join' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            </section>


              </div>
                {% if conftopass.poster %}
                    <div class="tab-pane fade show" id="posters" role="tabpanel" aria-labelledby="schedule-tab">
                        <p class="lead mt-3 ml-4">Posters</p>
                        <p class="ml-4">{% trans 'There is a total of'%} {{ posters|length }} {% trans 'poster'%}{{ posters|length|pluralize:",s" }}.</p>

                       <section class="pt-2 pb-2">
              <div class="container">


              {% if idposters|length > 1 %}
                  <p><a id="ranpos" data-toggle="modal" data-target="#extraLargeModal" data-url="{% url 'my_app:posters' idposters|index:randpos %}"  href="#extraLargeModal"><i class="fas fa-random"></i> {% trans 'View random poster?'%}</a></p>
                {% endif %}
                <div class="row d-flex ">
                    {% if posters %}

                   {% for poster in posters %}
                        <div class="col-12 col-md-4 mb-4 mt-2">
                        <div class="card  h-100 border-light bg-light shadow">
                            <div class="card-body d-flex-row">
                                <blockquote class="blockquote mb-4 pb-2">
                                    <p class="mb-0 font-weight-bold">{{ poster.title }}</p>
                                    <font color="red">{{ poster.user.first_name }} {{ poster.user.last_name }}</font>
                                    <p>{{poster.get_type_display}} {{ forloop.counter }}</p>
                                </blockquote>
                                <div class='shorttext'><p class="card-text mb-5">{{ poster.abstract|truncatewords_html:100|safe }}</p></div>
                                <div class='fulltext' style="display: none;"><p class="card-text mb-5">{{ poster.abstract|safe }}</p></div>

                                {% if poster.abstract|truncatewords_html:100|safe != poster.abstract|safe %}
                                    <a href="#" class="more" style="color: black;"><i class="fas fa-caret-down"></i> {% trans 'READ MORE'%}</a>
                                {% endif %}


                                <div class="container3">
                                {% if poster.slides %}

                                <a data-toggle="modal" data-target="#extraLargeModal" data-url="{% url 'my_app:posters' poster.id %}"  href="#extraLargeModal">

                                <div style="text-align: center" class="image3">
                                    <p class="mt-5 mb-5"><h3><strong><i class="fas fa-play"></i> {% trans 'Check out the poster'%}</strong></h3></p>
                                </div>
                                <div class="middle2">
                                    <div class="text">{% trans 'See this poster'%} {% if poster.mp4_url %}{% trans '(+video)'%}{% endif %}/{% trans 'Ask questions'%}</div>
                                </div>
                                </a>

                                {% elif poster.mp4_url %}

                                    <a data-toggle="modal" data-target="#extraLargeModal" data-url="{% url 'my_app:posters' poster.id %}"  href="#extraLargeModal">

                                <div style="text-align: center" class="image3">
                                    <p class="mt-5 mb-5"><h3><strong><i class="fas fa-play"></i> {% trans "Check out the poster's video"%}</strong></h3></p>
                                </div>
                                <div class="middle2">
                                    <div class="text">{% trans "See this poster's video/Ask questions"%}</div>
                                </div>
                                </a>

                                {% else %}
                                    <p><i>{% trans 'The author is still working on their poster.'%}</i></p>
                                {% endif %}

                                </div>
                                <div class="w-100 pb-1"></div>
                            <div class="m-2 mt-2">
                                    <div class="mailabs" style="text-align: center;"><button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum poster.user.username 'join' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>

                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                    {% endfor %}

                    {% else %}
                      <div class="jumbotron mt-4 mr-5">
                        <h5>{% trans 'No posters yet.'%}</h5>
                      </div>
                {% endif %}
                </div>

            </div>
            </section>
                    </div>

            {% endif %}
              <div class="tab-pane fade show" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                <div class="jumbotron mt-4 mr-5">
                    <h3>{% trans 'The main organizers'%}</h3>
                    {% for org in organisers %}
                        <h5>{{ org.user.first_name }} {{ org.user.last_name }} / <a href="mailto:{{ org.user.email }}">{{ org.user.email }}</a></h5>
                    {% endfor %}
                </div>
              </div>
                {% ifnotequal conftopass.twitterhashtag '#' %}

            <div class="tab-pane fade" id="tweet" role="tabpanel" aria-labelledby="tweet-tab">
                <p class="mt-2"><i class="fab fa-twitter"></i> {% trans 'The twitter hashtag for the meeting is:'%} <b>{{ conftopass.twitterhashtag }}</b>. {% trans 'Use the button below to tweet something or check all the tweets on'%} <a href="https://twitter.com/hashtag/{{ twitterwhashtag }}?src=hashtag_click" target="_blank">Twitter</a> {% trans 'now'%}.</p>
                <div style="text-align: center;"><a href='https://twitter.com/intent/tweet?text=I+am+tweeting+from+a+carbon-neutral+conference+happening+right+now+entitled+"{{ conftopass.title }}"&hashtags={{ twitterwhashtag }},CarbonFreeConf' class="fab fa-twitter tweet-button" data-show-count="false" target="_blank"> Tweet {{ conftopass.twitterhashtag }}</a></div>



                <button id="reloadtweet" class="btn btn-info mt-5 new"><strong>{% trans 'Click here to load the most recent tweets containing'%} {{ conftopass.twitterhashtag }}</strong></button>
                <div id="newtweet2" class="newt2"></div>


                <div class="row" id="newtweet" align="center"></div>


                <div id="newtweet0">
                {% if tweetimage %}
                <p class="mt-3">{% trans 'Check out the last'%} {{ maxtweets }} {% trans 'tweets with the hashtag'%} <b>{{ conftopass.twitterhashtag }}</b> {% trans 'over the last 7 days:'%}</p>
                <div class="row" align="center">
                {% for tweetimag in tweetimage %}
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 mt-2 mb-2 d-flex align-items-stretch justify-content-center">
                    <div class="card bg-light" style="width: 28rem;">
                        <div class="card-body">
                            <h5 class="card-title font-weight-bold"><a href="https://twitter.com/{{ tweetscreenusers|index:forloop.counter0 }}" target="_blank" style="color: black;"> {{ tweetusers|index:forloop.counter0 }}</a></h5>
                            <small>{{ tweetdate|index:forloop.counter0 }} <br> {% trans 'Retweet count:'%}{{ tweetretweetcount|index:forloop.counter0 }}<br> <a href="https://twitter.com/{{ tweetscreenusers|index:forloop.counter0 }}/status/{{ tweetid|index:forloop.counter0 }}" target="_blank">{% trans 'See on'%} <i class="fab fa-twitter"></i></a></small>
                            <hr class="my-3" style="border-top: 2px dotted grey;">
                            <p class="card-text" style="font-size: .9rem; font-weight: 400; color: #747373;">{{ tweettext|index:forloop.counter0 }}</p>
                        </div>
                        {% ifnotequal tweetimag '' %}
                            <a href="https://twitter.com/{{ tweetscreenusers|index:forloop.counter0 }}/status/{{ tweetid|index:forloop.counter0 }}/photo/1" target="_blank"><img class="card-img-top" src="{{ tweetimage|index:forloop.counter0 }}" height="200" alt="{% trans 'Organize a carbon-neutral conference'%}"></a>
                        {% endifnotequal %}
                    </div>
                </div>
                {% endfor %}
                </div>
                {% else %}
                    {% if apiratetwitexc %}
                        <p class="mt-2">{% trans 'We cannot show the latest tweets for now, try again later.'%}</p>
                    {% endif %}
                {% endif %}
                </div>
            </div>
        {% endifnotequal %}
            {% if conftopass.activateqandp %}
                <div class="tab-pane fade" id="qaa" role="tabpanel" aria-labelledby="qaa-tab">
                    <div id="main2" class="mr-4">
                        <div class="mb-3"><small>{% trans 'To update go to another tab and come back or click the update button here:'%} <span><a href="#" id="updqaa" class="btn btn-primary py-0" style="font-size: 0.8em;"> {% trans 'Update'%}<span id="updateload"></span> </a></span></small></div>
                        <div id="qandpol"></div>
                    </div>
                </div>
            {% endif %}
            <div class="tab-pane fade" id="chatroom" role="tabpanel" aria-labelledby="chatroom-tab">
              <div id="main2" class="mr-4">
                <div id="mainchat"></div>

                <a href="https://chat.carbonfreeconf.com/home?resumeToken={{ resumetoken }}" target="_blank" id="newtabchat" class="btn btn-primary mt-2 mb-2">{% trans 'Open chat in a new tab'%}</a>

            </div>
            </div>
            {% if request.GET.cb == '1' %}
                {% if conftopass.coffeebreakgames %}


                <script>
                var gameone=0;

                $(document).ready(function () {

                    $('#collapseOne').on('shown.bs.collapse', function () {
                        console.log("Opened");
                        if (gameone==0){

                            $.getScript("{% static 'js/games/game.js' %}", function() {
                                //alert('Load was performed.');
                                $.getScript("{% static 'js/games/twemoji.js' %}", function() {

                                $("#game1").load('{% url "my_app:minesweeper" %}',function(){
                                    console.log('ok');
                                    gameone=1;
                                });
                                });

                            });


                        }

                    });

                    $('#collapseOne').on('hidden.bs.collapse', function () {
                       console.log("Closed")
                    });
                });
                </script>

                    <script>
                var gametwo=0;

                $(document).ready(function () {

                    $('#collapseTwo').on('shown.bs.collapse', function () {
                        console.log("Opened2");
                        if (gametwo==0){
                            var urlstat="{% static 'sounds' %}";
                            $.getScript("{% static 'js/pacman.js' %}", function() {
                                //alert('Load was performed.');
                                $.getScript("{% static 'js/modernizr-1.5.min.js' %}", function() {

                                        var el = document.getElementById("pacman");

                                        if (Modernizr.canvas && Modernizr.localstorage &&
                                            Modernizr.audio && (Modernizr.audio.ogg || Modernizr.audio.mp3)) {
                                            window.setTimeout(function () {
                                                PACMAN.init(el, urlstat);
                                                gametwo=1;
                                            }, 0);
                                        } else {
                                            el.innerHTML = "Sorry, needs a decent browser<br /><small>" +
                                                "(firefox 3.6+, Chrome 4+, Opera 10+ and Safari 4+)</small>";
                                        }
                                /*$("#game1").load('{% url "my_app:minesweeper" %}',function(){
                                    console.log('ok2');
                                    gametwo=1;
                                });*/
                                });

                            });


                        }

                    });

                    $('#collapseTwo').on('hidden.bs.collapse', function () {
                       console.log("Closed2")
                    });
                });
                </script>

                <script>
                var gamethree=0;

                $(document).ready(function () {

                    $('#collapseThree').on('shown.bs.collapse', function () {
                        console.log("Opened3");
                        if (gamethree==0){

                            $.getScript("{% static 'js/simon.js' %}", function() {
                                //alert('Load was performed.');

                                //$("#gamesimon").load('{% url "my_app:simon" %}',function(){
                                    console.log('ok3');
                                    gamethree=1;
                                //});

                            });


                        }

                    });

                    $('#collapseThree').on('hidden.bs.collapse', function () {
                       console.log("Closed3")
                    });
                });
                </script>




                <div class="tab-pane fade" id="interact" role="tabpanel" aria-labelledby="interact-tab">
                  <div id="main2" class="mr-4">

                  <h4>{% trans 'There are two main fun activities here: 1) You can write a few sentences (or more) in a common "book" chapter created for your conference! 2) You can ask questions to others and/or answer them (it is fun!).'%}</h4>

                      <span class="username-label">{% trans 'Your Anonymous Username:'%} </span><span id="username"></span>
                    <textarea rows="4" id="textarea"></textarea>


                  </div>
                <div class="resp-container2 joe mr-5 ml-3">
                    <iframe class="resp-iframe2" id="interact" frameBorder="0"
                        title="Answer questions"
                        src="{% url 'qa_index' confnum %}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true">
                    </iframe>
                </div>
                </div>
                <div class="tab-pane fade" id="game" role="tabpanel" aria-labelledby="game-tab">
                  <div id="main2" class="mr-4">
                      <h4 class="mb-5">{% trans "You can find here a series of games to chill during snacks and coffee breaks! Click on the game's name to discover what it is about!"%}</h4>
                      <div id="accordion">
                          <div class="card">
                            <div class="card-header" id="headingOne" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                              <h5 class="mb-0">
                                <button class="btn-link card-header" style="border:none">
                                    {% trans 'Mine Sweeper'%} <img src="{% static 'imggames/emoji-minesweeper.png' %}" alt="Mine sweeper game" height="100" style="height:100px">
                                </button>
                              </h5>
                            </div>

                            <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                              <div class="card-body">
                                  <p>{% blocktrans %}<strong>Rules:</strong> It is the same minesweeper game that is available in windows games inventory. The only difference is that we place emojis as a marker to spot the bomb position instead of flags.
                                        Left click is used to open a spot and right-click to mark a spot as a bomb. The numbers in the game give the number of bombs connected to a specific cell. From that you should know where the bomb is and not click on it.
                                        Do not click on bombs or you loose. Find all the bombs without any explosions and you win!{% endblocktrans %}</p>
                                  <div id="game1" class="d-flex justify-content-center">
                                    <div aria-live="assertive" class="feedback2"></div>

                                    </div>

                              </div>
                            </div>
                          </div>
                          <div class="card">
                            <div class="card-header" id="headingTwo" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                              <h5 class="mb-0">
                                <button class="btn-link collapsed card-header" style="border:none">
                                    {% trans 'Pacman'%} <img src="{% static 'imggames/pacman.png' %}" alt="Pacman game" height="100" style="height:100px">
                                </button>
                              </h5>
                            </div>
                            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                              <div class="card-body">
                                {% blocktrans %}<p><strong>Rules:</strong> It is the classic Pacman game that needs no introduction to most of you. However, if needed, please find a few guidelines.</p>
                                  <p>Press the N key to start the game. Pacman, the little yellow hero that can be moved around with the keyboard arrows needs to eat all of the Pac-dots.
                                    In each corner of the room Pacman can find and eat "Power Pellet", which turns the Ghosts in blue. Pacman can then get extra points by eating the blue Ghosts.
                                      
                                        When the ghosts are not blue, they should be avoided as on contact you lose one of your many lives. The number of points and lives was artificially boosted in the first few levels but it gets harder very fast.</p>
                                        {% endblocktrans %}
                                      <style type="text/css">
                                          #pacman {
                                            height:450px;
                                            width:342px;
                                            margin:20px auto;
                                          }
                                          #shim {
                                            font-family: BDCartoonShoutRegular;
                                            position:absolute;
                                            visibility:hidden
                                          }
                                        </style>

                                        <div id="shim">shim for font face</div>

                                        <div id="pacman"></div>
                                  <p style="text-align: center">{% blocktrans %}Press <strong>N</strong> to start a new game and <strong>P</strong> to pause{% endblocktrans %}</p>

                              </div>
                            </div>
                          </div>
                          <div class="card">
                            <div class="card-header" id="headingThree" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                              <h5 class="mb-0">
                                <button class="btn-link collapsed card-header" style="border:none">
                                  {% trans 'Simon Game'%} <img src="{% static 'imggames/Simon_game.jpeg' %}" alt="Simon game" height="100" style="height:100px">
                                </button>
                              </h5>
                            </div>
                            <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                              <div class="card-body">
                                {% blocktrans %}<p><strong>Rules:</strong> First, click the start button. A first tile will flash and make a sound. Click on this tile and wait. You will now see the same first tile flash and another one (the same or different).
                                      Just repeat the sequence. On success, a third tile will be added to the mix. Keep on doing that for as long as you can and let's see if you can go beyond 15 tiles in a row. The world record (beaten in 2020 in Canada) is 84 but going to 20 is already quite an achievement! </p>
                                  <p><strong>History:</strong> Simon is an electronic game to work on your memory skills invented by Ralph H. Baer and Howard J. Morrison. We here reproduce it in a browser.
                                      The real device creates a series of lights and sounds that the user must
                                      repeat in the right order. On success, the series becomes progressively longer. Once the user fails or
                                      the time limit runs out, the game is over. The original version was manufactured and distributed by Milton Bradley and later
                                      by Hasbro after it took over.
                                      Simon was launched in 1978 at Studio 54 in New York City and was an immediate success, becoming a pop culture symbol of the
                                      1970s and 1980s.</p>{% endblocktrans %}


                                <link href="{% static 'css/stylesimon.css' %}" rel="stylesheet" type="text/css" />
                                  <main class="game">
                                  <header>
                                    <h5 class="heading js-heading">{% trans 'Simon Game'%}</h5>
                                  </header>

                                  <div style="display: flex;justify-content: center;align-items: center;">
                                  <div class="tile-container js-container unclickable">
                                    <div class="tile tile-red" data-tile="red"></div>
                                    <div class="tile tile-green" data-tile="green"></div>
                                    <div class="tile tile-blue" data-tile="blue"></div>
                                    <div class="tile tile-yellow" data-tile="yellow"></div>
                                  </div>
                                </div>
                                  <div class="info-section">
                                    <button class="start-button js-start">Start</button>
                                    <span class="info js-info hidden"></span>
                                  </div>
                                </main>

                                <div class="hidden">
                                  <audio
                                    src="{% static 'sounds/simonSound1.mp3' %}"
                                    data-sound="red"
                                  ></audio>
                                  <audio
                                    src="{% static 'sounds/simonSound2.mp3' %}"
                                    data-sound="green"
                                  ></audio>
                                  <audio
                                    src="{% static 'sounds/simonSound3.mp3' %}"
                                    data-sound="blue"
                                  ></audio>
                                  <audio
                                    src="{% static 'sounds/simonSound4.mp3' %}"
                                    data-sound="yellow"
                                  ></audio>
                                </div>


                              </div>
                            </div>
                          </div>
                        </div>

                  </div>
                </div>
            {% endif %}
            {% endif %}
            <div class="row">
                    <div class="col-4">
                    <button id="fullscreeniframe" class="btn btn-info mt-2">{% trans 'Go Fullscreen'%}</button>
                    </div>
                    <div class="col-md-auto">
                    <a href="{{ enter_url }}" target="_blank" id="newtabwebinar" class="btn btn-primary mt-2">{% trans 'Technical issue? Open in'%} {% if conftopass.roomtype == "Big Marker" %}{% trans 'a new window'%}{% else %}{% trans 'zoom client instead'%}{% endif %}</a>
                    </div>
                    <div class="col-12">
                    <a href="#" class="btn btn-secondary mt-4" data-toggle="modal" data-target="#exampleModal"> {% trans 'Check how to navigate'%} </a>
                    </div>
                </div>
                                <div class="d-flex justify-content-center mt-4">
                                    <div><p><small>{% trans 'Activate sound notifications to hear time left warnings from moderators to speakers'%}</small></p></div>
                                </div>
                                <div class="d-flex justify-content-center mt-3">
                                    <div>
                                        <label class="switch">
                                            <input class="switch-input" id="unmuteButton" type="checkbox" />
                                            <span class="switch-label" data-on="On" data-off="Off"></span>
                                            <span class="switch-handle"></span>
                                        </label>
                                        </div>
                                </div>
            {% if roleq == 1 %}
                    <div class="d-flex justify-content-center mt-3">
                        <div class="col-4">
                        <label for="confinv-select">{% trans 'Warn the speaker that they have only a few minutes left?' %}</label>
                        <form name=minForm action="#" method=POST>
                            {% csrf_token %}
                        <select name="confmin" class="browser-default custom-select" id="confmin-select">
                            <option value="">--{% trans 'How many minutes left?' %}--</option>
                                <option value="100">{% trans 'No time left' %}</option>
                                <option value="1">{% trans '1 minute left' %}</option>
                                <option value="2">{% trans '2 minutes left' %}</option>
                                <option value="3">{% trans '3 minutes left' %}</option>
                                <option value="5">{% trans '5 minutes left' %}</option>
                                <option value="10">{% trans '10 minutes left' %}</option>

                        </select>
                        </form>
                        </div>
                    </div>
                {% endif %}
                    <div class="d-flex justify-content-center mt-3" id="wait"></div>


            {% if roleq == 1 %}
                <div id="main2" class="mr-4">

                    <h4>{% trans 'Real time interactions with all superusers and moderators'%} <small>{% trans '(it is not seen by other participants)'%}.</small></h4>

                      <span class="usernamemod-label">{% trans 'Displayed name to others:'%} </span><span id="usernamemod"></span>
                      <textarea rows="4" id="textareamod"></textarea>


                  </div>
            {% endif %}

        </div>


        {% endif %}
    {% if status == '14'  %}
        <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">{% trans 'Record your talk'%}</a>
              </li>
        </ul>
        <div class="tab-content" id="myTabContent">
              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                  <div class="newwindow"></div>

                <div class="resp-container2 joe">
                    {% if conftopass.roomtype == "Big Marker" %}
                    <iframe class="resp-iframe2" id="inlineFrameExample3" frameBorder="0"
                        title="{% trans 'CarbonFreeConf webinar recording'%}"
                        src="{{ enter_url }}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">
                    </iframe>
                    {% else %}
                        {% if not request.session.joinconftuto %}
                        <script>
                            $(window).on('load', function() {
                                $('#exampleModal').modal('show');
                            });
                            </script>
                    {% endif %}

                    <iframe class="resp-iframe2" id="inlineFrameExample" frameBorder="0"
                        title="{% trans 'CarbonFreeConf webinar recording'%}"
                        src="{% url 'my_app:zoomroom' confnum idconf 1 "exitpageprerec" %}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">
                    </iframe>
                {% endif %}
                </div>
              </div>
             <button id="fullscreeniframe" class="btn btn-info mt-2">{% trans 'Go Fullscreen'%}</button>
            <a href="{{ enter_url }}" target="_blank" id="newtabwebinar" class="btn btn-primary mt-2">{% trans 'Open webinar in a new tab'%}</a>

        </div>
    {% endif %}
    {% if status == '180'  %}
        <ul class="nav nav-tabs" id="myTab" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">{% trans 'Test the conference room'%}</a>
              </li>
        </ul>
        <div class="tab-content" id="myTabContent">
              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                  <div class="newwindow"></div>
                <div class="resp-container2 joe">
                    {% if conftopass.roomtype == "Big Marker" %}
                    <iframe class="resp-iframe2" id="inlineFrameExample3" frameBorder="0"
                        title="{% trans 'CarbonFreeConf webinar test room'%}"
                        src="{{ enter_url }}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">
                    </iframe>
                    {% else %}
                        {% if not request.session.joinconftuto %}
                            <script>
                                $(window).on('load', function() {
                                    $('#exampleModal').modal('show');
                                });
                                </script>
                    {% endif %}

                    <iframe class="resp-iframe2" id="inlineFrameExample" frameBorder="0"
                        title="{% trans 'CarbonFreeConf webinar test room'%}"
                        src="{% url 'my_app:zoomroom' confnum idconf 1 "exitpageparticipantstest" %}"
                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">
                    </iframe>
                {% endif %}
                </div>
              </div>
             <button id="fullscreeniframe" class="btn btn-info mt-2">{% trans 'Go Fullscreen'%}</button>
            <a href="{{ enter_url }}" target="_blank" id="newtabwebinar" class="btn btn-primary mt-2">{% trans 'Open webinar in a new tab'%}</a>

        </div>
    {% endif %}



        </div>




    <script>
        $('#myTab a').on('shown.bs.tab', function (e) {
                     scheduler.setCurrentView();
                });
    </script>
    <script>
    var id = $('.tab-content .active').attr('id');
    if(id == "home") {
        $('#fullscreeniframe').show();
    }
    else {
        $('#fullscreeniframe').hide();
    }
    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    // here is the new selected tab id
        var id = e.target.id;
        if(id == "home-tab") {
            $('#fullscreeniframe').show();
        }
        else {
            $('#fullscreeniframe').hide();
        }
    });
    </script>
    <script>
    (function(window, document){
        var $ = function(selector,context){return(context||document).querySelector(selector)};

        var iframe = $("iframe"),
            domPrefixes = 'Webkit Moz O ms Khtml'.split(' ');

        var fullscreen = function(elem) {
            var prefix;
            // Mozilla and webkit intialise fullscreen slightly differently
            for ( var i = -1, len = domPrefixes.length; ++i < len; ) {
              prefix = domPrefixes[i].toLowerCase();

              if ( elem[prefix + 'EnterFullScreen'] ) {
                // Webkit uses EnterFullScreen for video
                return prefix + 'EnterFullScreen';
                break;
              } else if( elem[prefix + 'RequestFullScreen'] ) {
                // Mozilla uses RequestFullScreen for all elements and webkit uses it for non video elements
                return prefix + 'RequestFullScreen';
                break;
              }
            }

            return false;
        };
        // Webkit uses "requestFullScreen" for non video elements
        var fullscreenother = fullscreen(document.createElement("iframe"));

        if(!fullscreen) {
            alert("Fullscreen won't work, please make sure you're using a browser that supports it and you have enabled the feature");
            return;
        }
        var myEle = document.getElementById("fullscreeniframe");
        if(myEle){
            $("#fullscreeniframe").addEventListener("click", function(){
                // iframe fullscreen and non video elements in webkit use request over enter
                iframe[fullscreenother]();
            }, false);
        }
    })(this, this.document);
</script>

    <script>
function exitfs(){
    if (document.cancelFullScreen) {
        document.cancelFullScreen();
    } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
    } else if (document.webkitCancelFullScreen) {
        document.webkitCancelFullScreen();
    }
}
</script>
<script>
    $('#newtabwebinar').click(function(){
        $(".resp-container2.joe").text("");
        $(".newwindow").append('<p>The webinar is opened in another window...</p><button id="bring" class="btn btn-warning mt-2">Bring the webinar back here</button>');


        /*ZoomMtg.expel({
            userId: 16778240,
            success: function (res) {
            console.log("success expel");
        },
        });*/
    });
</script>


<script>
    $("body").on("click", "#bring", function() {

        {% if status == '18' %}

            var link="/zoomroom/{{ confnum }}/{{ idconf }}/1/exitpageparticipantstest";

        {% elif status == '14' %}

            var link="/zoomroom/{{ confnum }}/{{ idconf }}/1/exitpageprerec";

        {% else %}

            var link="/zoomroom/{{ confnum }}/{{ idconf }}/{{ inj }}/exitpageparticipants";

        {% endif %}
        $(".newwindow").text('');
        $(".resp-container2.joe").append('{% if conftopass.roomtype == "Big Marker" %}\n'+
                '                    <iframe class="resp-iframe2" id="inlineFrameExample" frameBorder="0"\n'+
                '                        title="CarbonFreeConf webinar"\n'+
                '                        src="{{ enter_url }}"\n'+
                '                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">\n'
                +
                '                    </iframe>\n'+
                '                {% else %}\n'+
                '                    <iframe class="resp-iframe2" id="inlineFrameExample" frameBorder="0"\n'+
                '                        title="CarbonFreeConf webinar"\n'+
                '                        src='+link+'\n'+
                '                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera; cross-origin-isolated">\n'
                +
                '                    </iframe>\n'+
                '                {% endif %}');

    });
</script>



<script>
$(window).on("beforeunload", function(event) {
    //call ajax qui va remettre a false le isinconf
    //event.preventDefault();
    //alert('bef');

  // the timer is only to let the message box disappear after the user
  // decides to stay on this page
  // set this to 1ms .. since timers are stopped for this modal


    //return confirm("Do you really want to close?");
    //$("#exampleModal").modal('show');

    if(/Firefox[\/\s](\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 4) {
        console.log('firefox delete');
        //alert('firefox');
         var datam={async:false};
         isinconfb(datam);
         return undefined;
      }
      else {
        console.log('NON-firefox delete');
        //alert('others');
         var datam={async:true};
         isinconfb(datam);
        return undefined;
      }
    //alert('bef');

    //isinconfb();
    //return undefined;
    //return confirm("Do you really want to close?");
})
</script>



<script>
function isinconfb(datam) {
console.log("isinconf is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
    //alert('bef');
$.ajax({
    url : "/isinconfb/",//"{% url 'my_app:addpeople' %}", // the endpoint
    type : "POST", // http method
    //if(/Firefox[\/\s](\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 4)
    //{
    async: datam.async,
    //}
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                //confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);

        //alert('success');
        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
    $("a[href='#details']").on('show.bs.tab', function(e) {
        if (1==0) {
            whoactiveb();
        }
    });
</script>

<script>
function whoactiveb() {
console.log("whoactive is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "/whoactiveb/",//"{% url 'my_app:addpeople' %}", // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        $("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            //alert('yes');
            $("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }
        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
    $("a[href='#participants']").on('show.bs.tab', function(e) {
        whoactivec();
    });
</script>

<script>
function whoactivec() {
console.log("whoactivec is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "/whoactivec/",//"{% url 'my_app:addpeople' %}", // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id=email]").text('');
        $("span[class='joe']").text('');

        //lert(json.nbplive);
        if (json.success) {
            $("#regpart").text('');
            var i;
            for (i = 0; i < json.peopactemail.length; i++) {
                j = i + 1;
                //alert(json.peopactfname[i]);
                $("#regpart").append('<ul class="list-group">');
                if (json.peopactorcid[i] != '') {
                    $("#regpart").append('<li class="list-group-item">' + j + ') <a href="https://orcid.org/' + json.peopactorcid[i] + '" target="_blank" style="color: blue;">' + json.peopactfname[i] + ' ' + json.peopactlname[i] + '</a> <span class="joe" id="'+json.peopactemail[i]+'"></span></li>');
                } else {
                    $("#regpart").append('<li class="list-group-item">' + j + ') ' + json.peopactfname[i] + ' ' + json.peopactlname[i] + ' <span class="joe" id="'+json.peopactemail[i]+'"></span> </li>');
                }
                $("#regpart").append('</ul>');

            }
            var i;
            //alert(json.peopactive.length);
            for (i = 0; i < json.peopactive.length; i++) {
                var d = document.getElementById(json.peopactive[i]);
                d.insertAdjacentHTML('beforeend', '<span class="dot ml-2" title="Connected to the conference room."></span>');
                //$("#"+json.peopactive[i]).append("Yes");
                //alert('ff'+json.peopactive[i]);
            }
            //alert('yes');
            //$("#nb").append("Number of participants in the conference room:"+json.nbplive);
        }
        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>


<script>
    var modalDiv = $("#modal-div");
    $(function () {
     //$(document).on('click', '[data-toggle="modal"]', function () {
       $(document).on('click', '[data-target="#extraLargeModal"]', function () {
        $.ajax({
            url: $(this).attr("data-url"),
            success: function (data) {
                //alert('brah')
                modalDiv.html(data);
                $("#extraLargeModal").modal({backdrop: false});
            }
        });
  });
})

</script>




<script>
function refresh() {
  var confnumm={{ confnum }};
  var urll = "{% url 'my_app:messagetoall' %}";
  var urlf = urll+"/"+confnumm;
  $.ajax({
  url: urlf,
  success: function(data) {
    //alert(data);
    $('#right').html(data);
  }
 });
};


/*$(document).ready(function ($) {
    refresh();
    var time = 3000*60;
    var int = setInterval("refresh()", time);
});*/
</script>

{% if conftopass.activateqandp %}

<script>
function checkfornewqandpb() {
    var confnumm={{ confnum }};
  var urll = "{% url 'my_app:checkfornewqandp' %}";
  var urlf = urll+confnumm+"/";
console.log("checkfornewqandpb is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : urlf,
    type : "POST", // http method
    data : {
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id=email]").text('');
        //$("span[class='joe']").text('');


        //lert(json.nbplive);
        if(json.success) {
            if (json.countqandp > 0){
                $('#newqp').text(json.countqandp);
                $('#newqp').show();
            }else {
                $('#newqp').text('');
                $('#newqp').hide();
            }

        }else{
            $('#newqp').text('');
            $('#newqp').hide();
        }
        /*if(json.successp){
            $('#newqp2').html('<p>OKp</p>');
        }else{
            $('#newqp2').html('');
        }*/



        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>


<script>
$(document).ready(function ($) {
    checkfornewqandpb();
    var timeb = 1000*15;
    var intb = setInterval("checkfornewqandpb()", timeb);
});
</script>

{% endif %}


<script>
    $('.card-text').html(function(i, text) {
 return text.replace(
     /[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+/g,
     '<a href="$&" target="_blank">$&</a>'
 );
});

    $('.card-text').html(function(i, text) {
 return text.replace(/@([a-z\d_]+)/ig, '<a href="http://twitter.com/$1" target="_blank" style="color: red;">@$1</a>'
 );
});

$('.card-text').html(function(i, text) {
 return text.replace(/#([a-z\d_]+)/ig, '<a href="https://twitter.com/hashtag/$1?src=hashtag_click" target="_blank" style="color: orange;">#$1</a>'
 );
});

         //parse URL
/* str = str.replace(/[A-Za-z]+://[A-Za-z0-9-_]+.[A-Za-z0-9-_:%&~?/.=]+/g,function(s){
  return s.link(s);
 });
 //parse user_name
 str = str.replace(/[@]+[A-Za-z0-9_]+/g,function(s){
  var user_name = s.replace('@','');
  return s.link("http://twitter.com/"+user_name);
 });
 //parse hashtag
 str = str.replace(/[#]+[A-Za-z0-9_]+/g,function(s){
  var hashtag = s.replace('#','');
  return s.link("http://search.twitter.com/search?q="+hashtag);
 });
 return str;*/

</script>



    {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template-q">
        <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10 mt-2 mb-2 d-flex align-items-stretch justify-content-center">
            <div class="card bg-light" style="width: 56rem; {{#ifCond highlight '==' true}} border-color: lightcoral!important;border-width: thick; {{/ifCond}}">
                <div class="card-body">
                    <h5 class="card-title font-weight-bold" style="text-align : center"><small><i class="fas fa-comments"></i></small> {{ question }}</h5>
                    {{#ifCond anonymous '==' true}}
                    <h6 style="text-align : center; {{#ifCond highlight '==' true}} color:#FF9933 {{/ifCond}} {{#ifCond highlight '!=' true}}  color: #FF9933 {{/ifCond}}">by Anonymous</h6>
                    {{/ifCond}}
                    {{#ifCond anonymous '!=' true}}
                        <h6 style="text-align : center;{{#ifCond highlight '==' true}} color:#FF9933 {{/ifCond}} {{#ifCond highlight '!=' true}}  color: #FF9933 {{/ifCond}}"> by {{ user }}</h6>
                    {{/ifCond}}
                    <h6 style="text-align : center"> <i>Number of upvotes:</i> <strong>{{ vote }}</strong></h6>
                    <hr class="my-3" style="border-top: 2px dotted grey;">
                    <div class="row">
                    <div class="col-4" style="text-align : left;">{{#ifCond roleq '==' true}}<small><a href="#" data-id="{{ qid }}" id="high{{ idq }}" style="color: #0141a2">{{#ifCond highlight '==' true}} <i class="fas fa-quidditch"></i> Deselect {{/ifCond}} {{#ifCond highlight '!=' true}} <i class="fas fa-bolt"></i> Highlight {{/ifCond}}</a></small>{{/ifCond}}</div>
                    <div class="col-4">
                        <div style="text-align : center;" class="image4">
                            <a class="navbar-brand d-inline-block align-center upvote" data-id="{{ qid }}" id="thumb{{ idq }}" href="">
                            <img src='{{ imgtu }}' class="d-inline-block align-center" alt="Thumbs up" data-toggle="tooltip" title="Upvote this question? You can upvote each question only once.">
                            </a>
                        </div>
                    </div>
                    <div class="col-4" style="text-align : right;">{{#ifCond roleq '==' true}}<small><a href="#" data-id="{{ qid }}" id="remove{{ idq }}" style="color: #0141a2"><i class="fas fa-eraser"></i> Remove</a></small>{{/ifCond}}</div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    {% endverbatim %}

    {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template-p">
        <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10 mt-2 mb-2 d-flex align-items-stretch justify-content-center">
            <div class="card bg-light" style="width: 56rem; {{#ifCond highlight '==' true}} border-color: lightcoral!important;border-width: thick; {{/ifCond}}">
                <div class="card-body">
                    {{#ifCond roleq '==' true}}<small><i>{{#ifCond active '==' true}}Active{{/ifCond}}{{#ifCond active '==' false}}Inactive{{/ifCond}}</i></small>{{/ifCond}}
                    <h5 class="card-title font-weight-bold" style="text-align : center"><small><i class="fas fa-balance-scale"></i></small> {{ question }}</h5>
                    {{#ifCond anonymous '==' true}}
                    <h6 style="text-align : center; {{#ifCond highlight '==' true}} color:#FF9933 {{/ifCond}} {{#ifCond highlight '!=' true}}  color: #FF9933 {{/ifCond}}">by Anonymous <small>({{pluralCount votetotal 'vote'}} so far)</small></h6>
                    {{/ifCond}}
                    {{#ifCond anonymous '!=' true}}
                        <h6 style="text-align : center;{{#ifCond highlight '==' true}} color:#FF9933 {{/ifCond}} {{#ifCond highlight '!=' true}}  color: #FF9933 {{/ifCond}}"> by {{ user }} <small>({{pluralCount votetotal 'vote'}} so far)</small></h6>
                    {{/ifCond}}
                    {{#ifCond showres '!=' true}}
                    {{#ifCond imagepoll '!=' ''}}
                    <a href="{{ imagepoll }}" data-fancybox="images" data-caption="<strong>Poll image for the question:</strong> {{ question }}"><img src="{{ imagepoll }}" loading="lazy" alt="Poll image" style="width:300px!important;" class="mb-3"></a>
                    {{/ifCond}}
                    <form enctype="multipart/form-data" method="POST" id="formpoll{{ qid }}" action="">
                    {% endverbatim %}
                        {% csrf_token %}
                    {% verbatim %}
                    {{#each choice}}

                        <p>{{inc @index}}) {{this}} <input type="radio" name="choice{{../qid}}" id="i{{lookup ../idq @index}}id{{../qid}}" {{#with (lookup ../idq @index) as |bob|}} {{#ifCond ../../voteid '==' bob}}checked{{/ifCond}} {{/with}}></p>

                    {{/each}}

                    <div style="text-align: center;"><button type="submit" class="btn btn-info mb-3 mt-2" id="votebut" {{#ifCond alr '==' 1}}disabled{{/ifCond}}>{{#ifCond alr '==' 1}}Already voted{{/ifCond}}{{#ifCond alr '==' 0}}Vote{{/ifCond}}</button></div>
                    </form>
                    {{/ifCond}}
                    {{#ifCond showres '==' true}}
                    <p style="color: #0141a2;"><strong>Poll Results</strong></p>
                    {{#each choice}}
                    <p class="mt-5" style="text-align : left;">{{inc @index}}) {{this}} {{#with (lookup ../votetot @index) as |votec|}} ({{pluralCount votec 'vote'}}){{/with}} <span style="{{#ifCond ../highlight '==' true}} color:#FF9933 {{/ifCond}} {{#ifCond ../highlight '!=' true}} color:#FF9933 {{/ifCond}}"><strong>{{lookup ../voteper @index}}%</strong></span></p>
                        <div class="mb-3" style="background: {{#with (lookup ../max @index) as |maxc|}} {{#ifCond maxc '==' 1}}#33cccc;{{/ifCond}} {{#ifCond maxc '==' 0}}#d9d9d9;{{/ifCond}}{{/with}} border: 1px solid #AD8346; height: 12px; width: {{lookup ../voteper @index}}%; display:inline-block;float:left;"></div>

                    {{/each}}
                    {{/ifCond}}

                    <hr class="mt-5 mb-2" style="border-top: 2px dotted grey;">
                    <div class="row">
                    <div class="col-6" style="text-align : left;">{{#ifCond roleq '==' true}}<small><a href="#" data-id="{{ qid }}" id="highpoll{{ qid }}" style="color: #0141a2">{{#ifCond highlight '==' true}} <i class="fas fa-quidditch"></i> Deselect {{/ifCond}} {{#ifCond highlight '!=' true}} <i class="fas fa-bolt"></i> Highlight {{/ifCond}}</a></small>{{/ifCond}}</div>
                    <div class="col-6" style="text-align : right;">
                        {{#ifCond roleq '==' true}}<small><a href="#" data-id="{{ qid }}" id="activate{{ qid }}" style="color: #0141a2">{{#ifCond active '==' true}} <i class="fas fa-stop-circle"></i> Deactivate {{/ifCond}} {{#ifCond active '!=' true}} <i class="fas fa-play-circle"></i> Activate {{/ifCond}}</a></small>{{/ifCond}}
                    </div>
                     <div class="col-6" style="text-align : left;">
                        {{#ifCond roleq '==' true}}<small><a href="#" data-id="{{ qid }}" id="showres{{ qid }}" style="color: #0141a2">{{#ifCond showres '==' true}} <i class="fas fa-eye-slash"></i> Unshow results {{/ifCond}} {{#ifCond showres '!=' true}} <i class="fas fa-eye"></i> Show results {{/ifCond}}</a></small>{{/ifCond}}
                    </div>
                    <div class="col-6" style="text-align : right;">{{#ifCond roleq '==' true}}<small><a href="#" data-id="{{ qid }}" id="removepoll{{ qid }}" style="color: #0141a2"><i class="fas fa-eraser"></i> Remove</a></small>{{/ifCond}}</div>
                    </div>
                </div>
            </div>
        </div>
    </script>
    {% endverbatim %}

    {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template">
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12 mt-2 mb-2 d-flex align-items-stretch justify-content-center">
                    <div class="card bg-light" style="width: 28rem;">
                        <div class="card-body">
                            <h5 class="card-title font-weight-bold"><a href="https://twitter.com/{{ tweetscreenusers }}" target="_blank" style="color: black;"> {{ tweetusers }}</a></h5>
                            <small>{{ tweetdate }} <br> Retweet count:{{ tweetretweetcount }}<br> <a href="https://twitter.com/{{ tweetscreenusers }}/status/{{ tweetid }}" target="_blank">See on <i class="fab fa-twitter"></i></a></small>
                            <hr class="my-3" style="border-top: 2px dotted grey;">
                            <p class="card-text" style="font-size: .9rem; font-weight: 400; color: #747373;">{{ tweettext }}</p>
                        </div>
                        {{#ifCond tweetimage '!=' ""}}
                            <a href="https://twitter.com/{{ tweetscreenusers }}/status/{{ tweetid }}/photo/1" target="_blank"><img class="card-img-top" src="{{ tweetimage }}" height="200" alt="Organize a carbon-neutral conference"></a>
                        {{/ifCond}}
                    </div>

                </div>
    </script>
    {% endverbatim %}


        <script>
    Handlebars.registerHelper('ifCond', function (v1, operator, v2, options) {

    switch (operator) {
        case '==':
            return (v1 == v2) ? options.fn(this) : options.inverse(this);
        case '===':
            return (v1 === v2) ? options.fn(this) : options.inverse(this);
        case '!=':
            return (v1 != v2) ? options.fn(this) : options.inverse(this);
        case '!==':
            return (v1 !== v2) ? options.fn(this) : options.inverse(this);
        case '<':
            return (v1 < v2) ? options.fn(this) : options.inverse(this);
        case '<=':
            return (v1 <= v2) ? options.fn(this) : options.inverse(this);
        case '>':
            return (v1 > v2) ? options.fn(this) : options.inverse(this);
        case '>=':
            return (v1 >= v2) ? options.fn(this) : options.inverse(this);
        case '&&':
            return (v1 && v2) ? options.fn(this) : options.inverse(this);
        case '||':
            return (v1 || v2) ? options.fn(this) : options.inverse(this);
        default:
            return options.inverse(this);
    }
    });

    Handlebars.registerHelper("inc", function(value, options)
    {
        return parseInt(value) + 1;
    });

    Handlebars.registerHelper('pluralize', function(number, singular, plural) {
    if (number === 1)
        return singular;
    else
        return (typeof plural === 'string' ? plural : singular + 's');
    });

    Handlebars.registerHelper('pluralCount', function(number, singular, plural) {
        return number+' '+Handlebars.helpers.pluralize.apply(this, arguments);
    });

    </script>

    <script>
    $(document).ready(function () {

        $('body').on('click', '#reloadtweet', function (event) {
            event.preventDefault();
            reloadtweetb();
            //return false;
        })
    });
    </script>

    <script>

function reloadtweetb() {
console.log("reloadtweetb is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "/reloadtweet/",
    type : "POST", // http method
    data : {    confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id=email]").text('');
        //$("span[class='joe']").text('');
        var source = $("#result-template").html();
        console.log(source);
        var template = Handlebars.compile(source);
        console.log(template);

        //lert(json.nbplive);
        if (json.success) {
            //alert('success');
            $('#newtweet0').text('');
            $('#newtweet2').text('');
            $('#newtweet').text('');

            $('#newtweet2').html('<p class="mt-3">Check out the last '+json.maxtweets+' tweets with the hashtag <b>#' + json.twitterwhashtag + '</b> over the last 7 days:</p>');

            var i;
            for (i = 0; i < json.tweettext.length; i++) {
                var myObject = {
                    tweettext:json.tweettext[i],
                    tweetscreenusers:json.tweetscreenusers[i],
                    tweetusers:json.tweetusers[i],
                    tweetdate:json.tweetdate[i],
                    tweetretweetcount:json.tweetretweetcount[i],
                    tweetid:json.tweetid[i],
                    tweetimage:json.tweetimage[i]
                };
                var context = myObject;//JSON.stringify(myObject);

                //var context = {json.tweettext[i],json.tweetscreenusers[i],json.tweetusers[i],json.tweetdate[i],json.tweetretweetcount[i],json.tweetid[i],json.tweetimage[i]};
                console.log(context);

                var html = template(context);
                $("#newtweet").append(html);

            }
                $('.card-text').html(function(i, text) {
                 return text.replace(
                     /[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+/g,
                     '<a href="$&" target="_blank">$&</a>'
                 );
                });

                $('.card-text').html(function(i, text) {
                 return text.replace(/@([a-z\d_]+)/ig, '<a href="http://twitter.com/$1" target="_blank" style="color: red;">@$1</a>'
                 );
                });

                $('.card-text').html(function(i, text) {
                 return text.replace(/#([a-z\d_]+)/ig, '<a href="https://twitter.com/hashtag/$1?src=hashtag_click" target="_blank" style="color: orange;">#$1</a>'
                 );
                });

        }else{
            if (json.success2){
                $('#newtweet2').html('<p class="mt-3 ml-4">No tweets with the hashtag <b>#' + json.twitterwhashtag + '</b> were published over the last 7 days</p>');
            }else{
                $('#newtweet2').html('<p class="mt-3 ml-4">Try again later!</p>');
            }

        }

            //$("#nb").append("Number of participants in the conference room:"+json.nbplive);
        /*}else{
            alert('nada');
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
        $("#newmeeting").click(function(){
        createzoommeetingb();
    });
    </script>

        <script>
    function createzoommeetingb() {
        console.log("zoom is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/instantzoom/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                //alert('f'+json.starturl)
                window.open(json.starturl, '_blank');

                console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

{% if conftopass.activateqandp %}
    <script>
    $(document).ready(function () {

        $('body').on('click', '#sendquestion', function (event) {
            event.preventDefault();
            questionb();
            //return false;
        })
    });
    </script>

<script>
    /*
$(document).ready(function() {

    var int;

    $("a[href='#qaa']").on('shown.bs.tab', function (e) {
        addquestionb(init = 1);
        //alert('hj');
        var time = 1000 * 10;

        int = setInterval("addquestionb()", time);
    });

    $("a[href='#qaa']").on('hide.bs.tab', function (e) {
        //alert('nada');
        clearInterval(int);
    });
})*/
</script>


    <script>
function addquestionb(init=0) {
console.log("add question is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:addquestionasked' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                //question : $('#id_question').val(),
                //ano : $('#id_anonymous').prop('checked'),
                init:init,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {
        //alert('lm');
        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.successp) {
            //alert('new change');
            //$('#iniq').text('');

            if (json.questionp.length > 0) {
                $('#newp').text('');
                $("#newp").append('<h4 class="mt-2"><strong><i class="far fa-question-circle"></i> Current polls</strong></h4>');
            }else{
                $('#newp').text('');
                $("#removepoll").remove();
                //$("#newp").append('<p class="mt-2 ml-2"><i class="far fa-comments"></i> No polls so far. Be the first to write a poll...</p>');
            }
            var sourcep = $("#result-template-p").html();
            //console.log(source);
            var templatep = Handlebars.compile(sourcep);
            //console.log(template);

            var ip;
            for (ip = 0; ip < json.questionp.length; ip++) {
                //console.log('ttq '+json.question[i]);
                //console.log('ttv '+json.vote[i]);
                console.log('tth '+json.highlightp[ip]);

                var myObjectp = {
                    question:json.questionp[ip],
                    //vote:json.votep[ip],
                    user:json.userp[ip],
                    highlight:json.highlightp[ip],
                    anonymous:json.anonymousp[ip],
                    choice:json.choicep[ip],
                    lenchoice:json.choiceplen[ip],
                    roleq:json.rolep[ip],
                    qid:json.qidp[ip],
                    idq:json.idqp[ip],
                    active:json.active[ip],
                    showres:json.showres[ip],
                    removed:json.removed[ip],
                    alr:json.alr[ip],
                    voteid:json.voteid[ip],
                    votetot:json.votetot[ip],
                    votetotal:json.votetotal[ip],
                    voteper:json.voteper[ip],
                    imagepoll:json.imagepoll[ip],
                    max:json.max[ip],
                    imgtu:'{% static "images/thumbs-up-icon.png" %}',
                };
                var contextp = myObjectp;//JSON.stringify(myObject);

                //var context = {json.tweettext[i],json.tweetscreenusers[i],json.tweetusers[i],json.tweetdate[i],json.tweetretweetcount[i],json.tweetid[i],json.tweetimage[i]};
                console.log(contextp);
                //alert('d'+myObjectp);
                var htmlp = templatep(contextp);
                $("#newp").append(htmlp);

            $("#removepoll").remove();

            if (json.rolep[0] == 1){
                $('#newp').after('<div class="mt-4" style="text-align: right;" id="rq"><button type="submit" class="btn btn-danger mb-3" id="removepoll">Remove all polls</button></div>');
            }
            }

        }
        if (json.success) {
            //alert('new change');
            $('#iniq').text('');

            if (json.question.length > 0) {
                $('#newq').text('');
                $("#newq").append('<h4 class="mt-2"><strong><i class="far fa-question-circle"></i> Currently active questions</strong></h4>');
            }else{
                $('#newq').text('');
                $("#removequest").remove();
                $("#newq").append('<p class="mt-2 ml-4"><i class="far fa-comments"></i> No questions so far. Be the first to ask a question...</p>');
            }
            var source = $("#result-template-q").html();
            //console.log(source);
            var template = Handlebars.compile(source);
            //console.log(template);



            var i;
            for (i = 0; i < json.question.length; i++) {
                //console.log('ttq '+json.question[i]);
                //console.log('ttv '+json.vote[i]);
                console.log('tth '+json.highlight[i]);

                var myObject = {
                    question:json.question[i],
                    vote:json.vote[i],
                    user:json.user[i],
                    highlight:json.highlight[i],
                    anonymous:json.anonymous[i],
                    roleq:json.roleq[i],
                    qid:json.qid[i],
                    idq:json.idq[i],
                    imgtu:'{% static "images/thumbs-up-icon.png" %}',
                };
                var context = myObject;//JSON.stringify(myObject);

                //var context = {json.tweettext[i],json.tweetscreenusers[i],json.tweetusers[i],json.tweetdate[i],json.tweetretweetcount[i],json.tweetid[i],json.tweetimage[i]};
                console.log(context);

                var html = template(context);
                $("#newq").append(html);

            $("#removequest").remove();

            if (json.roleq[0] == 1){
                $('#newq').after('<div class="mt-4" style="text-align: right;" id="rq"><button type="submit" class="btn btn-danger mb-3" id="removequest">Remove all questions</button></div>');
            }
            //$('[data-toggle="tooltip"]').tooltip({trigger : 'hover'});

            $('body').tooltip({
                    selector: '[data-toggle="tooltip"], [title]:not([data-toggle="popover"])',
                    trigger: 'hover',
                    container: '#newq'
                })

            }
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

    <script>
function questionb() {
console.log("question is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:questionasked' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                question : $('#id_question').val(),
                ano : $('#id_anonymous').prop('checked'),
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            //alert('Question sent');
            $('#id_question').val("");
            addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>



<script>
$(document).ready(function () {
    $('body').on('click', '[id^="activate"]', function (event) {
        event.preventDefault();
        //alert('thumb');
        var idqu = $(this).attr('id').replace("active", "");
        var iddel = $(this).attr('data-id');

        activeb(idqu,iddel);
        //return false;
    })
});
</script>

<script>
$(document).ready(function () {
    $('body').on('click', '[id^="showres"]', function (event) {
        event.preventDefault();
        //alert('thumb');
        var idqu = $(this).attr('id').replace("showres", "");
        var iddel = $(this).attr('data-id');

        showresb(idqu,iddel);
        //return false;
    })
});
</script>

<script>
$(document).ready(function () {
    $('body').on('click', '[id^="thumb"]', function (event) {
        event.preventDefault();
        //alert('thumb');
        var idqu = $(this).attr('id').replace("thumb", "");
        var iddel = $(this).attr('data-id');

        thumbb(idqu,iddel);
        //return false;
    })
});
</script>

<script>
$(document).ready(function () {
    $('body').on('click', '[id^="remove"]', function (event) {
        event.preventDefault();
        //alert('remove'+);
        var idqu = $(this).attr('id').replace("remove", "");
        var iddel = $(this).attr('data-id');
        //alert(iddel);

        removeb(idqu,iddel);
        //return false;
    })
});
</script>

<script>
$(document).ready(function () {
    $('body').on('click', '[id^="high"]', function (event) {
        event.preventDefault();
        //alert('high');
        var idqu = $(this).attr('id').replace("high", "");
        var iddel = $(this).attr('data-id');

        highb(idqu,iddel);
        //return false;
    })
});
</script>

<script>
$(document).ready(function () {
    $('body').on('click', '#removequest', function (event) {
        event.preventDefault();
        //alert('high');

        removequestb();
        //return false;
    })
});
</script>

<script>
$(document).ready(function () {
    $('body').on('click', '#removepoll', function (event) {
        event.preventDefault();
        //alert('high');

        removepollb();
        //return false;
    })
});
</script>

<script>
function activeb(idqu,iddel) {
console.log("activate is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:activate' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                idq : idqu,
                iddell : iddel,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            addquestionb();

            //alert('remove sent'+json.idq);
            //$('#id_question').val("");
            //addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }/*else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
function showresb(idqu,iddel) {
console.log("showres is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:showres' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                idq : idqu,
                iddell : iddel,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            addquestionb();

            //alert('remove sent'+json.idq);
            //$('#id_question').val("");
            //addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }/*else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
function removeb(idqu,iddel) {
console.log("remove is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:removequestion' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                idq : idqu,
                iddell : iddel,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            addquestionb();

            //alert('remove sent'+json.idq);
            //$('#id_question').val("");
            //addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }/*else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
function highb(idqu,iddel) {
console.log("remove is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:highquestion' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                idq : idqu,
                iddell : iddel,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            addquestionb();

            //alert('high sent'+json.idq);
            //$('#id_question').val("");
            //addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }/*else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
function thumbb(idqu,iddel) {
console.log("thumb is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:thumbquestion' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                idq : idqu,
                iddell : iddel,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            //alert('thumb sent'+json.idq+json.result);
            addquestionb();

            if (json.result2 == 1) {
                alert(json.result);
            }
            //$('#id_question').val("");
            //addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }/*else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
function removepollb() {
console.log("removepoll is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:removeallpoll' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                //idq : idqu,
                //iddell : iddel,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            //alert('remove all sent');
            $("#removepoll").remove();
            addquestionb();
            //$('#id_question').val("");
            //addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }/*else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

<script>
function removequestb() {
console.log("removequest is working!");// sanity check
//console.log($('.divpeop').last().attr('id'));//thisObj.closest("div").find('.divpeop').val());
$.ajax({
    url : "{% url 'my_app:removeallquestion' %}",//, // the endpoint
    type : "POST", // http method
    data : {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                //idq : idqu,
                //iddell : iddel,
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console
        //var source = $("#result-template").html();
        //alert(json.title)
        //$(document.body).append(html);
        //$("p[id='nb']").text('');

        //lert(json.nbplive);
        if (json.success) {
            //alert('remove all sent');
            $("#removequest").remove();
            addquestionb();
            //$('#id_question').val("");
            //addquestionb();
            //$("#nb").append("Number of registered participants in the conference room: <span style='color: #a41515'>"+json.nbplive+"</span>");
        }/*else{
            if(json.noq){
                alert('You may want to write a question before sending it, right?');
            }
        }*/

        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>



<script>
    var modalDivq = $("#modal-divqaa");
    $(function () {
     $(document).on('click', '[data-toggle="modalqaa"]', function () {
  //$('[data-toggle="modall"]').on('click', function() {
      //alert('open');
        $.ajax({
            url: $(this).attr("data-url"),
            success: function (data) {
                //alert('brah')
                modalDivq.html(data);
                $("#myEditpoll").modal();
            }
        });
  });
})

</script>

<script>
$(document).ready(function () {

    $('body').on('click', '#votebut', function (event) {
        event.preventDefault();
        votepollb($(this));
        //return false;
    })
});
</script>

<script>
    function votepollb(thisObj) {

        console.log("vote poll is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        var formclose=thisObj.closest("form");
        //alert(formclose.attr('id'));
        var values = formclose.serializeArray();

        console.log(values)

        /* Because serializeArray() ignores unset checkboxes and radio buttons: */
        values = values.concat(
                $("#"+formclose.attr('id')+" input[type=radio]:checked").map(
                        function() {
                            return {"name": this.name, "value": this.id}
                        }).get()
        );

        console.log(values)

        $.ajax({
            url : '/votepoll/', // the endpoint
            type : "POST", // http method
            data : {    //firstname : $('#id_firstname').val(),
                        formData: JSON.stringify(values),
                        //var item1 = $("#peopleemailid");
                        //alert(thisObj);
                        //var hidden_fields = thisObj.find('input:hidden');
                        //alert(hidden_fields);
                        //email : thisObj.closest("form").find('.pemail').val(),//$('#peopleemailid').val(),
                        //confnum : thisObj.closest("form").find('.pconfnum').val(),//$('#confnumid').val(),
                        //idarg : thisObj.closest("form").attr('id'),//$('#idarg').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {

                if(json.success){
                    console.log(json);
                    //alert('Your vote was accounted for, thank you!')
                    thisObj.prop("disabled",true);
                    thisObj.html('Already voted');
                }else{
                    if(json.miss){
                        alert('You need to pick one choice before voting!');
                    }
                    if(json.already){
                        alert('You have already voted for this poll!');
                    }
                }


            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
</script>


    <script>
        var int;

function openNav() {
    //alert(document.getElementById("mySidenav").style.width);
    if(  document.getElementById("mySidenav").style.width == "400px"){
        document.getElementById("mySidenav").style.width = "0";
        document.getElementById("main").style.marginRight= "40px";
        //$(".resp-iframe2").css('height', '80%');
          clearInterval(int);
    }else {
        //alert('else');
        document.getElementById("mySidenav").style.width = "400px";
        document.getElementById("main").style.marginRight = "400px";
        document.getElementById("mySidenavsch").style.zIndex = "29";
        document.getElementById("mySidenav").style.zIndex = "30";





        //document.getElementById("inlineFrameExample").style.height = "90%";

        //$(".resp-iframe2").css('height', '100%');
        /*$(".container").css('width', '100%');
        $(".container").css('padding-left', '0');
        $(".container").css('margin-left', '0');
        $(".container").css('padding-right', '0');
        $(".container").css('margin-right', '0');*/

        addquestionb(init = 1);
        $('#newqp').hide();

        //alert('hj');
        var time = 1000 * 10;

        int = setInterval("addquestionb()", time);
    }
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  document.getElementById("main").style.marginRight= "40px";
          clearInterval(int);

}
</script>

<script>
//var int;

function openNavsch() {
    //alert(document.getElementById("mySidenav").style.width);
    if(  document.getElementById("mySidenavsch").style.width == "400px"){
        document.getElementById("mySidenavsch").style.width = "0";
        document.getElementById("main").style.marginRight= "40px";
        //$(".resp-iframe2").css('height', '80%');
          //clearInterval(int);
    }else {
        //alert('else');
        document.getElementById("mySidenavsch").style.width = "400px";
        document.getElementById("main").style.marginRight = "400px";
        //document.getElementById("inlineFrameExample").style.height = "90%";
        document.getElementById("mySidenav").style.zIndex = "29";
        document.getElementById("mySidenavsch").style.zIndex = "30";
        //$(".resp-iframe2").css('height', '100%');
        /*$(".container").css('width', '100%');
        $(".container").css('padding-left', '0');
        $(".container").css('margin-left', '0');
        $(".container").css('padding-right', '0');
        $(".container").css('margin-right', '0');*/

        calculatescheduleb();

        //addquestionb(init = 1);
        //$('#newqp').hide();

        //alert('hj');
        //var time = 1000 * 10;

        //int = setInterval("addquestionb()", time);
    }
}

function closeNavsch() {
  document.getElementById("mySidenavsch").style.width = "0";
  document.getElementById("main").style.marginRight= "40px";
          //clearInterval(int);

}
</script>

{% endif %}

        <script>
$(document).ready(function(){
  $('[data-toggle="tooltip"]').tooltip({trigger : 'hover'});
});
</script>

<script>
$(document).ready(function () {

    $('body').on('click', '#ranpos', function (event) {
        //event.preventDefault();
        //alert($(this).attr('data-url'));
        //$(this).attr('data-url')
        max={{ idposters|length }};
        max=max-1;
        min=0;
        var rannum = Math.floor(Math.random() * (max - min + 1)) + min;

        var fu = $('#ranpos');
        var idtoshow = JSON.parse(JSON.stringify({{ idposters }}));

        //alert('id'+idtoshow+' '+idtoshow[rannum]+' '+rannum);
        //var idqu = idtoshow.replace("112", "");
        fu[0].dataset.url = "/posters/"+idtoshow[rannum];

    });
})
</script>

    <script>
    var modalDiv3 = $("#modal-div3");
     $(function () {
      $(document).on('click', '[data-toggle="modall3"]', function() {
          //alert('open');
            $.ajax({
                url: $(this).attr("data-url"),
                success: function (data) {
                    //alert('brah')
                    modalDiv3.html(data);
                    $("#myEdit3").modal();
                }
            });
      });
    })
</script>

    <script>

    $(document).ready(function() {
    //$('.more').on('click', '.more', function(e){
    //$(document.body).on('click','.more', function(e) {;

  $('.more').click(function(e) {
      //alert('r');
    e.preventDefault();
    var thisSib = $(this).prevAll(".fulltext");/*.next("p");*/
    //alert('thi'+thisSib);

    var thisSib2 = $(this).prevAll(".shorttext");
    thisSib2.hide();

    if (thisSib.css('display') == 'none'){
        thisSib.show();
        thisSib2.hide();
        $(this).html('<i class="fas fa-caret-up"></i> READ LESS');
    }else{
        thisSib2.show();
        thisSib.hide();
        $(this).html('<i class="fas fa-caret-down"></i> READ MORE');
    }

  });

});

</script>

    <script>

    $(document).ready(function() {
    //$('.more').on('click', '.more', function(e){
    $(document.body).on('click','.more2', function(e) {;

  //$('.more').click(function(e) {
      //alert('r');
    e.preventDefault();
    var thisSib = $(this).prevAll(".fulltext");/*.next("p");*/
    //alert('thi'+thisSib);

    var thisSib2 = $(this).prevAll(".shorttext");
    thisSib2.hide();

    if (thisSib.css('display') == 'none'){
        thisSib.show();
        thisSib2.hide();
        $(this).html('&nbsp;<small>(<i class="fas fa-caret-up"></i> less?)</small>');
    }else{
        thisSib2.show();
        thisSib.hide();
        $(this).html('&nbsp;<small>(<i class="fas fa-caret-down"></i> more?)</small>');
    }

  });

});

</script>

<script>
    $('#myTab a[href="#chatroom"]').on('show.bs.tab', function (e) {
                 //scheduler.setCurrentView();

        //alert('ok'+$('#inlineFrameExample2').length);
        if ($('#inlineFrameExample2').length == 0) {
            $('#mainchat').append('<div class="resp-container2">\n' +
                '                    <iframe class="resp-iframe2" id="inlineFrameExample2" frameBorder="0"\n' +
                '                        title="CarbonFreeChat"\n' +
                '                        src="https://chat.carbonfreeconf.com/home?resumeToken={{ resumetoken }}"\n' +
                '                        allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true" allow="microphone; camera;">\n' +
                '                    </iframe>\n' +
                '                </div>')

        }
        });
</script>

    <script>
    $('#myTab a[href="#qaa"]').on('show.bs.tab', function (e) {
            loadoldqaab();
        });
    </script>
    <script>
    $(document).ready(function () {

        $('body').on('click', '#updqaa', function (event) {
            event.preventDefault();
            loadoldqaab();
            $("#updateload").append("...");

            //return false;
        })
    });

    </script>
<script>

    function loadoldqaab() {

        //alert('ok');
        $.ajax({
            url: "/loadoldqaa/",//"
            type: "POST", // http method
            //if(/Firefox[\/\s](\d+)/.test(navigator.userAgent) && new Number(RegExp.$1) >= 4)
            //{
            //async: datam.async,
            //}
            data: {    //title : $('#id_title').val(),
                //loopnum : $('.divpeop').last().attr('id'),
                confnum: {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
            }, // data sent with the post request

            // handle a successful response
            success: function (json) {
                $("#qandpol").text('');
                //console.log(json); // log the returned json to the console
                //var source = $("#result-template").html();
                //alert(json.title)
                //$(document.body).append(html);
                //$("#qandpol").append('<p>OK</p>');
                var source = $("#result-template-qaa").html();
                //console.log(source);
                var template = Handlebars.compile(source);
                //console.log(template);

                // The 'template' function returns the rendered HTML
                //var diva = template({results: json});
                var context = json;
                //console.log(context);

                //diva.appendTo("body");
                //document.getElementById('test').innerHTML = diva;
                var html = template(context);
                $("#qandpol").append(html);
                $("#updateload").text('');
                //$("#qandpol").append("<p>Cool</p>");
                //alert('success');
                //console.log("success"+html); // another sanity check
            },

            // handle a non-successful response
            error: function (xhr, errmsg, err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: " + errmsg +
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    }

        //});
</script>

    {% if conftopass.activateqandp %}
        {% verbatim %}
        <script type="text/x-handlebars-template" id="result-template-qaa">
            {{#ifCond polls '==' "" }}
                {{#ifCond questions '==' "" }}
                        <h5 class="mt-2 mb-4">Questions and Polls asked during the conference will be visible here once they are removed from the currently active Questions & Polls.</h5>
                {{/ifCond}}
            {{/ifCond}}
            {{#ifCond polls '!=' "" }}
                <h4 class="mb-4 mt-2"><strong>Polls created</strong></h4>
                    {{#each p}}
                        <p style="text-align : left;{{#ifCond @index '!=' 0 }}margin-top: 3cm;{{/ifCond}}"><strong>Poll {{inc @index}}:</strong> {{ this.question }} (by {{#ifCond this.anonymous '==' true }}Anonymous{{/ifCond}}{{#ifCond this.anonymous '!=' true }} {{#with (lookup ../pusers @index) as |pu|}} {{ pu }} {{/with}} {{/ifCond}} - {{#with (lookup ../pcreated @index) as |pcrea|}} {{ pcrea }} {{/with}} - Total votes: {{#with (lookup ../qp_votetotal @index) as |votetot|}} {{ votetot }}{{/with}})</p>

                        {{#ifCond p.pollimage '!=' "" }}
                            <p>{{#with (lookup ../purl @index) as |purl|}} <a href="{{ purl }}" data-fancybox="images" data-caption="<strong>Poll image for:</strong> {{ ../this.question }}"><img src="{{ purl }}" loading="lazy" alt="Poll image" style="width:300px!important;" class="mb-3"></a>{{/with}}</p>
                        {{/ifCond}}

                    {{ pindex }}
                    {{#with (lookup ../qp_choices @index) as |qpchoi|}}
                    {{#each qpchoi}}
                        <p {{#ifCond @index '!=' 0 }}class="mt-5"{{/ifCond}} style="text-align : left;"><strong>{{ inc @index }})</strong> {{ this }} ({{#with (lookup ../../../qp_votetot @../index) as |qpvt|}}{{#with (lookup qpvt @index) as |qpvt2|}}{{pluralCount qpvt2 'vote'}}{{/with}}{{/with}}) <span style="color:#FF9933"><strong>{{#with (lookup ../../../qp_voteper @../index) as |qpvtper|}}{{#with (lookup qpvtper @index) as |qpvtper2|}}{{ qpvtper2 }}{{/with}}{{/with}}%</strong></span></p>
                        <div class="mb-3" style="background:{{#with (lookup ../../../qp_max @../index) as |qpvtmax|}}{{#with (lookup qpvtmax @index) as |qpvtmax2|}}{{#ifCond qpvtmax2 '==' 1 }}#33cccc;{{/ifCond}}{{#ifCond qpvtmax2 '!=' 1 }}#d9d9d9;{{/ifCond}}{{/with}}{{/with}} border: 1px solid #AD8346; height: 12px; width: {{#with (lookup ../../../qp_voteper @../index) as |qpvtper|}}{{#with (lookup qpvtper @index) as |qpvtper2|}}{{ qpvtper2 }}{{/with}}{{/with}}%; display:inline-block;float:left;"></div>
                    {{/each}}
                    {{/with}}
                    <hr style="border-top: 2px dotted black;margin-top: 3cm;">
                    {{/each}}
            {{/ifCond}}
            {{#ifCond polls '==' "" }}
                <p><strong>No past polls exist yet</strong></p>
            {{/ifCond}}
            {{#ifCond questions '!=' "" }}
            <h4 class="mb-4 {{#ifCond polls '==' "" }}mt-2{{/ifCond}}" {{#ifCond polls '!=' "" }}style="margin-top: 3cm;"{{/ifCond}}><strong>Questions asked</strong></h4>

            {{#each q}}

            <p><strong>{{ inc @index }})</strong> {{ this.question }} (by {{#ifCond this.anonymous '==' true }}Anonymous{{/ifCond}}{{#ifCond this.anonymous '!=' true }} {{#with (lookup ../qusers @index) as |qu|}} {{ qu }} {{/with}} {{/ifCond}} - {{#with (lookup ../voteq @index) as |vu|}} {{pluralCount vu 'vote'}} {{/with}} - {{#with (lookup ../qcreated @index) as |qcrea|}} {{ qcrea }}{{/with}})</p>

            {{/each}}

            {{/ifCond}}
            {{#ifCond questions '==' "" }}
                <p><strong>No past questions exist yet</strong></p>
            {{/ifCond}}

        </script>
        {% endverbatim %}

        {% comment %}


            {% if questions %}
                <h4 class="mb-4 {% if not polls %}mt-2{% endif %}" {% if polls %}style="margin-top: 3cm;"{% endif %}><strong>Questions asked</strong></h4>
                {% for qu in q %}
                    <p {% if forloop.last %}class="mb-4"{% endif %}><strong>{{ forloop.counter }})</strong> {{ qu.question }} (by {% if qu.anonymous %}Anonymous{% else %}{{ qu.user.first_name }} {{ qu.user.last_name }}{% endif %} - {{ voteq|index:forloop.counter0 }} vote{{ voteq|index:forloop.counter0|pluralize:",s" }} - {{ qu.created }})</p>
                {% endfor %}
            {% else %}
                <p><strong>No questions have been asked yet</strong></p>
            {% endif %}
{% endcomment %}
            {% endif %}

            <script>
    function calculatescheduleb() {
        //console.log("zoom is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/calculateschedule/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                //alert('f'+json.starturl)
                //window.open(json.starturl, '_blank');
                $("#sch").text('');
                $("#pream").text('');

                if (json.multi) {
                    $("#pream").append('<small><strong>{% trans "Here you can consult the immediate program"%}</strong> {% trans "(it shows participations that start or end one hour ahead of now," %} ' + json.printnow + ', {% trans "or two hours after) - participations in other sessions appear under orange bars." %}</small>');
                }else{
                    $("#pream").append('<small><strong>{% trans "Here you can consult the immediate program"%}</strong> {% trans "(it shows participations that start or end one hour ahead of now" %} - ' + json.printnow + ' - {% trans "or two hours after)" %}.</small>');
                }
                var source = $("#result-template-sch").html();
                console.log(source);
                var template = Handlebars.compile(source);
                console.log(template);

                // The 'template' function returns the rendered HTML
                //var diva = template({results: json});
                var context = json;
                console.log(context);

                //diva.appendTo("body");
                //document.getElementById('test').innerHTML = diva;
                var html = template(context);
                $("#sch").append(html);
                console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

    {% verbatim %}
        <script type="text/x-handlebars-template" id="result-template-sch">

        {{#ifCond text '!=' ""}}
            {{#each text}}
        <div style="width: 100%;">
            {{#with (lookup ../othersession @index) as |os|}}<div style="border-top: 6px solid {{#ifCond  os '!=' "1"}}purple;{{/ifCond}}{{#ifCond  os '==' "1"}}orange;{{/ifCond}} width: 100%;margin-top: 8px;"></div>{{/with}}
        {{#with (lookup ../othersession @index) as |os|}}{{#ifCond  os '==' "1"}}{{#with (lookup ../../sessionname @index) as |sn|}}{{#with (lookup ../../../joinurl @index) as |jurl|}}<p><small>In another session: {{sn}} - <span><a href="/join-conference/{{jurl}}" style="color: #a41515">Join now</a></span></small></p>{{/with}}{{/with}}{{/ifCond}}{{/with}}

        <p class="mt-3">{{#with (lookup ../important @index) as |imp|}}{{#ifCond imp '==' true}}<i class="far fa-star" style="color: red;"></i> {{/ifCond}}{{/with}}<small>{{#with (lookup ../start @index) as |start|}}{{ start }}{{/with}}-{{#with (lookup ../end @index) as |end|}}{{ end }}{{/with}}:</small><strong> {{ this }}</strong> {{#with (lookup ../speaker @index) as |spea|}}{{#ifCond speaker '!=' "" }} by <strong>{{ spea }}</strong>{{/ifCond}}{{/with}} <small>({{#with (lookup ../type @index) as |type|}}{{ type }}{{/with}}{{#with (lookup ../notpart @index) as |notpart|}}{{#ifCond notpart '==' true }} - not part of this meeting{{/ifCond}}{{/with}})</small></p>
                    <div class='shorttext'><span>{{#with (lookup ../truncabs @index) as |tabs|}}{{#ifCond  tabs '!=' ""}}<small>Abstract: {{ tabs }}</small>{{/ifCond}}{{/with}}</span></div>
                    <div class='fulltext' style="display: none;"><span>{{#with (lookup ../abstract @index) as |abs|}}{{#ifCond  abs '!=' ""}}<small>Abstract: {{ abs }}</small>{{/ifCond}}{{/with}}</span></div>

            {{#with (lookup ../truncabs @index) as |tabs2|}}{{#with (lookup ../../abstract @index) as |abs2|}}{{#ifCond  tabs2 '!=' abs2}} <a href="#" class="more2" style="color: black;">&nbsp;<small>(<i class="fas fa-caret-down"> </i> more?)</small></a>{{/ifCond}}{{/with}}{{/with}}

                {{#if @last}} {{#with (lookup ../othersession @index) as |os|}}<div style="border-top: 6px solid {{#ifCond  os '!=' "1"}}purple;{{/ifCond}}{{#ifCond  os '==' "1"}}orange;{{/ifCond}} width: 100%;margin-top: 8px;"></div> {{/with}}{{/if}}
        </div>
            {{/each}}
        {{/ifCond}}
        {{#ifCond text '==' ""}}
            <p class="mt-3">The program is empty for the current period.</p>
        {{/ifCond}}


        </script>
        {% endverbatim %}

    {% if roleq == 1 %}
    <script>
    $(document).on('change','#confmin-select',function(){
        //alert( $(this).find("option:selected").attr('value') );
        $.ajax({
            url : '/minleft/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        minleft: $(this).find("option:selected").attr('value'),
                        togglesound: $("#unmuteButton").is(':checked'),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');hj

                if(json.success) {
                    $('#wait').append('<div class="spinner-border text-primary ml-2" role="status">\n' +
                        '  <span class="sr-only">Loading Timeline...</span>\n' +
                        '</div>');
                }else{
                    $('#wait').text('');
                    $('#wait').append('<span style="color:red;">Activate sound notifications by toggling the switch above first!</span>')
                }
                console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
          });
    </script>
{% endif %}

    <script>
function checkfornewmin() {

$.ajax({
    url : '/checkmin/',
    type : "POST", // http method
    data : {
                confnum : {{ confnum }},//$('#confnumid').val(),
                csrfmiddlewaretoken:'{{ csrf_token }}',
            }, // data sent with the post request

    // handle a successful response
    success : function(json) {

        console.log(json); // log the returned json to the console

        //lert(json.nbplive);
        if(json.success) {
            //alert('y');
            //tnow=new Date($.now());
            //var formatted = tnow.getHours() + ":" + tnow.getMinutes() + ":" + tnow.getSeconds();

            if(json.minleft==100){
                $('#wait').text(json.namemod+' warns the speaker: No time left (at '+json.minleftcreated+')');
            }else {
                $('#wait').text(json.namemod + ' warns the speaker: ' + json.minleft + ' min left (at ' + json.minleftcreated + ')');
            }
            if ($("#unmuteButton").is(':checked')) {
                url='{% static "sounds/" %}';
                url=url+json.minleft+'.mp3';
                //alert('u'+url);
                //var audio = new Audio('/static/sounds/'+json.minleft+'.mp3');
                var audio = new Audio(url);
                audio.play();
            }/*else{
                alert('u');
            }*/
            //var audio = new Audio('/static/sounds/'+json.minleft+'.mp3');
            //let audioEl = document.createElement('audio');
            //audioEl.src = audioData;
            //let audioBtn = document.createElement('button');
            //audioBtn.addEventListener('click', () => audio.play(), false);
            //let event = new Event('click');
            //audioBtn.dispatchEvent(event);
            //audio.play();
        }



        console.log("success"); // another sanity check
    },

    // handle a non-successful response
    error : function(xhr,errmsg,err) {
        $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
            " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
});
};
</script>

    <script>
var intc;
$(document).ready(function ($) {
    //checkfornewqandpb();
    //checkfornewmin();
    $('#unmuteButton').on('change', function (e) {

        if ($("#unmuteButton").is(':checked')) {
            var timec = 1000 * 10;
            intc = setInterval("checkfornewmin()", timec);
            //alert(intc);
        }else{
            //alert('i:'+intc);
            clearInterval(intc);
        }
    });
});
</script>


<script>
    var myEle2 = document.getElementById("unmuteButton");
    if(myEle2){
  unmuteButton.addEventListener('click', function() {
    //video.muted = false;
      if ($(this).is(':checked')) {
            //var audio = new Audio('/static/sounds/sa.mp3');
            var audio = new Audio('{% static "sounds/sa.mp3" %}');
            audio.play();
      }else{
            var audio = new Audio('{% static "sounds/sd.mp3" %}');
            audio.play();
            //audio.muted = true;
            //[].slice.call(document.querySelectorAll('audio')).forEach(function(audio) {
            //audio.muted = true;
            //});

      }


  });
}
</script>

            {% if request.GET.cb == '1' and conftopass.coffeebreakgames or roleq == 1 %}

    <script src="https://cdn.jsdelivr.net/npm/rxjs@6.6.2/bundles/rxjs.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/convergence@latest/convergence.global.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@convergence/string-change-detector/browser/string-change-detector.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/input-element-bindings@0.5.0/dist/umd/convergence-input-element-bindings.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/html-text-collab-ext/umd/html-text-collab-ext.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@convergence/color-assigner/umd/color-assigner.js"></script>
    <script>
        //const CONVERGENCE_URL = "http://localhost:3000/api/realtime/convergence/default";
        const CONVERGENCE_URL = "https://conv.carbonfreeconf.com/api/realtime/convergence/default";
    </script>
    {% if request.GET.cb == '1' and conftopass.coffeebreakgames %}
        <script src="{% static 'js/convergence.js' %}" idconv="{{ conftopass.id }}" usern="" language="JavaScript" charset="utf-8"></script>
    {% endif %}
    {% if roleq == 1 %}
        <script src="{% static 'js/convergencemod.js' %}" idconv="{{ conftopass.id }}mod" usern="{{ user.get_full_name }}" language="JavaScript" charset="utf-8"></script>
    {% endif %}

    {% endif %}


     <script>
    function loadtimelineb() {
        console.log("timeline is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/apitimeline/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                //alert('f'+json.starturl)
                //window.open(json.starturl, '_blank');
                //$("#sch").text('');
                var container = document.getElementById('visualization');

                      // note that months are zero-based in the JavaScript Date object
                      /*var items = new vis.DataSet([
                        {start: new Date(2010,7,23,22.5,0,0), content: '<div>Conversation</div><img src="{% static 'img/avatar-1.jpg' %}" width="30px"><div><small>Quentin Kral</small></div>'},
                        {start: new Date(2010,7,23,23,0,0), content: '<div>Mail from boss</div><img src="{% static 'img/avatar-2.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,16,0,0), content: 'Report'},
                        {start: new Date(2010,7,24,17,0,0), end: new Date(2010,7,24,18,0,0), content: 'Traject A'},
                        {start: new Date(2010,7,24,18,0,0), content: '<div>Memo</div><img src="{% static 'img/avatar-3.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,19,0,0), content: '<div>Phone call</div><img src="{% static 'img/avatar-1.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,20,0,0), end: new Date(2010,7,24,21,0,0), content: 'Traject B'},
                        {start: new Date(2010,7,24,21,0,0), content: '<div>Report</div><img src="{% static 'img/avatar-2.jpg' %}" width="30px">'}
                      ]);*/

                      //str.replace(/^"|"$/g, '');
                      var items2=new vis.DataSet(JSON.parse(json.timelineinput));
                      //var items2=new vis.DataSet([{start:"2021-07-30 10:00:00",content:'ok'}]);

                      //console.log(JSON.parse(json.timelineinput));

                      var options = {
                        start: new Date(),/*to start on today's date*/
                        end: new Date(1000*60*60*6 + (new Date()).valueOf()),/*show only today*/
                        loadingScreenTemplate: function() {
                          return '<br><br><h2>Loading...</h2>'
                        },
                        editable: false,//true if want to allow to move position and size
                        margin: {
                          item: 20,
                          axis: 40
                        }
                      };

                  var timeline = new vis.Timeline(container, items2, options);

                  $('#day-select').change(function(){
                      var parts = $(this).val().split("-");
                      var dt = new Date(
                        parseInt(parts[0], 10),      // year
                        parseInt(parts[1], 10) - 1,  // month (starts with 0)
                        parseInt(parts[2], 10)       // date
                      );
                      dt.setDate(dt.getDate() + 1);
                      parts[0] = "" + dt.getFullYear();
                      parts[1] = "" + (dt.getMonth() + 1);
                      if (parts[1].length < 2) {
                        parts[1] = "0" + parts[1];
                      }
                      parts[2] = "" + dt.getDate();
                      if (parts[2].length < 2) {
                        parts[2] = "0" + parts[2];
                      }
                      //alert($(this).val()+' '+parts.join("-"));

                    timeline.setWindow($(this).val(), parts.join("-"));
                })

                  function move(percentage) {
                  var range = timeline.getWindow();
                  var interval = range.end - range.start;
                  timeline.setWindow({
                    start: range.start.valueOf() - interval * percentage,
                    end: range.end.valueOf() - interval * percentage
                  });
                }

                // attach events to the navigation buttons
                document.getElementById("moveLeft").onclick = function() {
                  move(0.2);
                };
                document.getElementById("moveRight").onclick = function() {
                  move(-0.2);
                };

                // Using slider to zoomIn or zoomOut
                document.getElementById("sliderZoom").addEventListener("input", function(e) {
                  var value = this.value;
                  if (value < 0) {
                    var start = moment().year(moment().year() - 100000), // to adjust with options
                      end = moment().year(moment().year() + 1);
                    timeline.zoomOut(-value);
                    //if (value === "-1") timeline.setWindow(start, end);
                  } else if (value > 0) {
                    var start = moment(), end = moment(moment().utc() + 10);
                    timeline.zoomIn(value);
                    /*if (value === "1") {
                        //alert(start + ' ' + end);
                        timeline.setWindow(start, end);
                    }*/
                  } else {
                    timeline.fit(items2.getIds());
                    this.value = 0;
                  }
                });

                // To reset zoom initial state
                document.getElementById("fit").onclick = function() {
                  //$('.range').next().text('0'); // set default if to use output with input range
                  document.getElementById("sliderZoom").value = 0;
                  timeline.fit(items2.getIds());
                };

                //console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

         <script>
    function loadnetworkb() {
        console.log("network is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/apinetwork/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('suc');
                  var DIR = "{% static 'img/' %}";

                  var nodes = null;
                  var edges = null;
                  var network = null;

                  // Called when the Visualization API is loaded.
                  //function draw() {
                    // create people.
                    // value corresponds with the age of the person
                    //var DIR = "../img/indonesia/";
                  //var nodess = new vis.DataSet();

                  var nodes=JSON.parse(json.networkinput);

                  // create connections between people
                  // value corresponds with the amount of contact between two people
                  var edges=JSON.parse(json.networkedge);



                    // create a network
                    var container = document.getElementById("mynetwork");
                    var data = {
                      nodes: nodes,
                      edges: edges,
                    };
                    var options = {
                      autoResize: true,
                      interaction: { selectable: true,hover:true, navigationButtons: true},
                      physics: {
                        barnesHut: {
                          springConstant: 0.004,
                          avoidOverlap: 0.7,
                        },
                      },
                      width: "100%",
                      height: "100%",
                      nodes: {
                        borderWidth: 2,
                        borderWidthSelected: 8,
                        size: 24,
                        color: {
                          border: "white",
                          background: "black",
                          highlight: {
                            border: "black",
                            background: "white",
                          },
                          hover: {
                            border: "orange",
                            background: "grey",
                          },
                        },
                        font: { color: "#eeeeee" },
                        shapeProperties: {
                          useBorderWithImage: true,
                        },
                      },
                      edges: {
                        color: "lightgray",
                      },
                    };
                    //var nodee = data.nodess.get( 0 );
                    //alert('no'+nodee);
                    var network = new vis.Network(container, data, options);

                    //network.on('click', onClick);
                    network.on("click", function (params) {onClick(params,this)});

                    //network.on('doubleClick', onDoubleClick);
                    network.on("doubleClick", function (params) {onDoubleClick(params,this)});

                    var doubleClickTime = 0;
                    var threshold = 200;

                    function onClick(params,t) {
                        var t0 = new Date();
                        if (t0 - doubleClickTime > threshold) {
                            setTimeout(function () {
                                if (t0 - doubleClickTime > threshold) {
                                    doOnClick(params,t);
                                }
                            },threshold);
                        }
                    }

                    function doOnClick(params,t) {
                        //console.log("execute onClick function");
                        if (params.nodes.length === 1) {
                            //alert('p'+this.body.nodes[params.nodes[0]].options.url);
                            //alert('ps'+nodes2.get( 1 ));
                            //var node = nodess.get(params.nodes[0]);
                            //var node = nodes.get(0);
                            var nodeurl = t.body.nodes[params.nodes[0]].options.url;
                            //var node = nodes.get(params.nodes[0]);
                            //alert('n'+nodeurl);
                            if (typeof nodeurl !== 'undefined'){
                                window.open(nodeurl, '_blank');
                            }
                        }
                    }

                    function onDoubleClick(params,t) {
                        doubleClickTime = new Date();
                        //console.log("execute onDoubleClick function");
                        if (params.nodes.length === 1) {
                            //alert('p'+this.body.nodes[params.nodes[0]].options.url);
                            //alert('ps'+nodes2.get( 1 ));
                            //var node = nodess.get(params.nodes[0]);
                            //var node = nodes.get(0);
                            var nodeurl = t.body.nodes[params.nodes[0]].options.url2;
                            //var node = nodes.get(params.nodes[0]);
                            //alert('n'+nodeurl);
                            if (typeof nodeurl !== 'undefined') {
                                window.open(nodeurl, '_blank');
                            }
                        }
                    }

                    network.on("hoverNode", function (params) {
                            network.canvas.body.container.style.cursor = 'pointer'
                     });

                    network.on("blurNode", function (params) {
                            network.canvas.body.container.style.cursor = 'default'
                     });

                    network.on("stabilizationProgress", function (params) {
                    var maxWidth = 496;
                    var minWidth = 20;
                    var widthFactor = params.iterations / params.total;
                    var width = Math.max(minWidth, maxWidth * widthFactor);

                    document.getElementById("bar").style.width = width + "px";
                    document.getElementById("text").innerText =
                      Math.round(widthFactor * 100) + "%";
                  });
                  network.once("stabilizationIterationsDone", function () {
                    document.getElementById("text").innerText = "100%";
                    document.getElementById("bar").style.width = "496px";
                    document.getElementById("loadingBar").style.opacity = 0;
                    // really clean the dom element
                    setTimeout(function () {
                      document.getElementById("loadingBar").style.display = "none";
                    }, 500);
                  });

                    var height = Math.round(window.innerHeight * 0.80) + 'px';     // The DOM way

                    // Now, resize the container (and not the canvas)
                    document.getElementById('mynetwork').style.height = height;

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

    <script>
        var timelineload=0;
        //console.log('1'+timelineload)
            $('#timeline-tab').on('shown.bs.tab', function (e) {
                if (timelineload == 0) {

                    //alert('th');
                    loadtimelineb();
                    //loadnetworkb();
                    timelineload = 1;
                    //console.log('2' + timelineload)
                }
            });

    </script>
    <script>
        var graphload=0;
        //console.log('1'+timelineload)
            $('#graph-tab').on('shown.bs.tab', function (e) {
                if (graphload == 0) {

                    //alert('th');
                    loadnetworkb();
                    graphload = 1;
                    //console.log('2' + timelineload)
                }
            });

    </script>
{% endblock %}


{% load static %}
{% load crispy_forms_tags %}
{% load index %}
{% load el_pagination_tags %}
{% load thumbnail %}
{% load tz %}
{% get_current_timezone as TIME_ZONE %}
{% load i18n %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carbon-free virtual conference about: "{{ conftopass.title }}"</title>

  <meta name="description" content="Create a website for your virtual workshops in a few clicks. Example: {{ conftopass.title }}." />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@ConfFree">
  <meta name="twitter:title" content="Upcoming virtual conference">
  <meta name="twitter:description" content="Register to the upcoming carbon-neutral conference about: '{{ conftopass.title }}'.">
  <meta name="twitter:creator" content="@ConfFree">
  {% if conftopass.room_logo and imresizetw %}
  <meta name="twitter:image" content="{{ imresizetw }}">
  {% else %}
  <meta name="twitter:image" content="{% static 'images/logotwit.png' %}">
  {% endif %}
  <meta name="twitter:domain" content="www.carbonfreeconf.com">

  <meta property="og:url" content="www.carbonfreeconf.com/website/{{ confnum }}/home" />
  <meta property="og:type" content="article" />
  <meta property="og:title" content="Upcoming virtual conference" />
  <meta property="og:description" content="Register to the upcoming carbon-neutral conference about: '{{ conftopass.title }}'." />
  {% if conftopass.room_logo and imresizefb %}
  <meta property="og:image" content="{{ imresizefb }}" />
  {% else %}
  <meta property="og:image" content="{% static 'images/logotwit.png' %}" />
  {% endif %}
  <!--<meta property="og:image:width" content="450"/>
  <meta property="og:image:height" content="298"/>-->


  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-165944102-1', 'auto');
    ga('send', 'pageview');
  </script>
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!--
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RXZJH76KCR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-RXZJH76KCR');
  </script>-->

  <!-- Google fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap">

    <!-- Bootstrap CSS -->

    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <!--<link rel="stylesheet" type="text/css" href="{% static 'tellme/vendor/feedback/feedback.css' %}">-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" media="print" onload="this.media='all'">

    <!-- Custom styles for this template -->
    <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">

    <link rel="shortcut icon" href="{% static 'images/trainingred.svg' %}">

    <link rel="stylesheet" href="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler.css" type="text/css">




    <script src="https://cdn.dhtmlx.com/scheduler/edge/dhtmlxscheduler.js" type="text/javascript"></script>
    <script src="https://export.dhtmlx.com/scheduler/api.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.6/handlebars.min.js"></script>

    <!--<script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"></script>-->
    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


   <!-- <script
      src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
      integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
      crossorigin="anonymous"></script>-->
    <!------ Include the above in your HEAD tag ---------->

      <script>
        window.twttr = (function (d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
          if (d.getElementById(id)) return t;
          js = d.createElement(s);
          js.id = id;
          js.src = "https://platform.twitter.com/widgets.js";
          fjs.parentNode.insertBefore(js, fjs);

          t._e = [];
          t.ready = function (f) {
            t._e.push(f);
          };

          return t;
        }(document, "script", "twitter-wjs"));
      </script>

    <style>

        /* The switch - the box around the slider */
        #feedback-welcome{
            color:black;
        }

        #feedback-highlighter{
            color:black;
        }

        #feedback-overview{
            color:black;
        }

        #feedback-submit-success{
            color:black;
        }

        .switch {
          position: relative;
          display: inline-block;
          width: 50px;
          height: 28px;
          float:right;
        }

        /* Hide default HTML checkbox */
        .switch input {display:none;}

        /* The slider */
        .slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          -webkit-transition: .4s;
          transition: .4s;
        }

        .slider:before {
          position: absolute;
          content: "";
          height: 22px;
          width: 22px;
          left: 1px;
          bottom: 3px;
          background-color: white;
          -webkit-transition: .4s;
          transition: .4s;
        }

        input.default:checked + span {
          background-color: #444;
        }
        input.primary:checked + span {
          background-color: #2196F3;
        }
        input.success:checked + span {
          background-color: #8bc34a;
        }
        input.info:checked + span {
          background-color: #3de0f5;
        }
        input.warning:checked + span {
          background-color: #FFC107;
        }
        input.danger:checked + span {
          background-color: #f44336;
        }

        input:focus + span {
          box-shadow: 0 0 1px #2196F3;
        }

        input:checked + span:before {
          -webkit-transform: translateX(26px);
          -ms-transform: translateX(26px);
          transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
          border-radius: 34px;
        }

        .slider.round:before {
          border-radius: 50%;
        }

        /*
         * Globals
         */

        /* Links */
        a,
        a:focus,
        a:hover {
          color: #fff;
        }

        /* Custom default button */
        .btn-secondary,
        .btn-secondary:hover,
        .btn-secondary:focus {
          color: #333;
          text-shadow: none; /* Prevent inheritance from `body` */
          background-color: #fff;
          border: .05rem solid #fff;
        }


        /*
         * Base structure
         */


        html {
           height: 100%;
        }

        body {
           min-height: 100%;

        }

        .cover-container {
          max-width: 88em;
        }

        .resp-container-vid {
            position: relative;
            /*overflow: hidden;*/
            height: 600px;
            /*padding-top: 56.25%;*/
        }

       .resp-iframe-vid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /*
         * Header
         */
        .masthead {
          margin-bottom: 2rem;
        }

        .masthead-brand {
          margin-bottom: 0;
        }

        .nav-masthead .nav-link {

          font-size: 19px;

          padding: .25rem 0;
          font-weight: 700;
          background-color: transparent;
          border-bottom: .25rem solid transparent;
        }

        .nav-masthead .nav-link2 {

          font-size: 13px;

          padding: .25rem 0;
          font-weight: 500;
          background-color: transparent;
          border-bottom: .25rem solid transparent;
        }

        .nav-masthead .nav-link:hover{
          color: rgba(255, 255, 255, 1);
          border-bottom-color: rgba(155, 155, 155, .25);
        }

        .nav-masthead .nav-link:focus {
          color: rgba(255, 155, 155, 1);
          border-bottom-color: rgba(255, 155, 255, .25);
        }

        .nav-masthead .nav-link:active {
          color: rgba(155, 155, 155, 1);
          border-bottom-color: rgba(155, 255, 255, .25);
        }

        .nav-masthead .nav-link + .nav-link {
          margin-left: 1rem;
        }

        .nav-masthead .active {
          color: #fff;
          border-bottom-color: #fff;
        }

        @media (min-width: 48em) {
          .masthead-brand {
            float: left;
          }
          .nav-masthead {
            /*float: right;*/
          }
        }


        /*
         * Cover
         */
        .cover {
            padding: 1.0rem;

        }
        .cover .btn-lg {
          padding: .75rem 1.25rem;
          font-weight: 800;
        }

        .lead{
            font-size: 35px;

        }

        /*
         * Footer
         */
        .mastfoot {
            color: rgba(255, 255, 255, .5);
            position: absolute;
              bottom: 10px;
              width: 100%;
              /*height: 3.5rem;*/
        }

        .card-body,
        .card-text,
        .mailabs a {
            color: rgba(5, 5, 5, .9);

        }

        .list-group,
        .list-group a {
            display:inline-block;
            color: rgba(5, 5, 5, .9);

        }

        .btn-file {
            position: relative;
            overflow: hidden;
            }

        .btn-file input[type=file] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            font-size: 100px;
            text-align: right;
            filter: alpha(opacity=0);
            opacity: 0;
            outline: none;
            background: white;
            color:red;
            cursor: inherit;
            display: block;
        }

        .jconfirm-title {
            color: #f44336;

        }
        .jconfirm-content {
            color: rgba(5, 5, 5, .9);

        }

        .container2 {
          position: relative;
          width: 40%;
          left: 43%;
        }

        .image {
          opacity: 1;
          display: block;
          width: 40%;
          height: auto;
          transition: .5s ease;
          backface-visibility: hidden;

        }

        .middle {
          transition: .5s ease;
          opacity: 0;
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-100%, -50%);
          -ms-transform: translate(-50%, -50%);
          text-align: center;
        }

        .container2:hover .image {
          opacity: 0.3;
        }

        .container2:hover .middle {
          opacity: 1;
        }

        .text {
          background-color: #f44336;
          color: white;
          font-size: 16px;
          padding: 16px 32px;
        }

        .middle2 {
  transition: .5s ease;
  opacity: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  text-align: center;
}




.container3 {
  position: relative;
  /*width: 35%;*/
  left: 0;
}

.container3:hover .image3 {
  opacity: 0.3;
}

.container3:hover .middle2 {
  opacity: 1;
}

.image3 {
  opacity: 1;
  display: block;
  width: 100%;
  height: auto;
  transition: .5s ease;
  backface-visibility: hidden;

}

 #id_type {
     width: 160px;
     border: none;
     border-radius: 20px;
     outline: none;
     padding: 10px;
     font-family: 'Sniglet';/*, cursive;*/
     font-size: 1em;
     color: #676767;
     transition: border 0.5s;
     -webkit-transition: border 0.5s;
     -moz-transition: border 0.5s;
     -o-transition: border 0.5s;
     border: solid 3px #98d4f3;
     -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
     box-sizing: border-box;
 }
        textarea{
	width: 500px;
	border: none;
	border-radius: 20px;
	outline: none;
	padding: 10px;
	font-family: 'Sniglet';/*, cursive;*/
	font-size: 1em;
	color: #676767;
	transition: border 0.5s;
	-webkit-transition: border 0.5s;
	-moz-transition: border 0.5s;
	-o-transition: border 0.5s;
	border: solid 3px #98d4f3;
	-webkit-box-sizing:border-box;
	-moz-box-sizing:border-box;
	box-sizing:border-box;

}
input:focus, textarea:focus{
	border: solid 3px #77bde0;
}

textarea{
	height: 200px;
	resize: none;
	overflow: auto;
}

#id_title{
	height: 50px;
	resize: none;
	overflow: auto;
}
#id_biography{
	height: 100px;
	resize: none;
	overflow: auto;
}

.fileUpload {
    position: relative;
    overflow: hidden;
    margin: 10px;
}
.fileUpload input.upload {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    padding: 0;
    font-size: 20px;
    cursor: pointer;
    opacity: 0;
    filter: alpha(opacity=0);
}

@media (max-width: 800px) {
    .minlog{
        max-width: 300px;
    }
    .fbbut{
    display: inline;
    position: absolute;
    left: 5%;
    top: 0%;
    transform: translate(0%, -270%);
}
.twitbut{
    display: inline;
    position: absolute;
    left: 80%;
    top: 0%;
    transform: translate(0%, -235%);
}
}

@media (min-width: 800px) {
    .fbbut{
    display: inline;
    position: absolute;
    left: 20%;
    top: 50%;
    transform: translate(-50%, -185%);
}
.twitbut{
    display: inline;
    position: absolute;
    left: 80%;
    top: 50%;
    transform: translate(-50%, -150%);
}
}
    .card-body img {
    width: 150px!important;
    height: auto;
}

        .image3 img {
    width: 300px!important;
    height: auto;
    margin-top: 30px;
}

        #feedback {
	float: left;
	position: fixed;
	top: calc(50% - 47px);
	right: 0;
    z-index: 100;
}

#feedback a {
	background: #9AD4D6;
	border-radius: 5px 0 0 5px;
	box-shadow: 0 0 3px rgba(0, 0, 0, .3);
	border: 3px solid #fff;
	border-right: 0;
	display: block;
	padding: 20px 12px;
	transition: all .2s ease-in-out;
}

#feedback a:hover {
	padding-right: 20px;
}

        .modal-confirm {
	color: #636363;
	width: 400px;
}
.modal-confirm .modal-content {
	padding: 20px;
	border-radius: 5px;
	border: none;
	text-align: center;
	font-size: 14px;
}
.modal-confirm .modal-header {
	border-bottom: none;
	position: relative;
}
.modal-confirm h4 {
	text-align: center;
	font-size: 26px;
	margin: 30px 0 -10px;
}
.modal-confirm .close {
	position: absolute;
	top: -5px;
	right: -2px;
}
.modal-confirm .modal-body {
	color: #999;
}
.modal-confirm .modal-footer {
	border: none;
	text-align: center;
	border-radius: 5px;
	font-size: 13px;
	padding: 10px 15px 25px;
}
.modal-confirm .modal-footer a {
	color: #999;
}
.modal-confirm .icon-box {
	width: 80px;
	height: 80px;
	margin: 0 auto;
	border-radius: 50%;
	z-index: 9;
	text-align: center;
	border: 3px solid #f15e5e;
}
.modal-confirm .icon-box i {
	color: #f15e5e;
	font-size: 46px;
	display: inline-block;
	margin-top: 13px;
}
.modal-confirm .btn, .modal-confirm .btn:active {
	color: #fff;
	border-radius: 4px;
	background: #60c7c1;
	text-decoration: none;
	transition: all 0.4s;
	line-height: normal;
	min-width: 120px;
	border: none;
	min-height: 40px;
	border-radius: 3px;
	margin: 0 5px;
}
.modal-confirm .btn-secondary {
	background: #c1c1c1;
}
.modal-confirm .btn-secondary:hover, .modal-confirm .btn-secondary:focus {
	background: #a8a8a8;
}
.modal-confirm .btn-danger {
	background: #f15e5e;
}
.modal-confirm .btn-danger:hover, .modal-confirm .btn-danger:focus {
	background: #ee3535;
}
.colorsvg{
    /*filter: invert(0%) sepia(100%) saturate(0%) hue-rotate(21deg) brightness(97%) contrast(103%);*/
    filter: invert(100%) sepia(100%) saturate(0%) hue-rotate(21deg) brightness(118%) contrast(119%);
}

.card-columns {
   column-count: 2;
   /*column-fill: balance;*/
    /*column-gap: 15px;*/
    /*column-fill: auto;*/
}
.tuto a:focus,a:hover,a {
    color:black;
}

div.vis-tooltip {
    color:black!important;
    border: 3px solid #444444!important;
    background-color: #EEEEEE!important;;/*lightsteelblue!important;*/
    max-width:400px;
    white-space: normal!important;
}


    </style>

    <style>
      body {
        background-color: {{ conftopass.website.color_background }};
        color: {{ conftopass.website.color_text }};
      }

      .header {
        background-color: {{ conftopass.website.color_background }};
      }

      .upper-header,
      .footer {
        background-color: {{ conftopass.website.color_men }};
      }

      @media (max-width: 1024px) {
        .upper-header nav,
        .lower-nav-links {
          background-color: {{ conftopass.website.color_men }};
        }
      }
      
      .hamburger span {
        background-color: {{ conftopass.website.color_text }};
      }

      .list-group-item { /* bootstrap bs */
        /* background-color: {{ conftopass.website.color_background }}; */
      }

      .modal-xl { /* bootstrap bs */
        height: calc(100% - 100px);
        margin-top: 100px;
      }
      .modal-lg {
        margin-top: 100px;
      }
    </style>

    <link rel="stylesheet" type="text/css" href="{% static 'css/website.css' %}">

  {% if confnum %}
  <script>
    window.onload = function () {
      document.getElementById('mylink').onclick = function () {
        this.style.color = 'red';
        //window.open(...);
      }
    }
  </script>
  {% endif %}

  </head>
  
  <body class="text-center">


    <div id="modal-div"></div>
    <div id="modal-div3"></div>

    <div id="fb-root"></div>

    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_EN/sdk.js#xfbml=1&version=v8.0" nonce="FQvKqGSk"></script>

    {% if status == 5 %}
    <div class="cover-container d-flex h-100 flex-column">
      <h2>This website is not created yet</h2>
      <footer class="mt-auto">
        <div class="inner">
          <p style="color: {{ conftopass.website.color_men }};">Website created by <a class="navbar-brand" href="{% url 'my_app:home' %}">
            <img src={% static "images/carbonfreeconf_logo_title.svg" %} width="160" height="40" class="d-inline-block align-top" alt="">
            </a>
          </p>
        </div>
      </footer>
    </div>

    {% elif status == 6 %}
    <div class="cover-container d-flex h-100 flex-column">
      <h2>This website does not exist</h2>
      <!-- <div id="feedback" class="feed">
        <a href="#" id="feedback-btn">
          <svg height="110" width="25">
            <path transform="rotate(-90,55,52)"
              d="M17.657,2.982H2.342c-0.234,0-0.425,0.191-0.425,0.426v10.21c0,0.234,0.191,0.426,0.425,0.426h3.404v2.553c0,0.397,0.48,0.547,0.725,0.302l2.889-2.854h8.298c0.234,0,0.426-0.191,0.426-0.426V3.408C18.083,3.174,17.892,2.982,17.657,2.982M17.232,13.192H9.185c-0.113,0-0.219,0.045-0.3,0.124l-2.289,2.262v-1.96c0-0.233-0.191-0.426-0.425-0.426H2.767V3.833h14.465V13.192z M10,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.488-0.668,1.488-1.489C11.488,7.905,10.821,7.237,10,7.237 M10,9.364c-0.352,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C10.638,9.077,10.351,9.364,10,9.364 M14.254,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489s1.489-0.668,1.489-1.489C15.743,7.905,15.075,7.237,14.254,7.237 M14.254,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.352,0,0.639,0.287,0.639,0.638C14.893,9.077,14.605,9.364,14.254,9.364 M5.746,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.489-0.668,1.489-1.489C7.234,7.905,6.566,7.237,5.746,7.237 M5.746,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C6.384,9.077,6.096,9.364,5.746,9.364">
            </path>
            <text fill="#393D3F" transform="rotate(-90,50,32)" font-weight="bold">Feedback</text>
          </svg>
        </a>
      </div> -->

      <footer class="mt-auto">
        <div class="inner">
          <p style="color: {{ conftopass.website.color_men }};">Website created by <a class="navbar-brand"
              href="{% url 'my_app:home' %}">
              <img src={% static "images/carbonfreeconf_logo_title.svg" %} width="160" height="40"
                class="d-inline-block align-top" alt="">
            </a></p>
        </div>
      </footer>
    </div>

    {% else %}

    <header class="header">
      <div class="upper-header">
        <nav class="nav-links" id="r">
          <a id="mylink" href="{% url 'my_app:website' conftopass.id 'home' %}">{% trans 'Home' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'rationale' %}">{% trans 'Rationale' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'registration' %}">{% trans 'Participate' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'participants' %}">{% trans 'Participants' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'program' %}">{% trans 'Program' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'timeline' %}">{% trans 'Timeline' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'abstracts' %}">{% trans 'Abstracts' %}</a>
          {% if conftopass.poster %}
          <a href="{% url 'my_app:website' conftopass.id 'posters' %}">{% trans 'Posters' %}</a>
          {% endif %}
          {% if conftopass.website.showdoc %}
          <a href="{% url 'my_app:website' conftopass.id 'doc' %}">{% trans 'Documents' %}</a>
          {% endif %}
          <a href="{% url 'my_app:website' conftopass.id 'dates' %}">{% trans 'Dates' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'socloc' %}">{% trans 'Organizers' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'contact' %}">{% trans 'Contact' %}</a>
          {% if started and conftopass.recording %}
          <a href="{% url 'my_app:website' conftopass.id 'video' %}">{% trans 'Recordings' %}</a>
          {% endif %}
        </nav>
        <button class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
      <div class="lower-header">
        {% if conftopass.room_logo %}
        <img src="{{ conftopass.room_logo.url }}" alt="Small conference logo">
        {% else %}
        <img src="{% static 'images/carbonfreeconf_logo_title_orange.svg' %}" alt="CarbonFreeConf logo">
        {% endif %}
        <div class="lower-nav-links">
          {% if user.is_authenticated %}
          <a href="{% url 'my_app:joinconf' conftopass.id %}" target="_blank">{% trans 'Join the conference' %}</a>
          <a href="{% url 'my_app:website' conftopass.id 'registration' %}">{% trans 'Register to the conference' %}</a>
          <a href="https://chat.carbonfreeconf.com/home?resumeToken={{ resumetoken }}" target="_blank">{% trans 'Access chat room' %}</a> 
          <a href="{% url 'my_app:user_logout' 'website' conftopass.id %}">{% trans 'Logout' %} ({{ user.username }})</a>
            {% if talkcrea %}
            <a href="{% url 'my_app:website' conftopass.id 'mytalks' %}">{% trans 'My Participation' %}{{ talks|length|pluralize:",s" }}</a>
              {% if conftopass.fee or conftopass.feeunique %}
                {% if free %}
                <a href="{% url 'my_app:checkout_website' conftopass.id %}" type="submit">{% trans 'Free' %}</a>
                {% elif paid %}
                <a href="{% url 'my_app:checkout_website' conftopass.id %}" type="submit">{% trans 'Paid' %}</a>
                {% else %}
                <a href="{% url 'my_app:checkout_website' conftopass.id %}" type="submit">{% trans 'Pay' %}</a>
                {% endif %}
              {% endif %}
            {% endif %}
            {% if user in orguser %}
              <a href="#" id="adminpanel">{% trans 'See Admin Panel' %}</a>
            {% endif %}
          {% else %}
          <a class="btn" href="{% url 'my_app:website' conftopass.id 'signin' %}">{% trans 'Log-in' %}</a>
          {% endif %}
          {% get_current_language as LANGUAGE_CODE %}
          {% get_available_languages as LANGUAGES %}
          {% get_language_info_list for LANGUAGES as languages %}
          <span class="language">
            {% for lang in languages %}
            {% if '/fr/' in request.get_full_path or '/en/' in request.get_full_path %}
            <a href="/{{ lang.code }}/{{request.get_full_path|slice:'4:'}}">
              {{ lang.name_local|title|slice:'0:2:' }}
            </a>
            <span class="separator"></span>
            {% else %}
            <a href="/{{ lang.code }}/{{request.get_full_path|slice:'1:'}}">
              {{ lang.name_local|title|slice:'0:2:' }}
            </a>
            {% endif %}
            {% endfor %}
          </span>
        </div>
      </div>
    </header>

    <div class="overlay"></div>

    {% block content %}
    <div id="page-container" style="position: relative;min-height: 93vh;">

      <!--<div id="feedback" class="feed">
            <a href="#" id="feedback-btn">
                <svg height="110" width="25">
                    <path transform="rotate(-90,55,52)" d="M17.657,2.982H2.342c-0.234,0-0.425,0.191-0.425,0.426v10.21c0,0.234,0.191,0.426,0.425,0.426h3.404v2.553c0,0.397,0.48,0.547,0.725,0.302l2.889-2.854h8.298c0.234,0,0.426-0.191,0.426-0.426V3.408C18.083,3.174,17.892,2.982,17.657,2.982M17.232,13.192H9.185c-0.113,0-0.219,0.045-0.3,0.124l-2.289,2.262v-1.96c0-0.233-0.191-0.426-0.425-0.426H2.767V3.833h14.465V13.192z M10,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.488-0.668,1.488-1.489C11.488,7.905,10.821,7.237,10,7.237 M10,9.364c-0.352,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C10.638,9.077,10.351,9.364,10,9.364 M14.254,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489s1.489-0.668,1.489-1.489C15.743,7.905,15.075,7.237,14.254,7.237 M14.254,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.352,0,0.639,0.287,0.639,0.638C14.893,9.077,14.605,9.364,14.254,9.364 M5.746,7.237c-0.821,0-1.489,0.668-1.489,1.489c0,0.821,0.668,1.489,1.489,1.489c0.821,0,1.489-0.668,1.489-1.489C7.234,7.905,6.566,7.237,5.746,7.237 M5.746,9.364c-0.351,0-0.638-0.288-0.638-0.638c0-0.351,0.287-0.638,0.638-0.638c0.351,0,0.638,0.287,0.638,0.638C6.384,9.077,6.096,9.364,5.746,9.364"></path>
                  <text fill="#393D3F" transform="rotate(-90,50,32)" font-weight="bold">Feedback</text>
                </svg>
          </a>
        </div>-->
        
        <main class="main">

          <!-- Home -->
          {% ifequal link 'home' %}
          <section>
            <h1>
              {{ conftopass.title }}
              {% if conftopass.daughterconf %}
              {% if conftopass.daughterconfstarwars %}
              <h3>({% trans 'short name of the session:' %} {{ conftopass.masterconfdaughtername }})</h3>
              {% else %}
              ({% trans 'Session' %} 
              {{ conftopass.masterconfdaughterposition }})
              {% endif %}
              {% endif %}
            </h1>
            {% if conftopass.website.hero %}
              <div style="text-align: center;" class="mb-2"><img src="{{ conftopass.website.hero.heroimages.url }}" alt="hero image" style="width:100%;display:none;"></div>
            {% endif %}

            {% if conftopass.room_logo %}
              <div style="text-align: center;" class="mb-2"><img src="{{ conftopass.room_logo.url }}" alt="Big Conference logo" width="400"></div>
            {% endif %}
            
            <span class="underline"></span>

            <!--  -->
            {% if conftopass.poster %}
            <div>
              <h4 class="mb-3 mt-3" style="text-align: center;"><a href="{% url 'my_app:website' conftopass.id 'posters' %}"
                  style="color: {{ color_guide2 }}">{% trans 'Check out the Posters' %}</a>
                {% if idposters|length > 1 %}
                {% if conftopass.website.onlypposter and acc or not conftopass.website.onlypposter %}
                / <a id="ranpos" data-toggle="modalo" data-target="#extraLargeModal"
                  data-url="{% url 'my_app:posters' idposters|index:randpos %}" href="#extraLargeModal"
                  style="color: {{ color_guide2 }}">{% trans 'View random poster' %}</a>
                {% endif %}
                {% endif %}
              </h4>
            </div>
            {% endif %}
            <!--  -->
  
            {% if finished %}
            {% ifequal conftopass.start_date conftopass.end_date %}
            <p style="text-align: center;" class="date">{% trans 'Conference finished on' %} {{ conftopass.start_date }}</p>
            {% else %}
            <p style="text-align: center;" class="date">{% trans 'Conference started on' %} {{ conftopass.start_date }} {% trans 'and finished on' %} {{ conftopass.end_date }}</p>
            {% endifequal %}
            {% else %}
            {% ifequal conftopass.start_date conftopass.end_date %}
            <p style="text-align: center;" class="date">{% trans 'Conference happening on' %} {{ conftopass.start_date }}</p>
            {% else %}
            <p style="text-align: center;" class="date">{% trans 'From' %} {{ conftopass.start_date }} {% trans 'to' %} {{ conftopass.end_date }}</p>
            {% endifequal %}
            {% endif %}
          </section>

          <!--  -->
          <section>
          <div>
            <hr style="background-color: white; border-top:1px solid #fff">
            <p class="lead">{{ web.homecontent | safe }}</p>
            <hr style="background-color: white; border-top:1px solid #fff">
          </div>
          <p style="text-align: center;" class="lead">
            <a href="{% url 'my_app:website' conftopass.id 'registration' %}" class="btn">{% trans 'Register' %}</a>
          </p>
          {% if conftopass.hybrid %}<p style="text-align: center;">{% trans 'The conference is hybrid, i.e. you can assist in person or virtually' %}</p>{% endif %}
          <p style="text-align: center;">{% if conftopass.feeunique %}{% trans '*The conference fees are shared across all participants' %}{% else %}{% if conftopass.fee %} {% if conftopass.fee_variable %}{% trans '*Participants can pay what they want to participate' %} {% else %}{% trans '*Participants must pay' %} {{ conftopass.fee_amount }} {{ conftopass.fee_currency }} {% trans 'to participate'%}{% endif %} {% if conftopass.fee_to_carbon %} <br><small>{% trans '*but the profit made from the participation fees will go towards offsetting more carbon emissions than that produced by the conference as was decided by the altruistic organizers.'%}</small>{% endif %} {% else %} {% if conftopass.masterconfpass != 35500015 %}{% trans '*The Conference is free for participants'%}{% endif %} {% endif %}{% endif %}</p>
          {% if free %}<p style="text-align: center;">Though you are invited and it is free for you!</p>{% endif %}
          {% if conftopass.daughterconf %}
              {% if conftopass.daughterconfstarwars %}
                    <p style="text-align: center;">{{ conftopass.masterconfdaughtername }} {% trans 'is a session of the master conference'%} "<a style="color: {{ color_guide2 }}" href="{% url 'my_app:website' confma.id 'home' %}" target="_blank">{{ confma.title }}</a>" </p>
              {% else %}
                    <p style="text-align: center;">{% trans 'Session' %} {{ conftopass.masterconfdaughterposition }} {% trans 'is part of the master conference'%} "<a style="color: {{ color_guide2 }}" href="{% url 'my_app:website' confma.id 'home' %}" target="_blank">{{ confma.title }}</a>" </p>
              {% endif %}
          {% endif %}
          {% if conftopass.masterconf %}
              {% if confds %}
                  <h3 style="text-align: center;" class="mb-3">{% trans 'Browse all the sessions of the conference:'%}</h3>
              {% for confd in confds %}
                  <p><h5 style="text-align: center;">{% if confd.daughterconfstarwars %}{{ confd.masterconfdaughtername }}{% else %} S{{ confd.masterconfdaughterposition }} {% endif %} - {{ confd.title }} <small>[<a style="color: {{ color_guide2 }}" href="{% url 'my_app:website' confd.id 'home' %}" target="_blank">{% trans 'See website'%}</a>][<a style="color: {{ color_guide2 }}" href="{% url 'my_app:joinconf' confd.id %}" target="_blank">{% trans 'Join session'%}</a>]</small></h5></p>
              {% endfor %}
              {% endif %}
          {% endif %}
          <div style="background:{{ color_guide }} !important; padding: 20px 20px 20px 20px;" class="jumbotron mt-4">
            <h2 style="text-align: center;">{% trans 'Conference Guidelines' %}</h2><hr style="background-color: white; border-top:2px dotted #000">
                  <p>{{ web.guidelines | safe }}</p>
          </div>
          <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>


          </section>
                  <style type="text/css">
                    #mynetwork {
                      width: 100%;
                      height: 800px;
                      /*margin-top: 100px;*/
                      border: 1px solid lightgray;
                      /*background-color: #333333;*/
                      background-color: #FFFFFF;
                    }
                  
                    #loadingBar {
                      position: absolute;
                      top: 0px;
                      left: 0px;
                      width: 100%;
                      height: 800px;
                      background-color: rgba(200, 200, 200, 0.8);
                      -webkit-transition: all 0.5s ease;
                      -moz-transition: all 0.5s ease;
                      -ms-transition: all 0.5s ease;
                      -o-transition: all 0.5s ease;
                      transition: all 0.5s ease;
                      opacity: 1;
                    }
                  
                    #wrapper2 {
                      position: relative;
                      width: 100%;
                      /*height: 800px;*/
                    }
                  
                    #text {
                      position: absolute;
                      top: 4px;
                      left: 530px;
                      width: 30px;
                      height: 50px;
                      margin: auto auto auto auto;
                      font-size: 22px;
                      color: #000000;
                    }
                  
                    div.outerBorder {
                      position: relative;
                      top: 300px;
                      width: 600px;
                      height: 44px;
                      margin: auto auto auto auto;
                      border: 2px solid rgba(0, 0, 0, 0.1);
                      background: rgb(252, 252, 252);
                      /* Old browsers */
                      background: -moz-linear-gradient(top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%);
                      /* FF3.6+ */
                      background: -webkit-gradient(linear,
                          left top,
                          left bottom,
                          color-stop(0%, rgba(252, 252, 252, 1)),
                          color-stop(100%, rgba(237, 237, 237, 1)));
                      /* Chrome,Safari4+ */
                      background: -webkit-linear-gradient(top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%);
                      /* Chrome10+,Safari5.1+ */
                      background: -o-linear-gradient(top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%);
                      /* Opera 11.10+ */
                      background: -ms-linear-gradient(top,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%);
                      /* IE10+ */
                      background: linear-gradient(to bottom,
                          rgba(252, 252, 252, 1) 0%,
                          rgba(237, 237, 237, 1) 100%);
                      /* W3C */
                      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fcfcfc', endColorstr='#ededed', GradientType=0);
                      /* IE6-9 */
                      border-radius: 72px;
                      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
                    }
                  
                    #border {
                      position: absolute;
                      top: 10px;
                      left: 10px;
                      width: 500px;
                      height: 23px;
                      margin: auto auto auto auto;
                      box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.2);
                      border-radius: 10px;
                    }
                  
                    #bar {
                      position: absolute;
                      top: 0px;
                      left: 0px;
                      width: 20px;
                      height: 20px;
                      margin: auto auto auto auto;
                      border-radius: 11px;
                      border: 2px solid rgba(30, 30, 30, 0.05);
                      background: rgb(0, 173, 246);
                      /* Old browsers */
                      box-shadow: 2px 0px 4px rgba(0, 0, 0, 0.4);
                    }
                  </style>
                  <section>
                    <p style="text-align: center;" class="lead">{% trans 'Map of the conference' %}</p>
                    <p>{% trans '(You can join the different rooms by clicking on their respective names'%}{% if not conftopass.masterconf %} {% trans 'or access posters if there are any'%}{% endif %}).</p>
          
                    <div id="wrapper2" class="mb-5">
                          <div id="mynetwork"></div>
                          <div id="loadingBar">
                            <div class="outerBorder">
                              <div id="text">0%</div>
                              <div id="border">
                                <div id="bar"></div>
                              </div>
                            </div>
                          </div>
                    </div>
                  </section>
                  <script>
                    function loadnetworkb() {
                      console.log("network is working!"); // sanity check
                      //alert($(this).closest("form").attr('id'));
                      //alert($(this));
                      //alert('what');
                      //console.log(thisObj.closest("form").find('.pconfnum').val());
                      //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
                      $.ajax({
                        url: '/apinetwork/', // the endpoint
                        type: "POST", // http method
                        data: {
                          confnum: {{ confnum }},//$('#confnumid').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                  
                                      }, // data sent with the post request

                    // handle a successful response
                    success: function(json) {
                      //alert('suc');
                      var DIR = "{% static 'img/' %}";

                      var nodes = null;
                      var edges = null;
                      var network = null;

                      // Called when the Visualization API is loaded.
                      //function draw() {
                      // create people.
                      // value corresponds with the age of the person
                      //var DIR = "../img/indonesia/";
                      //var nodess = new vis.DataSet();

                      var nodes = JSON.parse(json.networkinput);

                      // create connections between people
                      // value corresponds with the amount of contact between two people
                      var edges = JSON.parse(json.networkedge);



                      // create a network
                      var container = document.getElementById("mynetwork");
                      var data = {
                        nodes: nodes,
                        edges: edges,
                      };
                      var options = {
                        autoResize: true,
                        interaction: { selectable: true, hover: true, navigationButtons: true },
                        physics: {
                          barnesHut: {
                            springConstant: 0.004,
                            avoidOverlap: 0.7,
                          },
                        },
                        width: "100%",
                        height: "100%",
                        nodes: {
                          borderWidth: 2,
                          borderWidthSelected: 8,
                          size: 24,
                          color: {
                            border: "white",
                            background: "black",
                            highlight: {
                              border: "black",
                              background: "white",
                            },
                            hover: {
                              border: "orange",
                              background: "grey",
                            },
                          },
                          font: { color: "#eeeeee" },
                          shapeProperties: {
                            useBorderWithImage: true,
                          },
                        },
                        edges: {
                          color: "lightgray",
                        },
                      };
                      //var nodee = data.nodess.get( 0 );
                      //alert('no'+nodee);
                      var network = new vis.Network(container, data, options);

                      //network.on('click', onClick);
                      network.on("click", function (params) { onClick(params, this) });

                      //network.on('doubleClick', onDoubleClick);
                      network.on("doubleClick", function (params) { onDoubleClick(params, this) });

                      var doubleClickTime = 0;
                      var threshold = 200;

                      function onClick(params, t) {
                        var t0 = new Date();
                        if (t0 - doubleClickTime > threshold) {
                          setTimeout(function () {
                            if (t0 - doubleClickTime > threshold) {
                              doOnClick(params, t);
                            }
                          }, threshold);
                        }
                      }

                      function doOnClick(params, t) {
                        //console.log("execute onClick function");
                        if (params.nodes.length === 1) {
                          //alert('p'+this.body.nodes[params.nodes[0]].options.url);
                          //alert('ps'+nodes2.get( 1 ));
                          //var node = nodess.get(params.nodes[0]);
                          //var node = nodes.get(0);
                          var nodeurl = t.body.nodes[params.nodes[0]].options.url;
                          //var node = nodes.get(params.nodes[0]);
                          //alert('n'+nodeurl);
                          if (typeof nodeurl !== 'undefined') {
                            window.open(nodeurl, '_blank');
                          }
                        }
                      }

                      function onDoubleClick(params, t) {
                        doubleClickTime = new Date();
                        //console.log("execute onDoubleClick function");
                        if (params.nodes.length === 1) {
                          //alert('p'+this.body.nodes[params.nodes[0]].options.url);
                          //alert('ps'+nodes2.get( 1 ));
                          //var node = nodess.get(params.nodes[0]);
                          //var node = nodes.get(0);
                          var nodeurl = t.body.nodes[params.nodes[0]].options.url2;
                          //var node = nodes.get(params.nodes[0]);
                          //alert('n'+nodeurl);
                          if (typeof nodeurl !== 'undefined') {
                            window.open(nodeurl, '_blank');
                          }
                        }
                      }

                      network.on("hoverNode", function (params) {
                        network.canvas.body.container.style.cursor = 'pointer'
                      });

                      network.on("blurNode", function (params) {
                        network.canvas.body.container.style.cursor = 'default'
                      });

                      network.on("stabilizationProgress", function (params) {
                        var maxWidth = 496;
                        var minWidth = 20;
                        var widthFactor = params.iterations / params.total;
                        var width = Math.max(minWidth, maxWidth * widthFactor);

                        document.getElementById("bar").style.width = width + "px";
                        document.getElementById("text").innerText =
                          Math.round(widthFactor * 100) + "%";
                      });
                      network.once("stabilizationIterationsDone", function () {
                        document.getElementById("text").innerText = "100%";
                        document.getElementById("bar").style.width = "496px";
                        document.getElementById("loadingBar").style.opacity = 0;
                        // really clean the dom element
                        setTimeout(function () {
                          document.getElementById("loadingBar").style.display = "none";
                        }, 500);
                      });

                      var height = Math.round(window.innerHeight * 0.80) + 'px';     // The DOM way

                      // Now, resize the container (and not the canvas)
                      document.getElementById('mynetwork').style.height = height;

                    },

                    // handle a non-successful response
                    error: function(xhr, errmsg, err) {
                      $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: " + errmsg +
                        " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                      console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
                    }
                          });
                      };
                  </script>
                  <script>
                    $(document).ready(function () {

                      loadnetworkb();

                    })

                  </script>

            <!--  -->

          {% endifequal %}
          <!-- End Home -->

        </main>




    <div>



      
      <main role="main">


      {% ifequal link 'rationale' %}
        <!--<h1 class="cover-heading">Rationale</h1>-->
        <div class="d-flex align-items-center justify-content-center" style="min-height: 85vh;">

           <div style="background:{{ color_guide }} !important; padding: 20px 20px 20px 20px;" class="jumbotron mt-5 pt-5">
            <h2>{% trans 'Rationale' %}</h2><hr style="background-color: white; border-top:2px dotted #000">
                  <p style="text-align: left;">{{ web.rationale | safe }}</p>
          </div>
        </div>
      {% endifequal %}
      {% ifequal link 'registration' %}

        <p class="lead mb-4">{% trans 'Registration/Participation'%}</p>
          <a href="#" class="btn btn-secondary mt-2 mb-4" data-toggle="modal" data-target="#exampleModalt"> <strong>{% trans 'Read the guide'%}</strong> </a>
          {% if user.is_authenticated %}
              {% if finished %}
                    <hr style="background-color: white; border-top:2px dotted #000">
                    <h5>{% trans 'The meeting is now over and you cannot submit participations anymore'%}</h5>
                    <hr style="background-color: white; border-top:2px dotted #000">
              {% elif closed %}
                    <hr style="background-color: white; border-top:2px dotted #000">
                    <h5>{% trans 'The deadline to submit new participations is now over. Contact the organizers if needed.'%}</h5>
                    <hr style="background-color: white; border-top:2px dotted #000">
              {% else %}
                {% if conftopass.submitparticipations %}
                {% if talks|length > 1 %}
                  <div class="col-6" style="width: 50%;margin: 0 auto;">
                    <label for="conf-select">{% trans 'Modify another of your participations instead?'%}</label>
                    <form name=changetalForm action="" method=POST>
                        {% csrf_token %}
                    <select name="tal" id="tal-select" class="browser-default custom-select" onChange="changetalForm.submit();">
                <option value="">--{% trans 'Please choose another participation to update it'%}--</option>
                {% for talk in talks %}
                    <option value="{{ talk.id }}">{{ talk.title }}</option>
                {% endfor %}
            </select>
            </form>
                  </div>
            {% endif %}
            <hr style="background-color: white; border-top:2px dotted #000">
              <h5>{% if not talkcrea %}{% trans 'Dear'%} {{ user }}, {% trans 'please fill in this form to send your participation to the organizers but before you do check that you agree with our'%} <a href="{% url 'my_app:website' conftopass.id 'codeofconduct' %}" target="_blank" style="color: {{ color_guide2 }}">{% trans 'code of conduct'%}</a> {% trans 'and the'%} <a href="{% url 'my_app:website' conftopass.id 'consentinfo' %}" target="_blank" style="color: {{ color_guide2 }}">{% trans 'consent information'%}</a>. {% else %} {% trans 'You have now registered for'%} <strong style="color: {{ color_guide2 }}">{{ talks | length }}</strong> {% trans 'participation'%}{{ talks|length|pluralize:",s" }}, {% trans "which you can update at will. You can check if your participation (talk, ...)
                  gets accepted in the section 'My participation' that appeared in the menu. "%}<small>{% trans 'You can also access our'%} <a href="{% url 'my_app:website' conftopass.id 'codeofconduct' %}" target="_blank" style="color: {{ color_guide2 }}">{% trans 'code of conduct'%}</a> {% trans 'and the'%} <a href="{% url 'my_app:website' conftopass.id 'consentinfo' %}" target="_blank" style="color: {{ color_guide2 }}">{% trans 'consent information'%}</a> {% trans 'anytime.'%}</small> {% endif %}</h5>
              <hr style="background-color: white; border-top:2px dotted #000">
              {% if talkcrea %}
                <br><p><a href="{% url 'my_app:website' conftopass.id 'mytalks' %}" class="btn btn-lg btn-info">{% trans 'See my participations/Pre-record my talk/Pre-send a document/Test the virtual room'%}</a></p><br>
              {% endif %}

                <form enctype="multipart/form-data" method="POST" action="">
                    {% csrf_token %}
                    {% if not stattalk %}

                    <p>{{ regtalklight_form.type|as_crispy_field }}</p>

                    {% else %}
                  <h4>{% trans 'Congrats! This'%} {{ typet }} {% trans 'is accepted'%}</h4>
                {% endif %}

                    {% if not attend %}

                    <div id="titlehid"><p>{{ regtalk_form.title|as_crispy_field }}</p></div>


                    {% comment %}{% if not poster %}{% endcomment %}
                    <div id="abshid"><p>{{ regtalk_form.abstract|as_crispy_field }}</p></div>

                    <div id="biohid"><p>{{ regtalk_form.biography|as_crispy_field }}</p></div>

                    {% if conftopass.hybrid %}
                        <div id="ftfhid"><p>{{ regtalk_form.facetoface|as_crispy_field }}</p></div>
                    {% endif %}
                    {% comment %}{% endif %}{% endcomment %}
                        {% else %}
                    <div id="titlehid" style="display: none;"><p>{{ regtalk_form.title|as_crispy_field }}</p></div>
                    <div id="abshid" style="display: none;"><p>{{ regtalk_form.abstract|as_crispy_field }}</p></div>
                    <div id="biohid" style="display: none;"><p>{{ regtalk_form.biography|as_crispy_field }}</p></div>
                    {% if conftopass.hybrid %}
                        <div id="ftfhid"><p>{{ regtalk_form.facetoface|as_crispy_field }}</p></div>
                    {% endif %}
                    {% endif %}

                    <input type="hidden" name="titch" value="titch" />
                    {% if messages %}
                        <div class="container">
                        <div class="alert alert-success" role="alert">
                        {% for message in messages %}
                            {% if forloop.counter == messages|length %}
                                <h3>{{ message }}</h3>
                            {% endif %}
                            {% ifequal message.tags 'warning' %}
                                <h3>{{ message }}</h3>
                            {% endifequal %}
                        {% endfor %}
                        </div>
                        </div>
                    {% endif %}
                    <div class="row">
                    <div class="col-6 center">
                        <div class="mt-5"><button type="submit" class="btn btn-outline-info"><strong>{% if not talkcrea %}{% trans 'Submit'%}{% else %} {%ifnotequal request.session.another 'another'%} {%ifequal request.session.another2 'another2'%}  {% trans 'Resubmit'%} {% endifequal %} {% endifnotequal %} {%ifequal request.session.another 'another'%} {%ifnotequal request.session.another2 'another2'%}  {% trans 'Submit'%} {% endifnotequal %} {% endifequal %} {%ifequal request.session.another 'another'%} {%ifequal request.session.another2 'another2'%}  {% trans 'Submit'%} {% endifequal %} {% endifequal %} {%ifnotequal request.session.another 'another' %} {%ifnotequal request.session.another2 'another2' %} {% trans 'Resubmit'%} {% endifnotequal %} {% endifnotequal %}{% endif %} {% trans 'my participation'%}</strong></button> <i data-toggle="tooltip" data-placement="bottom" title="{% trans 'Click here to submit or resubmit your participation: talk, poster or attendance only.'%}" class="fas fa-info-circle"></i></div>
                </form>
                    </div><div class="col-6 center">
                <form enctype="multipart/form-data" method="POST" action="">
                    {% csrf_token %}
                    <input type="hidden" name="delete" value="delete" />
                    <div class="mt-5"><button type="submit" class="btn btn-outline-danger"><strong>{% trans 'Delete this participation?'%}</strong></button> <i data-toggle="tooltip" data-placement="bottom" title="{% trans 'Click here to delete the currently selected participation (talk, poster or attendance only).'%}" class="fas fa-info-circle"></i></div>
                </form>
                </div>
              </div>
               <form enctype="multipart/form-data" method="POST" action="">
                    {% csrf_token %}
                    <input type="hidden" name="another" value="another" />
                   <div class="mt-4 mb-5">{% if talkcrea %}<button type="submit" class="btn btn-outline-info"><strong>{% trans 'Submit a (new) talk'%}{% if conftopass.poster %} {% trans 'or poster'%}{% endif %}?</strong></button> <i data-toggle="tooltip" data-placement="bottom" title="{% trans 'Click here to be able to propose another participation: talk, poster or attendance only.'%}" class="fas fa-info-circle"></i>{% endif %}</div>
                </form>
              {% if conftopass.recording %}
                  <div class="mb-5 pb-5"><p style="color: {{ conftopass.website.color_men }};">{% trans '*The presentations will be recorded'%}</p></div>
              {% endif %}

              {% else %}
              <h3 class="mt-2 mb-4"><strong> {% trans 'You cannot submit participations to this session!'%}<strong></h3>
                  {% if conftopass.masterconf or conftopass.daughterconf %}
                  <h5 class="mb-5">{% trans 'Please select below the sessions you plan to attend. You can click on a session title to visit their respective websites and submit a participation.'%}</h5>
                  {% endif %}
              {% endif %}
              {% if conftopass.masterconf or conftopass.daughterconf %}
                  <div class="mb-5 pb-5">
                      <h3 class="mb-2"><strong>{% trans 'You can also choose to attend the other sessions of the conference:'%}</strong></h3>
                        {% if conftopass.parsession %}
                            <h5>{% trans 'Note that organizers decided that you will be able to access all parallel sessions if you have at least one participation accepted in one session. However, if you want to have access to the chat rooms of some other sessions, you have to tick them off down below.'%}</h5>
                        {% else %}
                            <h5>{% trans 'Note that if you want to be able to access other sessions and/or have access to their chat rooms, you have to tick them off down below.'%}</h5>
                        {% endif %}
                    {% for con in confa %}
                        <li class="list-group-item" style="color: black">
                            <a style="color: black" href="{% url 'my_app:website' con.id 'home' %}" target="_blank"><strong>{% if  not con.daughterconfstarwars %} {% if con.masterconfdaughterposition != 0 %}S{{ con.masterconfdaughterposition }}{% else %} {% trans 'Plenaries'%} {% endif %} {% else %}{{ con.masterconfdaughtername }}{% endif %} - {{ con.title }}</strong></a> <strong><span class="valida">{% if vali|index:forloop.counter0 %}<i data-toggle="tooltip" data-placement="right" title="{% trans 'It was validated by organizers'%}" class="fas fa-check-circle"></i>{% else %}<i data-toggle="tooltip" data-placement="right" title="{% trans 'Not yet validated by organizers'%}" class="fas fa-times-circle"></i>{% endif %}</span></strong><!--add tooltip-->
                            <label id="cb2" class="switch ">
                            <input type="checkbox" {% if participe|index:forloop.counter0 %}checked{% endif %} id="{{ con.id }}" class="success addtosession">
                            <span class="slider round"></span>
                            </label>
                        </li>
                    {% endfor %}
                      <div id="partadd"></div>
                  </div>
                  {% endif %}
            {% endif %}
          {% else %}
              <h5>{% blocktrans %}If not done yet, please first register to <i>CarbonFreeConf</i> by clicking on <strong>sign-up button</strong> down below <small>(or log-in directly if you have already signed-up in the past, even if it was for another CarbonFreeConf-erence)</small>. Then log-in and you can submit your talk or poster to organizers.{% endblocktrans %}</h5>
              {% include "my_app/login_website.html" with comingfrom="website" comingfromweb="registration" confnum=conftopass.id %}
      {% endif %}

   <div class="container tuto" style="color: black!important;">
     <div class="modal fade" id="exampleModalt" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabelt" aria-hidden="true">
         <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
             <div class="modal-content">
                 <div class="modal-header">
                     <h5 class="modal-title" id="exampleModalLabelt"><strong>{% trans 'Learn how to participate to a CarbonFreeConf-erence'%}</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                 </div>
                 <div class="modal-body">
                     <div id="smartwizard">
                         <ul class="nav">
                             <li><a class="nav-link" href="#step-0">Step 0<br /><small>{% trans 'Important'%}</small></a></li>
                             <li><a class="nav-link" href="#step-1">Step 1<br /><small>{% trans 'Submit your participation'%}</small></a></li>
                             <li><a class="nav-link" href="#step-2">Step 2<br /><small>{% trans 'Change'%}</small></a></li>
                             <li><a class="nav-link" href="#step-3">Step 3<br /><small>{% trans 'Delete'%}</small></a></li>
                             <li><a class="nav-link" href="#step-4">Step 4<br /><small>{% trans 'Add slides/posters/recordings'%}</small></a></li>
                             <li><a class="nav-link" href="#step-5">Step 5<br /><small>{% trans 'Check status'%}</small></a></li>
                         </ul>
                         <div class="tab-content">
                             <div id="step-0" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Important</h3>

                                 <h5>{% trans 'It is recommended that you read all information here at least once to submit your talk or poster in best conditions!'%}</h5>
                                 <p>{% blocktrans %} Note that you can always come back here by clicking on this button <span><a href="#" class="btn btn-secondary py-0" style="font-size: 0.8em;color: #333;background-color: lightgrey;"> <strong>Read the guide</strong> </a></span> at the top of the web page once the guide is closed.{% endblocktrans %}</p>

                                 <h5>{% trans 'First you have to create an account on CarbonFreeConf that you will be able to use for other conferences later.'%}
                                {% if user.is_authenticated %}
                                {% trans 'You have already created an account and logged-in so now you can go to the next step.'%}</h5>
                                {% else %}
                                {% blocktrans %}To do so, click the sign-up button <a href="#" class="btn-lg btn-primary py-0" style="font-size: 0.8em;">Sign-up</a> when you close this guide <small>(or sign-in directly using your login and password if you have already signed-up in the past, even if it was for another CarbonFreeConf-erence)</small>.{% endblocktrans %}
                                </h5>
                                {% endif %}
                             </div>
                             <div id="step-1" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Submit your participation</h3>
                                     <h5>Once logged-in and after clicking 'Participate' in the top main menu, you can submit your participation in 3 steps and one click!</h5>
                                 <p style="text-align: left;"><strong>1)</strong> Choose your participation type: talk, poster, or attendance only. Poster will not be an option if organizers do not want posters. Attendance only is if you want to attend the conference but not present your work. To submit a talk, select talk.</p>
                                 <p style="text-align: left;"><strong>2)</strong> If you choose a talk or a poster you have to enter your abstract in the corresponding field (note that you cannot copy-paste from word-like documents).</p>
                                 <p style="text-align: left;"><strong>3)</strong> The last field is to tell organizers more about you (e.g., your background and why you submit this participation and how well it fits with the conference main theme).</p>
                                 <p style="text-align: left;"><strong>Click)</strong> Now click the button <a href="#" type="submit" class="btn btn-outline-info py-0" style="font-size: 0.8em;"><strong>Submit my participation</strong></a> at the bottom left of the web page to submit to organizers.</p>

                                     <p><strong>Important 1:</strong> If everything went according to plan, you should see a text at the bottom of the page saying "Your participation was submitted" and you should receive an email if you submitted either a talk or poster (alternatively, you can also click on 'My Participation' in the top menu or the wide button 'See my participations/Pre-record my talk/Pre-send a document/Test the virtual room' and check that your participation appears there).</p>
                                     <p><strong>Important 2:</strong> You should now wait for your participation to be accepted by organizers. Once it is accepted, your name will appear in the 'Participants' page and the status of your talk will go from 'waiting for acceptance' to 'accepted' in the 'My Participation' page. If organizers have already allowed to see the abstracts, your talk or poster would also appear in the corresponding website pages after acceptance.</p>
                                     <p><strong>Important 3:</strong> If you want to submit another participation after having submitted one (e.g., a poster in addition to your talk), click on the central button <a href="#" type="submit" class="btn btn-outline-info py-0" style="font-size: 0.8em;"><strong>Submit (a new) talk or poster</strong></a> at the bottom of the page and then follow the same steps as before.</p>

                             </div>
                             <div id="step-2" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Change your participation</h3>
                                 <h5>Once you have submitted a participation, you can decide to update its content at any time.</h5>
                                 <p>To do so, go back to the 'Participate' page and you will see the participation form that you have already filled in appear. Proceed to changes if you wish and then click <a href="#" type="submit" class="btn btn-outline-info py-0" style="font-size: 0.8em;"><strong>Resubmit my participation</strong></a></p>
                                 <p><strong>Important 1:</strong> Once a participation is accepted, only organizers can change its type (e.g. from talk to poster). Otherwise, you will have to delete your participation and create a new one with the right type. </p>
                                 <p><strong>Important 2:</strong> If you submitted several participations (e.g. one talk and one poster) you can pick one or the other using the list under the label 'Modify another of your participations instead?' at the top of the page.</p>

                             </div>
                             <div id="step-3" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Delete your participation</h3>
                                 <h5>You can delete your participations at any time.</h5>
                                 <p>To delete your participation, go to the 'Participate' page and then select the participation you want to delete in the list under the label 'Modify another of your participations instead?'. Note that no list will appear if you submitted only one participation and the latter will be selected right away. Then just push the <a href="#" type="submit" class="btn btn-outline-danger py-0" style="font-size: 0.8em;"><strong>Delete this participation</strong></a> button at the bottom right of the page.</p>
                                 <p><strong>Important 1:</strong> It can also be done from the 'My participation' page by clicking <span style="color: red;">'Delete?'</span> on the participation of your choice. </p>
                                 <p><strong>Important 2:</strong> If everything went well you should see that your participation is not visible anymore either in the 'My participation' or 'Participate' pages. </p>


                             </div>
                             <div id="step-4" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Add slides/posters/recordings</h3>
                                 <h5>If asked by the organizers you can easily add slides, documents, posters or recordings (for your talk and/or poster) once your participation is accepted.</h5>
                                 <p>To do so, only one place, go to the 'My participation' page in the top menu.</p>
                                 <p style="text-align: left;"><strong>To submit your slides or document:</strong> You can add any document and the organizers will have access to it (e.g. slides, paper, image, ...). Click on the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Add your document</strong>
                                    </span> button. Then select the file on your computer. Once added, you see the filename appearing to the right of the button. If it is correct push the
                                     <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the document</strong></a> button. You will then see a new
                                    <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your document</strong></a>
                                    </span> button and <span class="btn btn-danger btn-file py-0">
                                <a href="#"><strong>Delete your document</strong></a>
                            </span> button. Click on see your document to check that it is correct (if not delete your cookies and try again). In case you inserted the wrong document, you can either click the delete your document button and start all over again
                                     or click the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Update your document</strong>
                                    </span> button and then the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Change the document</strong></a> button to confirm.
                                </p>
                                 <p style="text-align: left;"><strong>To submit the recording of your talk:</strong> Imagine you are not able to give your talk, either because you are on holidays or your internet connection may be too fragile. Then you can just record yourself and upload your video for the organizers to be able to play it on the big day.
                                     The video should be in the mp4 format and less than 200 Mb. To do so, click the <span class="fileUpload btn btn-info btn-file py-0">
                                    <span><i class="fa fa-video"></i> <strong>Select a talk recording</strong></span>
                                </span> button, select the right file, and then confirm by clicking the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the recording</strong></a> button.
                                     After the complete upload, you will see a new <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your recorded talk</strong></a>
                                    </span> button, which you should click to verify that it is all correct. If not upload a new recording by following the same process again.</p>
                                 <p style="text-align: left;"><strong>To submit your poster:</strong> Posters should be in pdf format. To upload your poster, click on the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Add your poster</strong>
                                    </span> button. Then select the poster pdf file on your computer. Once added, you see the filename appearing to the right of the button. If it is correct push the
                                     <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the poster</strong></a> button. You will then see a new
                                    <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your poster</strong></a>
                                    </span> button and <span class="btn btn-danger btn-file py-0">
                                <a href="#"><strong>Delete your poster</strong></a>
                            </span> button. Click on see your poster to check that it is correct (if not delete your cookies and try again). In case you inserted the wrong poster or want to change it, you can either click the delete your poster button and start all over again
                                     or click the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Update your poster</strong>
                                    </span> button and then the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Change the poster</strong></a> button to confirm.
                                </p>
                                 <p style="text-align: left;"><strong>To submit your poster recording:</strong> If you feel like a video of your poster with you explaining it is more suited, you can do so! You can either add a pdf alone or a poster's video only or both.
                                     The poster's recording should be in the mp4 format and less than 200 Mb. To upload it, click the <span class="fileUpload btn btn-info btn-file py-0">
                                    <span><i class="fa fa-video"></i> <strong>Select a poster recording</strong></span>
                                </span> button and then confirm by clicking the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the recording</strong></a> button.
                                     After the complete upload, you will see a new <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your recorded poster</strong></a>
                                    </span> button, which you should click to verify that it is all correct. If not upload a new recording by following the same process again.</p>
                                 <p><strong>Important 1:</strong> For posters, you can either only add your poster as a pdf or as a video or both to get even more engagement. </p>
                                 <p><strong>Important 2:</strong> While you are in the 'My Participation' area, click the <span><a href="#" class="btn btn-info py-0"><strong>Test the virtual conference room once</strong></a></span> button. You can then learn how to use the virtual room and its features! Note that you can only do it once so make the most of it. </p>

                             </div>
                            <div id="step-5" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Check status</h3>
                                <h5>It is important to know whether your participation has now been accepted or not!</h5>
                                <p>To do so, go to the 'My participation' page and check whether it is written 'Participation submitted (waiting for acceptance)' or 'Participation accepted'. You may also well be contacted by the organizers to let you know about that sooner or later.</p>

                             </div>
                         </div>
                     </div>
                 </div>
                   <div class="modal-footer">
                     <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                   </div>
             </div>
         </div>
     </div>
 </div>

<script>
   var gotit = 0;

    $('#exampleModalt').on('shown.bs.modal', function() {

       //alert('ok');
        if (!gotit) {
            $.getScript("https://unpkg.com/smartwizard@5/dist/js/jquery.smartWizard.min.js", function () {
                var $def = $.Deferred();
                if (typeof smartWizard === 'undefined') { // "foo" isn't available
                    //alert('ok');
                    var attempts = 0;
                    // create an interval
                    // that will check each 100ms if the "foo" function
                    // was loaded
                    var interval = setInterval(function () {
                        if (typeof smartWizard !== 'undefined') { // loaded
                            window.clearInterval(interval);
                            $def.resolve();
                        }
                        // after X unsuccessfull attempts, abort the operation
                        else if (attempts >= 100) {
                            window.clearInterval(interval);
                            $def.reject('Something went wrong');
                            //alert('ik');
                        }

                        attempts++;
                    }, 100);
                } else { // "foo" is available
                    $def.resolve();
                    //alert('il');
                }
                return $def.promise();
            }).then(function () {
                // at this point "foo()" is definitely available.
                $('head').append('<link rel="stylesheet" type="text/css" href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css">');
                //$('head').append('<link rel="stylesheet" type="text/css" href="https://res.cloudinary.com/dxfq3iotg/raw/upload/v1581152091/smartwizard/smart_wizard_theme_arrows.min.css">');

                gotit = 1;
                //alert('ah?');
                $('#smartwizard').smartWizard({
                      selected: 0, // Initial selected step, 0 = first step
                      theme: 'arrows', // theme for the wizard, related css need to include for other than default theme
                      justified: true, // Nav menu justification. true/false
                      darkMode:false, // Enable/disable Dark Mode if the theme supports. true/false
                      autoAdjustHeight: true, // Automatically adjust content height
                      cycleSteps: false, // Allows to cycle the navigation of steps
                      backButtonSupport: true, // Enable the back button support
                      enableURLhash: true, // Enable selection of the step based on url hash
                      transition: {
                          animation: 'fade', // Effect on navigation, none/fade/slide-horizontal/slide-vertical/slide-swing
                          speed: '400', // Transion animation speed
                          easing:'' // Transition animation easing. Not supported without a jQuery easing plugin
                      },
                      toolbarSettings: {
                          toolbarPosition: 'bottom', // none, top, bottom, both
                          toolbarButtonPosition: 'right', // left, right, center
                          showNextButton: true, // show/hide a Next button
                          showPreviousButton: true, // show/hide a Previous button
                          toolbarExtraButtons: [] // Extra buttons to show on toolbar, array of jQuery input/buttons elements
                      },
                      anchorSettings: {
                          anchorClickable: true, // Enable/Disable anchor navigation
                          enableAllAnchors: true, // Activates all anchors clickable all times
                          markDoneStep: true, // Add done state on navigation
                          markAllPreviousStepsAsDone: true, // When a step selected by url hash, all previous steps are marked done
                          removeDoneStepOnNavigateBack: false, // While navigate back done step after active step will be cleared
                          enableAnchorOnDoneStep: true // Enable/Disable the done steps navigation
                      },
                      keyboardSettings: {
                          keyNavigation: true, // Enable/Disable keyboard navigation(left and right keys are used if enabled)
                          keyLeft: [37], // Left key code
                          keyRight: [39] // Right key code
                      },
                      lang: { // Language variables for button
                          next: 'Next',
                          previous: 'Previous'
                      },
                      disabledSteps: [], // Array Steps disabled
                      errorSteps: [], // Highlight step with errors
                      hiddenSteps: [] // Hidden steps

                });
            }).fail(function () {
                // deal with the failure
                console.log('failure with smartwizard');
            });

        }
        //else{
            //alert('alr');
        //}
 });
</script>

{% endifequal %}
      {% ifequal link 'signin' %}
          {% include "my_app/login_website.html" with comingfrom="website" comingfromweb="registration" confnum=conftopass.id %}
      {% endifequal %}

      {% ifequal link 'participants' %}
          {% if peopleinv %}
                  <p class="lead">{% trans 'Invited Speakers'%} <i class="fas fa-space-shuttle"></i></p>
            {% for peopi in peopleinv %}
            <ul class="list-group mb-5">
                {% if peopi.user.userprofileinfo.orcid %}
                    <li class="list-group-item"> <a href="https://orcid.org/{{ peopi.user.userprofileinfo.orcid }}" target="_blank" style="color: blue;">{{ peopi.user.first_name }} {{ peopi.user.last_name }}</a> / {{ peopi.user.userprofileinfo.institute }} <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="Send an email to this person" class="open-modal" data-url="{% url 'my_app:contactperson' confnum peopi.user.username 'participants' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>
                {% else %}
                    <li class="list-group-item"> {{ peopi.user.first_name }} {{ peopi.user.last_name }} / {{ peopi.user.userprofileinfo.institute }} <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="Send an email to this person" class="open-modal" data-url="{% url 'my_app:contactperson' confnum peopi.user.username 'participants' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>
                {% endif %}
              {% if peopi.user.userprofileinfo.profile_pic %}
                  <p class="mt-2"><img src="{{ peopi.user.userprofileinfo.profile_pic.url }}" alt="Profile pic" style="width:200px;!important"></p>
              {% endif %}
              </li>
            </ul>
          {% endfor %}
        {% endif %}

          {% if people %}
               <div class="row justify-content-center mt-2 mb-3">
                <div class="col-12 col-md-10 col-lg-8 mb-3">
                  <div class="card card-sm">
                    <div class="card-body row no-gutters align-items-center">
                        <div class="col-auto mr-1 mt-1">
                            <i class="fas fa-search h4 text-body"></i>
                        </div>
                        <!--end of col-->
                        <div class="col">
                            <input class="form-control form-control-lg form-control-borderless" id="qp" type="search" placeholder="{% trans 'Find a participant (by first name, last name, institute, status)'%}">
                        </div>
                        <!--end of col-->
                        <div class="col-auto">
                            <button class="btn btn-lg btn-info ml-1" type="submit">{% trans 'Search'%}</button>
                        </div>
                        <!--end of col-->
                    </div>
                </div>
            </div>
            <!--end of col-->
        </div>
        {% endif %}
        <p class="lead">{% trans 'Registered Participants'%} <i class="fas fa-users"></i></p>



            {% if messages %}
                {% for message in messages %}
                    {%if "human" in message.tags %}
                        <div class="alert alert-danger mt-2" role="alert">
                            <h4 style="color: red;"><strong>{{ message }}</strong></h4>
                        </div>
                    {% endif %}
                    {%if "yes" in message.tags %}
                        <div class="alert alert-success mt-2" role="alert">
                            <h4 style="color: blue;"><strong>{{ message }}</strong></h4>
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}

          <div id="pomod">
          {% for peop in people %}
            <ul class="list-group mb-5">
                {% if peop.user.userprofileinfo.orcid %}
                    <li class="list-group-item">{{ forloop.counter }}) <a href="https://orcid.org/{{ peop.user.userprofileinfo.orcid }}" target="_blank" style="color: blue;">{{ peop.user.first_name }} {{ peop.user.last_name }}</a> / {{ peop.user.userprofileinfo.institute }} {% if peop.user.userprofileinfo.job %}({{ peop.user.userprofileinfo.job }}){% endif %} <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum peop.user.username 'participants' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>
                {% else %}
                    <li class="list-group-item">{{ forloop.counter }}) {{ peop.user.first_name }} {{ peop.user.last_name }} / {{ peop.user.userprofileinfo.institute }} {% if peop.user.userprofileinfo.job %}({{ peop.user.userprofileinfo.job }}){% endif %} <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum peop.user.username 'participants' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>
                {% endif %}
              {% if peop.user.userprofileinfo.profile_pic %}
                  <p><img src="{{ peop.user.userprofileinfo.profile_pic.url }}" alt="{% trans 'Profile pic'%}" style="width:100px;!important"></p>
              {% endif %}
            {% if peop in peopleinv %}
                <p><i><b>{% trans 'Invited'%}</b></i></p>
            {% endif %}
              </li>
            </ul>
          {% endfor %}
          </div>
        <br>
          <br>
          <script>
    $('#qp').on('input',function(e){
        //alert('Changed!'+$('#q').val());
        changepb();
    });

</script>

  <script>
        function changepb() {
            console.log("changep is working!"); // sanity check
            //console.log(thisObj.closest("form").find('.pfnplus').val());
            //alert(thisObj.closest("form").find('.pfnplus').val());
            //alert(idtalk+url+loopnum);
            $.ajax({
                url : '/changep/', // the endpoint
                type : "POST", // http method
                data : {
                            text : $('#qp').val(),
                            confnum : {{ confnum }},
                            csrfmiddlewaretoken : '{{ csrf_token }}'
                        }, // data sent with the post request
                success : function(json) {

                    if(json.success){
                        //alert(json.text);
                        //$('#abstomod').html();
                        $('#pomod').empty();

                        if (json.p != '') {
                            var source = $("#result-template-p").html();
                            console.log(source);
                            var template = Handlebars.compile(source);
                            console.log(template);

                            // The 'template' function returns the rendered HTML
                            //var diva = template({results: json});
                            var context = json;
                            console.log(context);


                            var html = template(context);
                            $("#pomod").append(html);
                        }else{
                            if (json.text) {
                                $("#pomod").append('<h5>There are no participants related to: ' + json.text + '</h5>');
                            }else{
                                $("#pomod").empty()
                            }
                        }
                    }
                    console.log("success plus"); // another sanity check
                },

                // handle a non-successful response
                error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }

            })
        };
</script>

  {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template-p">
        {{#each p}}
        {{#with (lookup ../fn @index) as |f|}}
        {{#with (lookup ../../ln @index) as |l|}}

            <ul class="list-group mb-5">
                    <li class="list-group-item">{{inc @index}}) {{#with (lookup ../../../orcid @index) as |o|}}<a href="https://orcid.org/{{ peop.user.userprofileinfo.orcid }}" target="_blank" style="color: blue;">{{/with}}{{f}} {{l}}{{#with (lookup ../../../orcid @index) as |o|}}</a>{{/with}} {{#with (lookup ../../../institute @index) as |i|}}/ {{i}}{{/with}} {{#with (lookup ../../../job @index) as |j|}}({{j}}){{/with}} <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="Send an email to this person" class="open-modal" data-url="/contactperson/{{cf}}/{{#with (lookup ../../../usern @index) as |un|}}{{un}}{{/with}}/participants" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>

                    {{#with (lookup ../../../profilepic @index) as |p|}}
                        {{#ifCond p '!=' ""}}
                            <p><img src="{{p}}" alt="Profile pic" style="width:100px;!important"></p>
                        {{/ifCond}}
                    {{/with}}
                    {{#with (lookup ../../../pinv @index) as |pinv|}}
                        {{#ifCond pinv '==' "1"}}
                        <p><i><b>Invited</b></i></p>
                        {{/ifCond}}
                    {{/with}}
              </li>
            </ul>
        {{/with}}
        {{/with}}
        {{/each}}
    </script>
    {% endverbatim %}
      {% endifequal %}
      {% ifequal link 'program' %}
          <div><small><a href="{% url 'my_app:website' confnum 'timeline' %}" style="color: {{ color_guide2 }};">{% trans 'Go to the Timeline?'%}</a></small></div>
        <p class="lead">{% trans 'Program'%} <i class="fas fa-clock"></i></p>

          {% if conftopass.website.showprogram %}
              {% if conftopass.website.onlypprogram and acc or not conftopass.website.onlypprogram  %}
              {% if conftopass.masterconf %}
                  {% if confds %}
                  {% trans 'Participate in individual sessions of the conference?:'%}
              {% for confd in confds %}
                <a style="color: {{ color_guide2 }}" href="{% url 'my_app:website' confd.id 'home' %}" target="_blank">[{% if  confd.daughterconfstarwars %}{{ confd.masterconfdaughtername }}{% else %}S{{ confd.masterconfdaughterposition }} {% endif %} - {{ confd.title }}]</a>
              {% endfor %}
                {% endif %}

<div class="container">

        <p class="mt-2"><b>{% trans 'The whole program (interactive)'%}</b></p>
<div class="container">

    <ul class="list-unstyled card-columns">
            <li class="list-group-item" style="color: black;padding: 2% 2%!important;">
                <div class="row">
                    <div title="{{ confm.title }}" class="col-10" style="text-align: left!important;">
                <small>{% trans 'Plenaries:'%} {{ confm.title|truncatechars:55 }}</small>
                    </div>
                    <div class="col-2" style="padding-top: 0%;">
                        <label id="cb" class="switch ">
                        <input type="checkbox" checked id="{{ confm.id }}" class="success addtoschedule">
                        <span class="slider round"></span>
                        </label>
                    </div>
            </li>
        <!--</div>-->
            {% for confd in confds %}
            {% if confd.website.showprogram %}
        <!--<div class="col-6">-->

            <li class="list-group-item" style="color: black;padding: 2% 2%!important;-webkit-column-break-inside: avoid;">
            <div class="row">
                <div title="{{ confd.title }}" class="col-10" style="text-align: left!important;">
                    <small>{% if  confd.daughterconfstarwars %}{{ confd.masterconfdaughtername }}{% else %} S{{ confd.masterconfdaughterposition }} {% endif %}: {{ confd.title|truncatechars:55 }}</small>

                </div>
                <div class="col-2" style="padding-top: 0%;">
                    <label id="cb" class="switch ">
                    <input type="checkbox" id="{{ confd.id }}" class="success addtoschedule">
                    <span class="slider round"></span>
                    </label>
                </div>
            </div>
            </li>
        <!--</div>-->
            {% endif %}
            {% endfor %}
    <!--</div>-->
    </ul>
</div>
        <div id="content" class="mb-5 pb-5 loading">{% include "my_app/schedule.html" with loca="mastconf" confnum=confm.id start_date=start_date interactive="true" session=confm.id len2="1" timestart=timestart timefinish=timefinish mineventheight=mineventheight heighthr=heighthr minieventtime=minieventtime opacity=opacity %}</div>
                    <!--timestart=timestart timefinish=timefinish mineventheight=mineventheight-->

        <p class="mt-4"><b>{% trans 'The whole program (session by session)'%}</b></p>
        <p class="mb-3" class="loading"><a href="{% url 'my_app:program' confm.id %}" target="_blank" style="color: {{ color_guide2 }};">{% trans 'Plenaries:'%} {{ confm.title }}</a></p>


        {% for confd in confds %}
            {% if confd.website.showprogram %}
            <p class="mb-3" class="loading"><a href="{% url 'my_app:program' confd.id %}" target="_blank" style="color: {{ color_guide2 }};">{% if  confd.daughterconfstarwars %}{{ confd.masterconfdaughtername }}{% else %} S{{ confd.masterconfdaughterposition }} {% endif %}: {{ confd.title }}</a></p>
            {% endif %}
        {% endfor %}
        <br>

</div>


<script>
    $("body").on('change','.success.addtoschedule', function () {
        var self = $(this);
        //alert('t');
        //if (self.is(":checked")) {
            console.log("checkbox  id =" + self.attr("id") + " is checked ");
            //$("#content").html('yo');
            $.ajax({
            url : '/changeschedulemulti/', // the endpoint
            type : "POST", // http method
            data : {    confnum : self.attr("id"),//thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2')
                //$("div[id='content']").text('');
                //$("#content").remove();
                //var sched = ;
                if (json.success == 1) {
                    //alert('suc');
                    //$("#content").append(sched)
                    //$("#content").load()
                    //$('#content').load('/sched', {'loca':"createconf", 'confnum':"7", 'start_date':"01/01/01",'csrfmiddlewaretoken': "{{ csrf_token }}",});
                    var selected = [];
                    $('#cb input:checked').each(function() {
                        selected.push($(this).attr('id'));
                        //alert($(this).attr('id'));
                    });
                    //alert(selected);
                    //if (selected.length == 1 && self.is(":checked")) {
                     //   alert('load');
                       // $('#content').load('/sched/' + json.confnum + '/', {
                         //   'len2': selected.length.toString(),
                           // 'session2': selected.toString(),
                            //'csrfmiddlewaretoken': "{{ csrf_token }}"
                        //});
                    //}else{
                        //alert('pasload');
                        url2 = "{% url 'my_app:apischedule' '00000000000000' '11111111111' %}"
                        url2 = url2.replace('00000000000000', json.confnum).replace('11111111111',selected.toString());
                        //alert(url2);

                        //var t=selected.toString();
                        //scheduler.init('scheduler_here', starting_date, "week");
                        //scheduler.load(("apischedule/"+json.confnum));
                        scheduler.clearAll()
                        scheduler.load(url2);
                        scheduler.setCurrentView();

                    //}

                }
                console.log("changeschedulemulti"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });

        //} else {
          //  console.log("Id = " + self.attr("id") + " is Unchecked ");
        //}
    });
</script>


              {% else %}
                {% if conftopass.daughterconf %} <a style="color: {{ color_guide2 }}" href="{% url 'my_app:website' confma.id 'program' %}" target="_blank">{% trans 'See program for other sessions?'%}</a> {% endif %}
                  <div id="content" class="mb-5 pb-5 loading">
                {% include "my_app/schedule.html" with loca="joinconf" confnum=conftopass.id start_date=start_date timestart=timestart timefinish=timefinish mineventheight=mineventheight heighthr=heighthr minieventtime=minieventtime opacity=opacity %}
                  </div>
              {% endif %}

              {% trans 'Your timezone is:'%}
                  <script>
                      tz=Intl.DateTimeFormat().resolvedOptions().timeZone;
                      document.write(tz);
                      //document.getElementById("test").innerHTML = tz;
                  </script>
                    <div class="mb-5 pb-5">
                    <!--<p>The UTC time is {{ today|utc }}</p>-->
                    <p>{% trans 'The local time for the program is'%} {{ today|localtime }}</p>
                    <form action="{% url 'my_app:set_timezone' confnum %}" method="POST">
                    {% csrf_token %}
                        <label for="timezone">{% trans 'Change program time zone?'%}</label>
                                        <div class="row">
                                          <div class="col-4"></div>
                                            <div class="col-4">
                        <select name="timezone" class="browser-default custom-select">
                            {% for tz in timezones %}
                                <option value="{{ tz }}"{% if tz == currenttz %} selected{% endif %}>{{ tz }}</option>
                                <!--<option value="{{ tz }}"{% if tz == TIME_ZONE %} selected{% endif %}>{{ tz }}</option>-->
                            {% endfor %}
                        </select>
                        </div>
                        <div class="col-4"></div>
                        <div class="col-12 mt-1">
                        <input type="submit" value="{% trans 'Change'%}">
                        </div>
                    </div>
                    </form>
                    </div>

          {% else %}
            <h4>{% trans 'The program is only visible by accepted participants.'%}</h4>
          {% endif %}

          {% else %}
            <h4>{% trans 'The organizers are still working on the program. It will be displayed as soon as possible.'%}</h4>
          {% endif %}
      {% endifequal %}

        {% ifequal link 'timeline' %}
        {% if conftopass.website.showprogram %}
              {% if conftopass.website.onlypprogram and acc or not conftopass.website.onlypprogram  %}


                  <script type="text/javascript" src="https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"></script>
                  <link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet" type="text/css" />
                <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>


                    <style type="text/css">
                        /*body {
                          font-family:  purisa, 'comic sans', cursive;
                        }*/

                        .vis-timeline {
                          border: 2px solid purple;
                          font-family:  purisa, 'comic sans', cursive;
                          font-size: 12pt;
                          background: #ffecea;
                        }

                        .vis-item {
                          border-color: #F991A3;
                          background-color: pink;
                          font-size: 15pt;
                          color: purple;
                          box-shadow: 5px 5px 20px rgba(128,128,128, 0.5);
                        }

                        .vis-item,
                        .vis-item.vis-line {
                          border-width: 3px;
                        }

                        .vis-item.vis-dot {
                          border-width: 10px;
                          border-radius: 10px;
                        }

                        .vis-item.vis-selected {
                          border-color: green;
                          background-color: lightgreen;
                        }

                        .vis-time-axis .vis-text {
                          color: purple;
                          padding-top: 10px;
                          padding-left: 10px;

                        }

                        .vis-time-axis .vis-text.vis-major {
                          font-weight: bold;
                        }

                        .vis-time-axis .vis-grid.vis-minor {
                          border-width: 2px;
                          border-color: pink;
                        }

                        .vis-time-axis .vis-grid.vis-major {
                          border-width: 2px;
                          border-color: #F991A3;
                        }

                        /*.vis-group {
                            text-align: right!important;
                        }*/

                        .menu {
                          /*position: absolute;
                          display: table-cell;
                          vertical-align: middle;
                          top: -55px;
                          right: 0;
                          margin: 10px;*/
                          padding-bottom: 10px;
                          z-index: 9999;
                        }
                </style>
          <div><small><a href="{% url 'my_app:website' confnum 'program' %}" style="color: {{ color_guide2 }};">{% trans 'Go to the Program?'%}</a></small></div>

                          <p class="lead" id="timel">{% trans 'Timeline' %} <i class="fas fa-clock"></i></p>

                        <p>{% trans '(zoom in and out with your mouse or navigation bar to see more details)'%}</p>

                        <div id="visualization" class="mr-4 ml-3 mb-4" style="text-align: left!important;">
                            <div class="menu">
                              <span>{% trans 'zoom out'%} </span>
                              <input id="sliderZoom" type="range" class="range" name="a" min="-1" max="1" step="0.1" value="0" title="Better use keyboard to each level zoom!" />
                              <span> {% trans 'zoom in'%} </span>
                              <input type="button" id="fit" value=" &#8635; " title="reset" />
                              <input type="button" id="moveLeft" value="Move left" title="Move left" />
                              <input type="button" id="moveRight" value="Move right" title="Move right" />
                              <select name="dayvis" id="day-select">
                                <option value="">{% trans '--Select a specific day?--'%}</option>
                                  {% for s in starttimeline %}
                                        <option value="{{ s }}">{{ s }}</option>
                                  {% endfor %}
                            </select>
                            </div>
                        </div>

                        {% trans 'Your timezone is:'%}
                  <script>
                      tz=Intl.DateTimeFormat().resolvedOptions().timeZone;
                      document.write(tz);
                      //document.getElementById("test").innerHTML = tz;
                  </script>
                    <div class="mb-5 pb-5">
                    <!--<p>The UTC time is {{ today|utc }}</p>-->
                    <p>{% trans 'The local time for the timeline is'%} {{ today|localtime }}</p>

                    <form action="{% url 'my_app:set_timezone' confnum 'timel' %}" method="POST">
                    {% csrf_token %}
                        <label for="timezone">{% trans 'Change timeline time zone?' %}</label>
                                        <div class="row">
                                            <div class="col-4"></div>
                                            <div class="col-4">
                        <select name="timezone" class="browser-default custom-select">
                            {% for tz in timezones %}
                                <option value="{{ tz }}"{% if tz == currenttz %} selected{% endif %}>{{ tz }}</option>
                                <!--<option value="{{ tz }}"{% if tz == TIME_ZONE %} selected{% endif %}>{{ tz }}</option>-->
                            {% endfor %}
                        </select>
                        </div>
                        <div class="col-4"></div>
                        <div class="col-12 mt-1">
                        <input type="submit" value="{% trans 'Change'%}">
                        </div>
                    </div>
                    </form>
                    </div>
                      <script>
    function loadtimelineb() {
        console.log("timeline is working!"); // sanity check
        //alert($(this).closest("form").attr('id'));
        //alert($(this));
        //alert('what');
        //console.log(thisObj.closest("form").find('.pconfnum').val());
        //alert(thisObj.closest("form").find('.pemail').val()+thisObj.closest("form").find('.pconfnum').val());
        $.ajax({
            url : '/apitimeline/', // the endpoint
            type : "POST", // http method
            data : {
                        confnum : {{ confnum }},//$('#confnumid').val(),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),

                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2');
                //alert('f'+json.starturl)
                //window.open(json.starturl, '_blank');
                //$("#sch").text('');
                var container = document.getElementById('visualization');

                      // note that months are zero-based in the JavaScript Date object
                     /* var items = new vis.DataSet([
                        {start: new Date(2010,7,23,22.5,0,0), content: '<div>Conversation</div><img src="{% static 'img/avatar-1.jpg' %}" width="30px"><div><small>Quentin Kral</small></div>'},
                        {start: new Date(2010,7,23,23,0,0), content: '<div>Mail from boss</div><img src="{% static 'img/avatar-2.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,16,0,0), content: 'Report'},
                        {start: new Date(2010,7,24,17,0,0), end: new Date(2010,7,24,18,0,0), content: 'Traject A'},
                        {start: new Date(2010,7,24,18,0,0), content: '<div>Memo</div><img src="{% static 'img/avatar-3.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,19,0,0), content: '<div>Phone call</div><img src="{% static 'img/avatar-1.jpg' %}" width="30px">'},
                        {start: new Date(2010,7,24,20,0,0), end: new Date(2010,7,24,21,0,0), content: 'Traject B'},
                        {start: new Date(2010,7,24,21,0,0), content: '<div>Report</div><img src="{% static 'img/avatar-2.jpg' %}" width="30px">'}
                      ]);*/

                      //str.replace(/^"|"$/g, '');
                      var items2=new vis.DataSet(JSON.parse(json.timelineinput));
                      //var items2=new vis.DataSet([{start:"2021-07-30 10:00:00",content:'ok'}]);

                      //console.log(JSON.parse(json.timelineinput));

                      var options = {
                        start: json.startd,//new Date(),
                          //start:'auto',
                        /*end: new Date(100000*60*60*24 + (new Date()).valueOf()),*/
                        loadingScreenTemplate: function() {
                          return '<br><br><h4>Loading Timeline...</h4>'
                        },
                        editable: false,//true if want to allow to move position and size
                        margin: {
                          item: 20,
                          axis: 40
                        },
                        //zoomMax: 31536000000, // just one year
                        //zoomMax: 315360000000000, // 10,000 years is maximum possible
                        //zoomMin: 10 // 10ms
                      };

                  var timeline = new vis.Timeline(container, items2, options);

                timeline.fit(items2.getIds());
                //timeline.moveTo(new Date(), { animation: true });//or
                //timeline.setWindow('2014-01-01', '2014-04-01');

                $('#day-select').change(function(){
                      var parts = $(this).val().split("-");
                      var dt = new Date(
                        parseInt(parts[0], 10),      // year
                        parseInt(parts[1], 10) - 1,  // month (starts with 0)
                        parseInt(parts[2], 10)       // date
                      );
                      dt.setDate(dt.getDate() + 1);
                      parts[0] = "" + dt.getFullYear();
                      parts[1] = "" + (dt.getMonth() + 1);
                      if (parts[1].length < 2) {
                        parts[1] = "0" + parts[1];
                      }
                      parts[2] = "" + dt.getDate();
                      if (parts[2].length < 2) {
                        parts[2] = "0" + parts[2];
                      }
                      //alert($(this).val()+' '+parts.join("-"));

                    timeline.setWindow($(this).val(), parts.join("-"));
                })
                                                  /**
                     * Move the timeline a given percentage to left or right
                     * @param {Number} percentage   For example 0.1 (left) or -0.1 (right)
                     */
                function move(percentage) {
                  var range = timeline.getWindow();
                  var interval = range.end - range.start;
                  timeline.setWindow({
                    start: range.start.valueOf() - interval * percentage,
                    end: range.end.valueOf() - interval * percentage
                  });
                }

                // attach events to the navigation buttons
                document.getElementById("moveLeft").onclick = function() {
                  move(0.2);
                };
                document.getElementById("moveRight").onclick = function() {
                  move(-0.2);
                };

                // Using slider to zoomIn or zoomOut
                document.getElementById("sliderZoom").addEventListener("input", function(e) {
                  var value = this.value;
                  if (value < 0) {
                    var start = moment().year(moment().year() - 100000), // to adjust with options
                      end = moment().year(moment().year() + 1);
                    timeline.zoomOut(-value);
                    //if (value === "-1") timeline.setWindow(start, end);
                  } else if (value > 0) {
                    var start = moment(), end = moment(moment().utc() + 10);
                    timeline.zoomIn(value);
                    /*if (value === "1") {
                        //alert(start + ' ' + end);
                        timeline.setWindow(start, end);
                    }*/
                  } else {
                    timeline.fit(items2.getIds());
                    this.value = 0;
                  }
                });

                // To reset zoom initial state
                document.getElementById("fit").onclick = function() {
                  //$('.range').next().text('0'); // set default if to use output with input range
                  document.getElementById("sliderZoom").value = 0;
                  timeline.fit(items2.getIds());
                };

                //console.log(json); // log the returned json to the console
                //var child = document.getElementById(json.idarg);
                //document.body.removeChild(child);

            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });
    };
    </script>

        <script>
        $(document).ready(function() {

            loadtimelineb();

        })

        </script>

          {% else %}
            <h4>{% trans 'The timeline is only visible by accepted participants.'%}</h4>
          {% endif %}

          {% else %}
            <h4>{% trans 'The organizers are still working on the timeline. It will be displayed as soon as possible.'%}</h4>
          {% endif %}
      {% endifequal %}
       {% ifequal link 'abstracts' %}
           {% if conftopass.website.onlypabstract and acc or not conftopass.website.onlypabstract  %}
           <div class="row">
                    <div class="col-12 mr-3 mb-2">
                        <form enctype="multipart/form-data" method="POST" id="formdown" action="{% url 'my_app:booklet' %}">
                            {% csrf_token %}
                            <input type="hidden" name="confnumx" value="{{ confnum }}" />
                        <button type="submit" id="butabs" class="btn btn-secondary a-btn-slide-text mt-3 mb-2 float-center" data-toggle="tooltip" data-placement="right" title="{% trans 'Click this button to download the abstract book for accepted talks'%}" value="booklet">
                         <span class="fa fa-book" aria-hidden="true"></span>
                            <span><strong>{% trans 'Download the abstract book'%}</strong></span></button>
                        </form>


                    </div>
                </div>
                        {% if messages %}
                        {% for message in messages %}
                            {%if "human" in message.tags %}
                                <div class="alert alert-danger mt-2" role="alert">
                                    <h4 style="color: red;"><strong>{{ message }}</strong></h4>
                                </div>
                            {% endif %}
                            {%if "yes" in message.tags %}
                                <div class="alert alert-success mt-2" role="alert">
                                    <h4 style="color: blue;"><strong>{{ message }}</strong></h4>
                                </div>
                            {% endif %}
                        {% endfor %}
                      {% endif %}

        <p class="lead">{% trans 'Abstracts'%} <i class="fas fa-comments"></i></p>
           <p>{% trans 'There is a total of'%} {{ abstract|length }} {% trans 'abstract'%}{{ abstract|length|pluralize:",s" }}.</p>

               {% if abstract %}
               <div class="row justify-content-center mt-2 mb-3">
            <div class="col-12 col-md-10 col-lg-8 mb-3">
                    <div class="card card-sm">
                    <div class="card-body row no-gutters align-items-center">
                        <div class="col-auto mr-1 mt-1">
                            <i class="fas fa-search h4 text-body"></i>
                        </div>
                        <!--end of col-->
                        <div class="col">
                            <input class="form-control form-control-lg form-control-borderless" id="q" type="search" placeholder="{% trans "Search through abstracts (by title, content, or speaker's name)"%}">
                        </div>
                        <!--end of col-->
                        <div class="col-auto">
                            <button class="btn btn-lg btn-info ml-1" type="submit">{% trans 'Search'%}</button>
                        </div>
                        <!--end of col-->
                    </div>
                    </div>
            </div>
            <!--end of col-->
        </div>
        {% endif %}

           <section class="pt-5 pb-5">
  <div class="container">
    <div class="row d-flex " id="abstomod">
       {% for abs in abstract %}
        <div class="col-md-6 col-sm-12 col-lg-4 col-xl-4 mb-4 mt-2">
            <div class="card  h-100  {% if abs.type == 1 %}border-danger{% else %}border-light{% endif %} bg-light shadow" {% if abs.type == 1 %} style="border: 5px solid black;"{% endif %}>
                <div class="card-body d-flex-row">
                    <blockquote class="blockquote mb-4 pb-2">
                        <p class="mb-0 font-weight-bold">{{ forloop.counter }}) {{ abs.title }}</p>
                            {% if abs.user.userprofileinfo.orcid %}
                                <a href="https://orcid.org/{{ abs.user.userprofileinfo.orcid }}" target="_blank"><footer class="blockquote-footer" style="color: blue;">{{ abs.user.first_name }} {{ abs.user.last_name }} {% if abs.user.userprofileinfo.institute %}- {{ abs.user.userprofileinfo.institute }} {% endif %}{% if abs.user.userprofileinfo.job %}({{ abs.user.userprofileinfo.job }}){% endif %}</footer></a>
                            {% else %}
                                <footer class="blockquote-footer">{{ abs.user.first_name }} {{ abs.user.last_name }} {% if abs.user.userprofileinfo.institute %}- {{ abs.user.userprofileinfo.institute }} {% endif %}{% if abs.user.userprofileinfo.job %}({{ abs.user.userprofileinfo.job }}){% endif %}</footer>
                            {% endif %}
                            <div class="meta-item ml-auto">
                                <p {% if abs.type == 1 %}style="color: red;"{% endif %}><small>{{abs.get_type_display}}</small></p>
                            </div>
                        {% if abs.user.userprofileinfo.profile_pic %}
                            <p><img src="{{ abs.user.userprofileinfo.profile_pic.url }}" alt="{% trans 'Profile pic'%}" style="width:100px;!important"></p>
                        {% endif %}
                    </blockquote>
                    <div class='shorttext'><p class="card-text mb-5">{{ abs.abstract|truncatewords_html:75|safe }}</p></div>
                    <div class='fulltext' style="display: none;"><p class="card-text mb-5">{{ abs.abstract|safe }}</p></div>

                    {% if abs.abstract|truncatewords_html:75|safe != abs.abstract|safe %}
                        <a href="#" class="more" style="color: black;"><i class="fas fa-caret-down"></i> {% trans 'READ MORE'%}</a>
                    {% endif %}
                    <div class="w-100 pb-1"></div>
                    <!--<div class="d-flex align-items-center align-self-end">-->
                        <div class="m-2">
                            <div class="mailabs"><button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum abs.user.username 'abstracts' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>

                                <!--<i class="fa fa-envelope m-2"><span class="ml-1"><a href="mailto:{{ emailabs|index:forloop.counter0 }}">{{ emailabs|index:forloop.counter0 }}</a></span></i></div>-->
                        </div>
                    </div>
                <!--</div>-->
            </div>
        </div>
        </div>
        {% endfor %}
    </div>
</div>
           </section>
           {% else %}
            <h4>{% trans 'The abstracts can only be accessed by accepted participants.'%}</h4>
           {% endif %}


<script>
    $('#q').on('input',function(e){
        //alert('Changed!'+$('#q').val());
        changeabsb();
    });

</script>

  <script>
        function changeabsb() {
            console.log("changeabs is working!"); // sanity check
            //console.log(thisObj.closest("form").find('.pfnplus').val());
            //alert(thisObj.closest("form").find('.pfnplus').val());
            //alert(idtalk+url+loopnum);
            $.ajax({
                url : '/changeabs/', // the endpoint
                type : "POST", // http method
                data : {
                            text : $('#q').val(),
                            confnum : {{ confnum }},
                            csrfmiddlewaretoken : '{{ csrf_token }}'
                        }, // data sent with the post request
                success : function(json) {

                    if(json.success){
                        //alert(json.text);
                        //$('#abstomod').html();
                        $('#abstomod').empty();

                        if (json.abs != '') {
                            var source = $("#result-template").html();
                            console.log(source);
                            var template = Handlebars.compile(source);
                            console.log(template);

                            // The 'template' function returns the rendered HTML
                            //var diva = template({results: json});
                            var context = json;
                            console.log(context);


                            var html = template(context);
                            $("#abstomod").append(html);
                        }else{
                            if (json.text) {
                                $("#abstomod").append('<h5>There are no abstracts related to: ' + json.text + '</h5>');
                            }else{
                                $("#abstomod").empty()
                            }
                        }
                    }
                    console.log("success plus"); // another sanity check
                },

                // handle a non-successful response
                error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }

            })
        };
</script>

  {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template">
        {{#each abs}}
            <div class="col-md-6 col-sm-12 col-lg-4 col-xl-4 mb-4 mt-2">
                <div class="card  h-100  {{#ifCond this.type '==' 1}}border-danger{{/ifCond}}{{#ifCond this.type '!=' 1}}border-light{{/ifCond}} bg-light shadow" {{#ifCond this.type '==' 1}} style="border: 5px solid black;"{{/ifCond}}>
                    <div class="card-body d-flex-row">
                        <blockquote class="blockquote mb-4 pb-2">
                            <p class="mb-0 font-weight-bold">{{inc @index}}) {{ this.title }}</p>
                            {{#with (lookup ../fn @index) as |f|}}
                            {{#with (lookup ../../ln @index) as |l|}}

                                {{#with (lookup ../../../orcid @index) as |o|}}<a href="https://orcid.org/{{o}}" target="_blank">{{/with}}<footer class="blockquote-footer" {{#with (lookup ../../../orcid @index) as |o|}}style="color: blue;"{{/with}}>{{f}} {{l}} {{#with (lookup ../../../institute @index) as |i|}}- {{i}} {{/with}}{{#with (lookup ../../../job @index) as |j|}}({{j}}){{/with}}</footer>{{#with (lookup ../../../orcid @index) as |o|}}</a>{{/with}}

                            {{#with (lookup ../../../abstype @index) as |a|}}
                            <div class="meta-item ml-auto">
                                <p {{#ifCond ../../../this.type '==' 1}}style="color: red;"{{/ifCond}}><small>{{a}}</small></p>
                            </div>
                            {{/with}}
                            {{#with (lookup ../../../profilepic @index) as |p|}}
                            {{#ifCond p '!=' ""}}
                                <p><img src="{{p}}" alt="Profile pic" style="width:100px;!important"></p>
                            {{/ifCond}}
                            {{/with}}
                            {{/with}}
                            {{/with}}
                        </blockquote>
                        <div class='shorttext'><p class="card-text mb-5">{{#with (lookup ../truncabs @index) as |tabs|}}{{#ifCond  tabs '!=' ""}}{{{tabs}}}{{/ifCond}}{{/with}}</p></div>
                        <div class='fulltext' style="display: none;"><p class="card-text mb-5">{{#ifCond  this.abstract '!=' ""}}{{{this.abstract}}}{{/ifCond}}</p></div>

                        {{#with (lookup ../truncabs @index) as |tabs2|}}{{#ifCond  tabs2 '!=' ../this.abstract}} <a href="#" class="more" style="color: black;"><i class="fas fa-caret-down"></i> READ MORE</a>{{/ifCond}}{{/with}}

                        <div class="w-100 pb-1"></div>
                            <div class="m-2">
                                <div class="mailabs"><button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="Send an email to this person" class="open-modal" data-url="/contact-person/{{ ../cf }}/{{#with (lookup ../usern @index) as |un|}}{{un}}{{/with}}/abstracts" value="email">
                                            <span class="fa fa-envelope" aria-hidden="true"></span></button>

                                </div>
                            </div>
                    </div>
                </div>
            </div>
        {{/each}}
    </script>
    {% endverbatim %}

      {% endifequal %}
        {% if conftopass.poster %}
        {% ifequal link 'posters' %}

          <a href="#" class="btn btn-secondary mt-2 mb-4" data-toggle="modal" data-target="#exampleModaltpos"> <strong>{% trans "Read the poster's guide"%}</strong> </a>

           {% if conftopass.poster %}
                  {% if conftopass.website.onlypposter and acc or not conftopass.website.onlypposter  %}

                      <p class="lead">{% trans 'Posters'%} <i class="fab fa-slideshare"></i></p>
           {% if postere %}
           <p>{% trans 'There is a total of'%} {{ postere|length }} {% trans 'poster'%}{{ postere|length|pluralize:",s" }}.</p>
               <!--<div class="tab-pane fade show" id="posters" role="tabpanel">-->

               {% if postere %}
               <div class="row justify-content-center mt-2 mb-3">
            <div class="col-12 col-md-10 col-lg-8 mb-3">
                    <div class="card card-sm">
                    <div class="card-body row no-gutters align-items-center">
                        <div class="col-auto mr-1 mt-1">
                            <i class="fas fa-search h4 text-body"></i>
                        </div>
                        <!--end of col-->
                        <div class="col">
                            <input class="form-control form-control-lg form-control-borderless" id="qpos" type="search" placeholder="{% trans "Search through posters (by title, content, or speaker's name)" %}">
                        </div>
                        <!--end of col-->
                        <div class="col-auto">
                            <button class="btn btn-lg btn-info ml-1" type="submit">{% trans 'Search'%}</button>
                        </div>
                        <!--end of col-->
                    </div>
                    </div>
            </div>
            <!--end of col-->
        </div>
        {% endif %}

                       <section class="pt-2 pb-2">
              <div class="container">
              {% if idposters|length > 1 %}
                  <h4 class="mb-5"><a id="ranpos" data-toggle="modalo" data-target="#extraLargeModal" data-url="{% url 'my_app:posters' idposters|index:randpos %}"  href="#extraLargeModal" style="color: {{ color_guide2 }}"><strong><i class="fas fa-random"></i> View random poster?</strong></a></h4>
                {% endif %}

                <div class="row d-flex" id="postomod">
                   {% for poster in postere %}
                       <div class="col-md-8 col-sm-12 col-lg-6 col-xl-6 mb-4 mt-2">
                        <div class="card  h-100 border-light bg-light shadow">
                            <div class="card-body d-flex-row">
                                <blockquote class="blockquote mb-4 pb-2">
                                    <p class="mb-0 font-weight-bold">{{ poster.title }}</p>
                                    {% if poster.user.userprofileinfo.orcid %}
                                        <a href="https://orcid.org/{{ poster.user.userprofileinfo.orcid }}" target="_blank"><font color="blue">{{ poster.user.first_name }} {{ poster.user.last_name }} {% if poster.user.userprofileinfo.institute %}- {{ poster.user.userprofileinfo.institute }} {% endif %}{% if poster.user.userprofileinfo.job %}({{ poster.user.userprofileinfo.job }}){% endif %}</font></a>
                                    {% else %}
                                        <font color="black">{{ poster.user.first_name }} {{ poster.user.last_name }} {% if poster.user.userprofileinfo.institute %}- {{ poster.user.userprofileinfo.institute }} {% endif %}{% if poster.user.userprofileinfo.job %}({{ poster.user.userprofileinfo.job }}){% endif %}</font>
                                    {% endif %}
                                    <p>{{poster.get_type_display}} {{ forloop.counter }}</p>
                                </blockquote>
                                <div class='shorttext'><p class="card-text mb-5">{{ poster.abstract|truncatewords_html:100|safe }}</p></div>
                                <div class='fulltext' style="display: none;"><p class="card-text mb-5">{{ poster.abstract|safe }}</p></div>

                                {% if poster.abstract|truncatewords_html:100|safe != poster.abstract|safe %}
                                    <a href="#" class="more" style="color: black;"><i class="fas fa-caret-down"></i> {% trans 'READ MORE' %}</a>
                                {% endif %}

                                <div class="container3">
                                {% if poster.slides %}

                                <a data-toggle="modalo" data-target="#extraLargeModal" data-url="{% url 'my_app:posters' poster.id %}"  href="#extraLargeModal">

                                <div style="text-align: center" class="image3">
                                {% thumbnail poster.slides "251x251" crop="center" as im %}
                                        <img src="{{im.url}}" height="{{im.height}}" width="{{im.width}}">
                                {% endthumbnail %}
                                </div>
                                <div class="middle2">
                                    <div class="text">{% trans 'See this poster'%}{% if poster.mp4_url %}{% trans '(+video)'%}{% endif %}{% trans '/Ask questions'%}</div>
                                </div>
                                </a>

                                    {% elif poster.mp4_url %}

                                    <a data-toggle="modalo" data-target="#extraLargeModal" data-url="{% url 'my_app:posters' poster.id %}"  href="#extraLargeModal">

                                <div style="text-align: center" class="image3">
                                    <p class="mt-5 mb-5"><h3 style="color: black;"><strong><i class="fas fa-play"></i> {% trans "Check out the poster's video"%}</strong></h3></p>
                                </div>
                                <div class="middle2">
                                    <div class="text">{% trans "See this poster's video/Ask questions"%}</div>
                                </div>
                                </a>

                                {% else %}
                                    <p class="mt-3"><i>{% trans 'The author is still working on their poster.'%}</i></p>
                                {% endif %}

                                </div>
                                <div class="w-100 pb-1"></div>
                                <!--<div class="d-flex align-items-center align-self-end">-->
                                    <div class="m-2">
                                    <div class="mailabs"><button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum poster.user.username 'abstracts' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>

                                    </div>
                                </div>
                                </div>
                            <!--</div>-->
                        </div>
                    </div>
                    {% endfor %}
                        </div>
              </div>
            </section>

            {% else %}
           <p>{% trans 'There is no posters ready to be shown so far.'%}</p>
           {% endif %}
              {% else %}
                      <h4 class="mt-3">{% trans 'The posters can only be seen by accepted participants.'%}</h4>
              {% endif %}
           {% endif %}

        <script>
    $('#qpos').on('input',function(e){
        //alert('Changed!'+$('#q').val());
        changeposb();
    });

</script>

  <script>
        function changeposb() {
            console.log("changepos is working!"); // sanity check
            //console.log(thisObj.closest("form").find('.pfnplus').val());
            //alert(thisObj.closest("form").find('.pfnplus').val());
            //alert(idtalk+url+loopnum);
            $.ajax({
                url : '/changepos/', // the endpoint
                type : "POST", // http method
                data : {
                            text : $('#qpos').val(),
                            confnum : {{ confnum }},
                            csrfmiddlewaretoken : '{{ csrf_token }}'
                        }, // data sent with the post request
                success : function(json) {

                    if(json.success){
                        //alert(json.text);
                        //$('#abstomod').html();
                        $('#postomod').empty();

                        if (json.pos != '') {
                            var source = $("#result-template-pos").html();
                            console.log(source);
                            var template = Handlebars.compile(source);
                            console.log(template);

                            // The 'template' function returns the rendered HTML
                            //var diva = template({results: json});
                            var context = json;
                            console.log(context);


                            var html = template(context);
                            $("#postomod").append(html);
                        }else{
                            if (json.text) {
                                $("#postomod").append('<h5>There are no posters related to: ' + json.text + '</h5>');
                            }else{
                                $("#postomod").empty()
                            }
                        }
                    }
                    console.log("success plus"); // another sanity check
                },

                // handle a non-successful response
                error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }

            })
        };
</script>

  {% verbatim %}
    <script type="text/x-handlebars-template" id="result-template-pos">
        {{#each pos}}
            <div class="col-md-8 col-sm-12 col-lg-6 col-xl-5 mb-4 mt-2">
                <div class="card  h-100  border-light bg-light shadow">
                    <div class="card-body d-flex-row">
                        <blockquote class="blockquote mb-4 pb-2">
                            <p class="mb-0 font-weight-bold">{{ this.title }}{{ this.slides }}</p>
                            {{#with (lookup ../fn @index) as |f|}}
                            {{#with (lookup ../../ln @index) as |l|}}

                                {{#with (lookup ../../../orcid @index) as |o|}}<a href="https://orcid.org/{{o}}" target="_blank"><font color="blue">{{/with}}{{f}} {{l}} {{#with (lookup ../../../institute @index) as |i|}}- {{i}} {{/with}}{{#with (lookup ../../../job @index) as |j|}}({{j}}){{/with}}{{#with (lookup ../../../orcid @index) as |o|}}</font></a>{{/with}}

                            {{#with (lookup ../../../postype @index) as |a|}}
                            <div class="meta-item ml-auto">
                                    <p>{{a}} {{ inc @index }}</p>
                            </div>
                            {{/with}}

                            {{/with}}
                            {{/with}}
                        </blockquote>
                        <div class='shorttext'><p class="card-text mb-5">{{#with (lookup ../truncabs @index) as |tabs|}}{{#ifCond  tabs '!=' ""}}{{{tabs}}}{{/ifCond}}{{/with}}</p></div>
                        <div class='fulltext' style="display: none;"><p class="card-text mb-5">{{#ifCond  this.abstract '!=' ""}}{{{this.abstract}}}{{/ifCond}}</p></div>

                        {{#with (lookup ../truncabs @index) as |tabs2|}}{{#ifCond  tabs2 '!=' ../this.abstract}} <a href="#" class="more" style="color: black;"><i class="fas fa-caret-down"></i> READ MORE</a>{{/ifCond}}{{/with}}


                        <div class="container3">

                                {{#with (lookup ../imu @index) as |imur|}}

                                <a data-toggle="modalo" data-target="#extraLargeModal" data-url="/posters/{{ this.id }}"  href="#extraLargeModal">

                                <div style="text-align: center" class="image3">
                                <img src="{{imur}}" height="{{#with (lookup ../../imh @index) as |imh|}}{{imh}}{{/with}}" width="{{#with (lookup ../../imw @index) as |imw|}}{{imw}}{{/with}}">
                                </div>
                                <div class="middle2">
                                    <div class="text">See this poster{{#ifCond this.mp4_url '!=' ""}}(+video){{/ifCond}}/Ask questions</div>
                                </div>
                                </a>
                                {{/with}}
                                {{#with (lookup ../mp4 @index) as |mp4|}}
                                    <a data-toggle="modalo" data-target="#extraLargeModal" data-url="/posters/{{ this.id }}"  href="#extraLargeModal">

                                <div style="text-align: center" class="image3">
                                    <p class="mt-5 mb-5"><h3 style="color: black;"><strong><i class="fas fa-play"></i> Check out the poster's video</strong></h3></p>
                                </div>
                                <div class="middle2">
                                    <div class="text">See this poster's video/Ask questions</div>
                                </div>
                                </a>
                            {{/with}}
                                {{#unless this.mp4_url}}
                                {{#with (lookup ../imjj @index) as |imjj|}}
                                    {{#ifCond  imjj '!=' "1"}}
                                        <p class="mt-3"><i>The author is still working on their poster.</i></p>
                                    {{/ifCond}}
                                {{/with}}
                                {{/unless}}


                                </div>

                        <div class="w-100 pb-1"></div>
                            <div class="m-2">
                                <div class="mailabs"><button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="Send an email to this person" class="open-modal" data-url="/contact-person/{{ ../cf }}/{{#with (lookup ../usern @index) as |un|}}{{un}}{{/with}}/abstracts" value="email">
                                            <span class="fa fa-envelope" aria-hidden="true"></span></button>

                                </div>
                            </div>
                    </div>
                </div>
            </div>
        {{/each}}
    </script>
    {% endverbatim %}

<div class="container tuto" style="color: black!important;">
     <div class="modal fade" id="exampleModaltpos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabeltpos" aria-hidden="true">
         <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
             <div class="modal-content">
                 <div class="modal-header">
                     <h5 class="modal-title" id="exampleModalLabeltpos"><strong>Learn how to interact with posters</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                 </div>
                 <div class="modal-body">
                     <div id="smartwizard">
                         <ul class="nav">
                             <li><a class="nav-link" href="#step-0">Step 0<br /><small>Important</small></a></li>
                             <li><a class="nav-link" href="#step-1">Step 1<br /><small>Overview</small></a></li>
                             <li><a class="nav-link" href="#step-2">Step 2<br /><small>View a poster</small></a></li>
                             <li><a class="nav-link" href="#step-3">Step 3<br /><small>Ask a question</small></a></li>
                             <li><a class="nav-link" href="#step-4">Step 4<br /><small>Video call</small></a></li>
                             <li><a class="nav-link" href="#step-5">Step 5<br /><small>For poster's owners</small></a></li>
                         </ul>
                         <div class="tab-content">
                             <div id="step-0" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Important</h3>

                                 <h5>It is recommended that you read all information here at least once before seeing posters!</h5>
                                 <p>Note that you can always come back here by clicking on this button <span><a href="#" class="btn btn-secondary py-0" style="font-size: 0.8em;color: #333;background-color: lightgrey;"> <strong>Read the poster's guide</strong> </a></span> at the top of the web page once the guide is closed.</p>

                                 <h5>First you have to create an account on CarbonFreeConf that you will be able to use for other conferences later. If you do not and that organizers allow everyone to see posters, you may be able to view posters but not ask questions or upvote them.
                                {% if user.is_authenticated %}
                                    You have already created an account and logged-in so now you can go to the next step.</h5>
                                {% else %}
                                    To register on CarbonFreeConf, click the sign-up button <a href="#" class="btn-lg btn-primary py-0" style="font-size: 0.8em;">Sign-up</a> when you close this guide <small>(or sign-in directly using your login and password if you have already signed-up in the past, even if it was for another CarbonFreeConf-erence)</small>.
                                </h5>
                                {% endif %}
                             </div>
                             <div id="step-1" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Overview</h3>
                                     <h5>Go to the poster page to access all posters validated by organizers</h5>

                                 <p>Once accepted the posters become visible (when organizers have decided so). There may be a delay between acceptance and upload of the poster by the participants. In this case you will see the poster's abstracts (click READ MORE if the abstract is shortened) but not its content.</p>
                                <p>When two or more posters are uploaded, you can see the <a href="#" style="color: {{ color_guide2 }}"><strong><i class="fas fa-random"></i> View random poster?</strong></a> link appear, which you can click to discover posters at random.</p>
                                <p>You can also upvote posters if you like them and ask questions to (or even call) poster's presenters as will be described in the next steps.</p>
                                <p>If you are looking for a specific poster, use the search bar at the top to look through all posters by title, content or speaker's name.</p>
                                 <p>If you have a poster of your own, you may want to check the last section of this guide urgently!</p>
                             </div>
                             <div id="step-2" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">View a poster</h3>
                                 <h5>Organizers can decide whether posters are public or only accessible to participants. In case of public access, make sure to log-in anyway to have access to all functionalities when viewing posters.</h5>
                                <p>To see a poster, nothing easier: click 'Poster' in the top menu and you will see all accepted posters in the session.</p>
                                 <p>Then look through the posters and if you see written 'The author is still working on their poster', it means that they have not uploaded their pdf or recording yet. Otherwise you will see a mini-image (thumbnail) of the poster (if a pdf has already been uploaded) or 'Check out the poster's video' (if only a recording was uploaded and no pdf file).
                                 </p>
                                 <p>You can then click on the thumbnail of the poster or <a href="#"><span style="color: black;"><strong><i class="fas fa-play"></i> Check out the poster's video</strong></span></a> to see the actual poster. It will open a foreground window in which the poster and/or poster's recording appears. Indeed, poster recordings are sometimes added by participants to directly explain their poster in a video. </p>
                                 <p><strong>You can upvote posters</strong>: To upvote a poster, open it and then under the poster (or the video recording) you will see the 'Total number of upvotes' for this poster and a thumb up symbol below. Click on the thumb up to give one more vote to the poster.
                                You are only given 3 votes for one given conference so use them wisely. Note that your vote cannot be changed after the fact. The organizers can see the posters that rank higher and may decide to give them an official or unofficial prize.</p>

                             </div>
                             <div id="step-3" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Ask a question</h3>
                                 <h5>Curious about the poster? Then ask a question to the poster's maker.</h5>
                                 <p>When you have opened a poster, you can see at the bottom (if you are logged-in) that a chat room is accessible. You can write your question there as this room is dedicated to the poster you are visiting. </p>
                                      <p>Do not hesitate to tag the poster's maker at the end of your question by pre-typing @ and then the participant's last name and you will see a drop down list from which you can just pick the right person. This will ensure the poster owners get notified of the question immediately and reply quickly (they may and should have activated notifications on their poster's channel anyway but it is safer to tag them in case they did not).</p>
                                <p>Poster presenters sometimes add some videos and/or vocal recordings directly in their channel (look for it through past messages). </p>
                                 <p>Note that once you have visited a poster, it is added to your private group list in the chat area and you can easily go back to the question area from the chat without going through the poster page again. If you do not see the poster's channel in your list of channels on the left hand side of the chat area, use the top search bar (that opens after clicking the magnifying glass symbol) and type the name of the poster's presenter to find the right channel (you can even add the channel to your favourites if you often access it).</p>
                                 <p>If you have a private question that you do not wish to share publicly, use the <a href="#" class="btn btn-dark a-btn-slide-text py-0">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></a> button below the mini-image of the poster (thumbnail) and then type in your message that will be sent via email to the poster's maker.</p>
                             </div>
                             <div id="step-4" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Video call with the poster's presenter</h3>
                                <h5>You can make a video call with the poster's maker if you wish to talk to them.</h5>
                                <p>To call the poster's presenters, go to their poster chat rooms and then push the 'phone' button at the top right of the room. A video call will then be started and will be accessible to participants visiting the room (after they click: join the call). If the poster's presenter is not present in the video call, contact them ahead (either directly in the room or via private message) and arrange for a time to meet and try again.</p>
                                 <p>The virtual room offers many options (e.g. share screen) to make the experience smoother and interactive. Go try it now! Note that this option is available everywhere, not just in poster's rooms.</p>
                                </div>
                            <div id="step-5" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">For poster's owners</h3>
                                <h5>A few tips and tricks for poster's owners</h5>
                                <p><strong>First</strong>, go check your poster yourself as if you were a random participant and verify that everything is what you expected.</p>
                                <p><strong>Second</strong>, go to the chat area (below the poster) and you can add a message saying that you are around to answer questions. You can also easily add a vocal recording in the chat area by pushing the microphone button or even add a video by pushing the plus button and then 'video message'. There are many options that you can play with.</p>
                                <p><strong>Third</strong>, you should activate the notifications in your poster's channel to be sure to know when other participants ask questions. To do so, click the 3 vertical dots at the top right of the room and select 'notification preferences'. Then make your own set-up, whether you want to be contacted via email, be notified on your screen or via a sound, ... (you should change the default option to something else as default means 'do nothing' in our case). </p>
                                <p><strong>Fourth</strong>, go check regularly your poster's channel to make sure you do not miss any comments and tag participants when you reply to them so that they are notified.</p>
                                <p><strong>Fifth</strong>, you have the option to click on the phone at the top right of your room to open a video call and talk to other participants. If you do so, you may want to warn others in advance (e.g. in the chat room directly) so that they do not miss you and can ask live questions.</p>
                                <p><strong>Sixth</strong>, you can add files to your channel if needed with a simple drag-and-drop or by clicking the plus button at the bottom left of the chat room and selecting 'add a file from my computer'.</p>
                                <p><strong>Seventh</strong>, you can see who consulted your poster by clicking on the 'member' button at the top right of your chat room and contact them from there if needed.</p>
                                <p><strong>Eight</strong>, you can explore all the options as there are many not described here (e.g. pin a message, ...).</p>

                             </div>
                         </div>
                     </div>
                 </div>
                   <div class="modal-footer">
                     <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                   </div>
             </div>
         </div>
     </div>
 </div>

<script>
   var gotit = 0;

    $('#exampleModaltpos').on('shown.bs.modal', function() {

       //alert('ok');
        if (!gotit) {
            $.getScript("https://unpkg.com/smartwizard@5/dist/js/jquery.smartWizard.min.js", function () {
                var $def = $.Deferred();
                if (typeof smartWizard === 'undefined') { // "foo" isn't available
                    //alert('ok');
                    var attempts = 0;
                    // create an interval
                    // that will check each 100ms if the "foo" function
                    // was loaded
                    var interval = setInterval(function () {
                        if (typeof smartWizard !== 'undefined') { // loaded
                            window.clearInterval(interval);
                            $def.resolve();
                        }
                        // after X unsuccessfull attempts, abort the operation
                        else if (attempts >= 100) {
                            window.clearInterval(interval);
                            $def.reject('Something went wrong');
                            //alert('ik');
                        }

                        attempts++;
                    }, 100);
                } else { // "foo" is available
                    $def.resolve();
                    //alert('il');
                }
                return $def.promise();
            }).then(function () {
                // at this point "foo()" is definitely available.
                $('head').append('<link rel="stylesheet" type="text/css" href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css">');
                //$('head').append('<link rel="stylesheet" type="text/css" href="https://res.cloudinary.com/dxfq3iotg/raw/upload/v1581152091/smartwizard/smart_wizard_theme_arrows.min.css">');

                gotit = 1;
                //alert('ah?');
                $('#smartwizard').smartWizard({
                      selected: 0, // Initial selected step, 0 = first step
                      theme: 'arrows', // theme for the wizard, related css need to include for other than default theme
                      justified: true, // Nav menu justification. true/false
                      darkMode:false, // Enable/disable Dark Mode if the theme supports. true/false
                      autoAdjustHeight: true, // Automatically adjust content height
                      cycleSteps: false, // Allows to cycle the navigation of steps
                      backButtonSupport: true, // Enable the back button support
                      enableURLhash: true, // Enable selection of the step based on url hash
                      transition: {
                          animation: 'fade', // Effect on navigation, none/fade/slide-horizontal/slide-vertical/slide-swing
                          speed: '400', // Transion animation speed
                          easing:'' // Transition animation easing. Not supported without a jQuery easing plugin
                      },
                      toolbarSettings: {
                          toolbarPosition: 'bottom', // none, top, bottom, both
                          toolbarButtonPosition: 'right', // left, right, center
                          showNextButton: true, // show/hide a Next button
                          showPreviousButton: true, // show/hide a Previous button
                          toolbarExtraButtons: [] // Extra buttons to show on toolbar, array of jQuery input/buttons elements
                      },
                      anchorSettings: {
                          anchorClickable: true, // Enable/Disable anchor navigation
                          enableAllAnchors: true, // Activates all anchors clickable all times
                          markDoneStep: true, // Add done state on navigation
                          markAllPreviousStepsAsDone: true, // When a step selected by url hash, all previous steps are marked done
                          removeDoneStepOnNavigateBack: false, // While navigate back done step after active step will be cleared
                          enableAnchorOnDoneStep: true // Enable/Disable the done steps navigation
                      },
                      keyboardSettings: {
                          keyNavigation: true, // Enable/Disable keyboard navigation(left and right keys are used if enabled)
                          keyLeft: [37], // Left key code
                          keyRight: [39] // Right key code
                      },
                      lang: { // Language variables for button
                          next: 'Next',
                          previous: 'Previous'
                      },
                      disabledSteps: [], // Array Steps disabled
                      errorSteps: [], // Highlight step with errors
                      hiddenSteps: [] // Hidden steps

                });
            }).fail(function () {
                // deal with the failure
                console.log('failure with smartwizard');
            });

        }
        //else{
            //alert('alr');
        //}
 });
</script>

      {% endifequal %}
        {% endif %}

        {% if conftopass.website.showdoc %}
        {% ifequal link 'doc' %}
            <p class="lead">{% trans 'Documents'%} <i class="fas fa-file"></i></p>
            <p class="mb-5"><small><i>{% trans 'Access slides, posters, papers deposited by the conference participants'%}</i></small></p>

            {% if conftopass.website.onlypdoc and acc or not conftopass.website.onlypdoc  %}
                <p class="lead">{% trans 'Abstracts'%} <i class="fas fa-comments"></i></p>
                {% if abstract %}
                    {% for abs in abstract %}
                        <p>{{ forloop.counter }}) {{ abs.get_type_display }} {% trans 'by'%} {{ abs.user.first_name }} {{ abs.user.last_name }} ({{ abs.title }})
                        {% if abs.slides and abs.slideshow %}
                            - <a href="{{ abs.slides.url }}" target="_blank" style="color: {{ color_guide2 }};">{% trans 'See document?'%}</a>
                        {% else %}
                            {% if abs.slides and not abs.slideshow %}
                                - {% trans 'Document not public'%}
                            {% else %}
                                - {% trans 'No associated document'%}
                            {% endif %}
                        {% endif %}
                        {% if abs.mp4_url and abs.mp4show %}
                            - <a href="{{ abs.mp4_url }}" target="_blank" style="color: {{ color_guide2 }};">{% trans 'See recording?'%}</a>
                        {% endif %}
                        {% if abs.paperurl %}
                            - <a href="{{ abs.paperurl }}" target="_blank" style="color: {{ color_guide2 }};">{% trans 'See linked article?'%}</a>
                        {% else %}
                            - {% trans 'No linked article'%}
                        {% endif %}
                        </p>
                    {% endfor %}
                {% else %}
                    <p>{% trans 'No accepted talks yet (come back soon).'%}</p>
                {% endif %}
                {% else %}
                <h5>{% trans 'The content of this page is only accessible to accepted participants of the conference.'%}</h5>
            {% endif %}

                {% if conftopass.poster %}
                  {% if conftopass.website.onlypdoc and acc or not conftopass.website.onlypdoc  %}
                        <p class="lead">{% trans 'Posters'%} <i class="fab fa-slideshare"></i></p>
                        {% if postere %}
                            {% for p in postere %}
                                <p>{{ forloop.counter }}) {{ p.get_type_display }} by {{ p.user.first_name }} {{ p.user.last_name }} ({{ p.title }})
                                {% if p.slides and p.slideshow %}
                                    - <a href="{{ p.slides.url }}" target="_blank" style="color: {{ color_guide2 }};">{% trans 'See poster?'%}</a>
                                {% else %}
                                    {% if p.slides and not p.slideshow %}
                                        - {% trans 'Poster not public'%}
                                    {% else %}
                                        - {% trans 'No poster yet'%}
                                    {% endif %}
                                {% endif %}
                                {% if p.mp4_url and p.mp4show %}
                                    - <a href="{{ p.mp4_url }}" target="_blank" style="color: {{ color_guide2 }};">{% trans 'See poster recording?'%}</a>
                                {% endif %}
                                {% if p.paperurl %}
                                    - <a href="{{ p.paperurl }}" target="_blank" style="color: {{ color_guide2 }};">{% trans 'See linked article?'%}</a>
                                {% else %}
                                    - {% trans 'No linked article'%}
                                {% endif %}
                                </p>
                            {% endfor %}
                        {% else %}
                            <p>{% trans 'No accepted posters yet (come back soon).'%}</p>
                        {% endif %}
                    {% endif %}
                {% endif %}
        {% endifequal %}
        {% endif %}

      {% ifequal link 'dates' %}
          <div class="row mx-auto justify-content-center align-items-center flex-column" style="min-height: 85vh;">
        <p class="lead">Dates <i class="fas fa-calendar"></i></p>
          <div><h3>{% trans 'From'%} {{ start_date2 }} {% trans 'to'%} {{ end_date2 }}<h3></div>
          <div><h5>{% trans 'Total duration is:'%} {{ duration_time }}.</h5></div>
          <div class="row">
          <div class="col-4" style="margin: 0 auto;">
          <hr style="background-color: white; border-top:2px dotted #fff">
          </div>
          </div>
          <div><a href="{% url 'my_app:website' conftopass.id 'program' %}" style="color: {{ color_guide2 }}">{% trans 'See the whole program?'%}</a></div>
          </div>
      {% endifequal %}
      {% ifequal link 'socloc' %}
                    <div class="row mx-auto justify-content-center align-items-center flex-column" style="min-height: 85vh;">
                    {% if messages %}
                        {% for message in messages %}
                            {%if "human" in message.tags %}
                                <div class="alert alert-danger mt-2" role="alert">
                                    <h4 style="color: red;"><strong>{{ message }}</strong></h4>
                                </div>
                            {% endif %}
                            {%if "yes" in message.tags %}
                                <div class="alert alert-success mt-2" role="alert">
                                    <h4 style="color: blue;"><strong>{{ message }}</strong></h4>
                                </div>
                            {% endif %}
                        {% endfor %}

                      {% endif %}
        {% if progorga %}
        <p class="lead">Program Committee <i class="fas fa-rocket"></i></p>
           {% for peop in peoplesocloc %}
               {% if peop.socloc == 1%}
            <ul class="list-group mb-5">
              <li class="list-group-item"> {{ peop.user.first_name }} {{ peop.user.last_name }} / {{ peop.user.userprofileinfo.institute }}
              <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum peop.user.username 'socloc' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>
              </li>
            </ul>
               {% endif %}
          {% endfor %}
        {% endif %}
        {% if orga %}
          <p class="lead">Organizers <i class="fas fa-eye"></i></p>
           {% for peop in peoplesocloc %}
               {% if peop.socloc == 2%}
            <ul class="list-group mb-5">
              <li class="list-group-item"> {{ peop.user.first_name }} {{ peop.user.last_name }} / {{ peop.user.userprofileinfo.institute }}
                  <button type="submit" class="btn btn-dark a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum peop.user.username 'socloc' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button>
              </li>
            </ul>
               {% endif %}

          {% endfor %}
                    {% endif %}
                    {% if not orga and not progorga %}
                        <h5>{% trans 'The organizers were not added yet!'%}</h5>
                    {% endif %}


                    </div>
      {% endifequal %}
      {% ifequal link 'contact' %}
          <div class="row mx-auto justify-content-center align-items-center flex-column" style="min-height: 85vh;">
            {% if messages %}
                {% for message in messages %}
                    {%if "human" in message.tags %}
                        <div class="alert alert-danger mt-2" role="alert">
                            <h4 style="color: red;"><strong>{{ message }}</strong></h4>
                        </div>
                    {% endif %}
                    {%if "yes" in message.tags %}
                        <div class="alert alert-success mt-2" role="alert">
                            <h4 style="color: blue;"><strong>{{ message }}</strong></h4>
                        </div>
                    {% endif %}
                {% endfor %}
            {% endif %}
              {% if progorga %}
        <p class="lead mb-5"><i class="fas fa-rocket"></i> {% trans 'Contact the Program Committee'%} <button type="submit" class="btn btn-secondary a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to the whole Program Committee'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum 'program_committee_contact_A3@8l0' 'contact' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span> </button></p>
            {% endif %}
          {% if orga %}
          <p class="lead mb-5"><i class="fas fa-eye"></i> {% trans 'Contact all the Organizers'%} <button type="submit" class="btn btn-secondary a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to all organizers at once'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum 'organizers_contact_A3@8l0op.' 'contact' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button></p>
          {% endif %}
          <h4>{% trans 'The main organizer'%}{{ organisers|length|pluralize:",s" }} <i class="fas fa-eye"></i></h4>
          {% if organisers %}
            {% for org in organisers %}
                <h5>{{ org.user.first_name }} {{ org.user.last_name }} <button type="submit" class="btn btn-secondary a-btn-slide-text" data-toggle="modall3" rel="tooltip" data-placement="top" title="{% trans 'Send an email to this person'%}" class="open-modal" data-url="{% url 'my_app:contactperson' confnum org.user.username 'contact' %}" value="email">
                                        <span class="fa fa-envelope" aria-hidden="true"></span></button></h5>
            {% endfor %}
          {% else %}
              <p>{% trans 'The organizers will be added soon...'%}</p>
          {% endif %}
            <h6 class="font-weight-bold mb-0 mt-5">CarbonFreeConf <i class="fas fa-heart"></i></h6>
            <p><a href="mailto:support@carbonfreeconf.com" style="color: {{ color_guide2 }}">support@carbonfreeconf.com</a></p>

            <!--<h6 class="font-weight-bold mb-0">Tel:</h6>
            <p>+33 (0) 6XXXXXXXX</p>-->
          </div>
      {% endifequal %}
      {% ifequal link 'video' %}
          <div class=container>
                  <!--<div class="border">-->
          {% if cansee == 0 %}
                {% if status == '0' %}
                    {% if conftopass.whorecording == "Everyone" %}
                {% if publicvi %}

        <div class="mt-2"><h5><i class="fas fa-file-video"></i> {% trans 'The video'%}{{ archiveurl|length|pluralize:",s" }} {% trans 'for the meeting:'%} <strong>{{ title }}</strong></h5></div>
        {% for vid in archiveurl %}
            {% if rights|index:forloop.counter0 == 'anybody' or okforyou == '1' %}
            <div class="mt-3"><h5>{% trans 'Here is the recording for the session'%}{% if conftopass.masterconf %}: '{{ sessiontit|index:forloop.counter0 }}'{% endif %} {% trans 'that started on'%} {{ start|index:forloop.counter0 }} {% trans 'and finished at'%} {{ end|index:forloop.counter0|date:"g:i a" }}</h5></div>
            {% if titles|index:forloop.counter0 %}<p><i><strong>{% trans 'Title:'%}</strong> {{ titles|index:forloop.counter0 }}</i></p>{% endif %}

                <p><small><a href="{% url 'my_app:video' redvimurl2|index:forloop.counter0  %}" style="color: {{ color_guide2 }}">{% trans 'Go to individual video page'%}</a></small></p>

        <div class="resp-container-vid mb-5">

            <iframe class="resp-iframe-vid"
                src="{{ vid }}" frameborder="0" allow="autoplay; fullscreen"
                allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true">
            </iframe>
        </div>
        <!--<div><a href="{{ mp4downloadurl|index:forloop.counter0 }}" target="_blank">See the video on Vimeo</a></div>-->
        {% endif %}
        {% endfor %}
        {% else %}
            <h5>{% trans 'No videos have been made public yet, be patient!'%}</h5>
    {% endif %}
                        {% else %}
                        <div class="mt-2"><h5><i class="fas fa-file-video"></i> {% trans 'The video'%}{{ archiveurl|length|pluralize:",s" }} {% trans 'for the meeting:'%} <strong>{{ title }}</strong></h5></div>
        {% for vid in archiveurl %}
            <div class="mt-3"><h5>{% trans 'Here is the recording for the session'%}{% if conftopass.masterconf %}: '{{ sessiontit|index:forloop.counter0 }}'{% endif %} {% trans 'that started on'%} {{ start|index:forloop.counter0 }} {% trans 'and finished at'%} {{ end|index:forloop.counter0|date:"g:i a" }}</h5></div>
            {% if titles|index:forloop.counter0 %}<p><i><strong>{% trans 'Title:'%}</strong> {{ titles|index:forloop.counter0 }}</i></p>{% endif %}

                <p><small><a href="{% url 'my_app:video' redvimurl2|index:forloop.counter0  %}" style="color: {{ color_guide2 }}">{% trans 'Go to individual video page'%}</a></small></p>

        <div class="resp-container-vid mb-5">

            <iframe class="resp-iframe-vid"
                src="{{ vid }}" frameborder="0" allow="autoplay; fullscreen"
                allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true">
            </iframe>
        </div>
        <!--<div><a href="{{ mp4downloadurl|index:forloop.counter0 }}" target="_blank">See the video on Vimeo</a></div>-->
        {% endfor %}
                        {% endif %}
                    {% endif %}


        {% if status == '2c' or status == '4' or status == '2b' or status == '2' or status == '3' %}
                <h5 class="mt-2"><strong>{% trans 'The organizers decided to record the meeting:'%} {{ title }}. </strong></h5>
                <p>{% trans 'All the conference videos will appear here (and on the conference website) once they are recorded and imported.'%}</p>
            <p><i>{% trans 'In the meantime, you can go check the archived videos'%} <a href="{% url 'my_app:archive' %}" style="color: {{ color_guide2 }}"><strong>{% trans 'here'%}</strong></a> {% trans 'if you are looking for some specific content close to your research field.'%}</i></p>

                  {% endif %}

            {% if status == '5' %}
                <h5 class="mt-2"><strong>{% trans 'The organizers decided not to record this meeting:'%} {{ title }}. </strong></h5>
                <p>{% trans 'You can go check the archived videos'%} <a href="{% url 'my_app:archive' %}" style="color: {{ color_guide2 }}"><strong>{% trans 'here'%}</strong></a> {% trans 'if you are looking for some specific content in your research field.'%}</p>

            {% endif %}
          {% else %}
            <h5 class="mt-2"><strong>{% trans 'Only the participants of the meeting'%} '{{ title }}' {% trans 'can see all the recordings.'%} </strong></h5>
                <p>{% trans 'You can go check the archived videos'%} <a href="{% url 'my_app:archive' %}" style="color: {{ color_guide2 }}"><strong>{% trans 'here'%}</strong></a> {% trans 'if you are looking for some specific content in your research field.'%}</p>

                {% if publicvi %}
              <div class="mt-2"><h5><i class="fas fa-file-video"></i> {% trans 'However, you can see the public videos of this meeting:'%}</h5></div>
        {% for vid in archiveurl %}
            {% if rights|index:forloop.counter0 == 'anybody' %}
            <div class="mt-3"><h5>{% trans 'Here is the recording for the session'%}{% if conftopass.masterconf %}: '{{ sessiontit|index:forloop.counter0 }}'{% endif %} {% trans 'that started on'%} {{ start|index:forloop.counter0 }} {% trans 'and finished at'%} {{ end|index:forloop.counter0|date:"g:i a" }}</h5></div>
            {% if titles|index:forloop.counter0 %}<p><i><strong>{% trans 'Title:'%}</strong> {{ titles|index:forloop.counter0 }}</i></p>{% endif %}

                <p><small><a href="{% url 'my_app:video' redvimurl2|index:forloop.counter0  %}" style="color: {{ color_guide2 }}">{% trans 'Go to individual video page'%}</a></small></p>

        <div class="resp-container-vid mb-5">

            <iframe class="resp-iframe-vid"
                src="{{ vid }}" frameborder="0" allow="autoplay; fullscreen"
                allowFullScreen="true" webkitallowfullscreen="true" mozallowfullscreen="true">
            </iframe>
        </div>
        <!--<div><a href="{{ mp4downloadurl|index:forloop.counter0 }}" target="_blank">See the video on Vimeo</a></div>-->
            {% endif %}
        {% endfor %}
{% endif %}
    {% endif %}
</div>
      {% endifequal %}
      {% ifequal link 'mytalks' %}


        <p class="lead">{% trans 'My participations'%} <i class="fas fa-map"></i></p>
          <a href="#" class="btn btn-secondary mt-2 mb-4" data-toggle="modal" data-target="#exampleModaltp"> <strong>{% trans 'Read the guide'%}</strong> </a>

        {% if talks %}
          <p>{% trans 'You created'%} {{ talks | length }} {% trans 'participation'%}{{ talks|length|pluralize:",s" }}</p>

            {% if not finished %}
            <form enctype="multipart/form-data" id="testbmform" method="POST" action="{% url 'my_app:joinconf' %}" target="_blank">
                {% csrf_token %}
                <input type="hidden" name="testbm" value="itest" />
                <input type="hidden" name="confnum" value="{{confnum}}" />

                <div><a href={% if status == 2 %}"javascript:void(0)"{% else %}"#"{% endif %} type="submit" id="testbm" class="btn btn-info mt-2 mb-2 {% if testbm %}disabled{% endif %}"><strong>{% if testbm %}{% trans 'You have already tested the virtual conference room'%} {% else %}{% trans 'Test the virtual conference room once'%}{% endif %}</strong></a> <i data-toggle="tooltip" data-placement="bottom" title="{% trans 'You can go to the virtual room once. It will be the same room as on the big day with the same functionalities. Try your presentation, sharing, adding documents, chatting, ...'%}" class="fas fa-info-circle"></i></div>
            </form>
            {% endif %}

            {% paginate 10 talks %}
            {% for talk in talks %}
                <div class="card text-center mb-5">
                  <div class="card-header" style="background-color: #E0CBA8;">
                      <font color="#FF6542">{{ talk.user }} | {% trans 'Submitted on'%} {{ talk.created }} | {{ talk.get_type_display }}</font>
                  </div>
                  <div class="card-body">
                      {% if talk.type == 5 %}
                          <h5 class="card-title"><font color="black">{% trans 'Attendance only'%}</font></h5>
                      {% endif %}
                      {% if talk.type < 5 or talk.type == 6%}
                        <h5 class="card-title"><font color="black">{% trans 'Participation title:'%} {{ talk.title }}</font></h5>
                        {% if talk.type < 5 or talk.type == 6%}
                            <p class="card-text"><font color="black">{% trans 'Abstract:'%} {{ talk.abstract|safe }}</font></p>
                            {% if talk.biography %}
                            <p class="card-text"><font color="black">{% trans 'Biography:'%} {{ talk.biography }}</font></p>
                            {% endif %}
                        {% endif %}
                      {% endif %}
                  {% if conftopass.hybrid %}
                      <p class="card-text"><font color="black">{% trans 'Coming to the conference in person?:'%} {% if talk.facetoface %}{% trans 'Yes'%}{% else %}{% trans 'No'%}{% endif %}</font></p>
                  {% endif %}
                  </div>
                  <div class="card-footer text-muted" style="background-color: #E0CBA8;">
                      <p><font color="#94599A">{% ifequal talk.status 0 %} {% trans 'Participation submitted (waiting for acceptance)'%} {% endifequal %} {% ifequal talk.status 1 %} {% trans 'Participation accepted'%} {% endifequal %} | {{ conftopass.title }} {% if conftopass.masterconf %} - {% trans 'Plenaries'%} {% endif %}{% if conftopass.daughterconf %} - {% trans 'Session of'%} {{ confma.title }} {% endif %}</font> | <a href="#" data-toggle="modal" data-target="#exampleModal{{ forloop.counter0 }}" style="color: red;">{% trans 'Delete?'%}</a></p>


<div id="exampleModal{{ forloop.counter0 }}" class="modal fade">
	<div class="modal-dialog modal-confirm">
		<div class="modal-content">
			<div class="modal-header">
				<div class="icon-box">
					<i class="material-icons">&#xE5CD;</i>
				</div>
				<h4 class="modal-title">{% trans 'Are you sure?'%}</h4>
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			</div>
			<div class="modal-body">
				<p>{% trans 'Do you really want to delete this participation? This process cannot be undone but you can create a new one straight away.'%}</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-info" data-dismiss="modal">{% trans 'Cancel'%}</button>
                <form enctype="multipart/form-data" method="POST" action="">
                {% csrf_token %}
                    <input type="hidden" name="delete" value="delete" />
                    <input type="hidden" name="talkid" value={{ talk.id }} />

				<button type="submit" class="btn btn-danger" id="deletetalk">{% trans 'Delete'%}</button>
                </form>
			</div>

		</div>
	</div>
</div>

                  {% ifequal talk.status 1 %}
                  {% if talk.type < 5 or talk.type == 6%}
                                  {% if not finished %}

                    <form enctype="multipart/form-data" method="POST" novalidate>
                    {% csrf_token %}

                    <input type="hidden" name="addslides" value="brah2" />
                    <input type="hidden" name="confnum" value="{{confnum}}" />
                    <input type="hidden" name="loop" value="{{forloop.counter0}}" />
                    <input type="hidden" name="talkidd" value="{{talk.id}}" />

                    <div class="row">
                        <div class="col-sm-12 text-center">
                    <span class="btn btn-info btn-file"><!--lucifer-->
                        <strong><i class="fa fa-image"></i> {% if talksub|index:forloop.counter0 == 1 %}{% trans 'Update'%} {% else %}{% trans 'Add'%} {% endif %}{% trans 'your'%} {% if talk.type == 4%}{% trans 'poster'%} {% else %}{% trans 'document'%} {% endif %}</strong> {{ slides_form.slides|as_crispy_field }}
                    </span>    <label class="file-name" ></label>
                            {% if talk.type == 4%}
                                <input type="hidden" name="poster" value="poster" />
                            {% endif %}
                            <button type="submit" class="btn btn-secondary btn-sub"><strong>{% if talksub|index:forloop.counter0 == 1 %}Change{% else %}{% trans 'Submit'%}{% endif %} {% trans 'the'%} {% if talk.type == 4%}{% trans 'poster'%} {% else %}{% trans 'document'%} {% endif %}</strong></button>
                    </form>
                    {% if talksub|index:forloop.counter0 == 1 %}
                        <span class="btn btn-warning btn-file">
                            <a href="{{ talk.slides.url }}" target="_blank"><strong>{% trans 'See your'%}{% if talk.type == 4 %} {% trans 'poster'%} {% else %} {% trans 'document'%} {% endif %} </strong></a>
                        </span>
                         <form enctype="multipart/form-data" id={{ forloop.counter0 }} method="POST" novalidate>
                            {% csrf_token %}

                            <input type="hidden" name="delslides" value="brah3" />
                            <input type="hidden" name="confnum" value="{{confnum}}" />
                            <input type="hidden" name="loop" value="{{forloop.counter0}}" />
                            <input type="hidden" name="talkidd" value="{{talk.id}}" />
                            <span class="btn btn-danger btn-file mt-1">
                                <a href="#!" onclick="document.getElementById('{{ forloop.counter0 }}').submit();" style="color: white;"><strong>{% trans 'Delete your'%}{% if talk.type == 4 %} {% trans 'poster'%} {% else %} {% trans 'document'%} {% endif %}</strong></a>
                            </span>
                         </form>
                        <form enctype="multipart/form-data" id=pub{{ forloop.counter0 }} method="POST" novalidate>
                            {% csrf_token %}

                            <input type="hidden" name="pubslides" value="brah3" />
                            <input type="hidden" name="confnum" value="{{confnum}}" />
                            <input type="hidden" name="loop" value="{{forloop.counter0}}" />
                            <input type="hidden" name="talkidd" value="{{talk.id}}" />
                            <span class="btn btn-primary btn-file mt-1">
                                <a href="#!" onclick="document.getElementById('pub{{ forloop.counter0 }}').submit();" style="color: white;"><strong>{% if not talk.slideshow %}{% trans 'Allow'%}{% else %}{% trans 'Disallow'%}{% endif %} {% if talk.type == 4 %} {% trans 'poster'%} {% else %} {% trans 'document'%} {% endif %} {% trans 'to appear in the Document webpage'%}</strong></a>
                            </span>
                         </form>
                    {% endif %}
                    </div>
                      </div>
                      <div class="row">

                      <div class="col-sm-3">
                      </div>

                      <div class="col-sm-3">
                      {% if talk.type != 5 %}
                      <form method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                                <!--<input id="uploadFile" placeholder="Choose File" disabled="disabled" />-->
                                <div class="fileUpload btn btn-info btn-file">
                                    <span><i class="fa fa-video"></i> <strong>{% if talk.rectalk %}{% trans 'Re-select'%}{% else %}{% trans 'Select'%}{% endif %} {% trans 'a'%} {% if talk.type == 4 %}{% trans 'poster'%}{% else %}{% trans 'talk'%}{% endif %} {% trans 'recording'%}</strong></span>
                                    <input id="uploadBtn{{forloop.counter0}}" type="file" class="upload" />
                                </div><i data-toggle="tooltip" data-placement="bottom" title="{% trans 'You can upload a pre-recorded talk for your participation if you want by clicking here (it should be less than 200 Mb and preferably with the mp4 format) and then click submit recording.'%}" class="fas fa-info-circle" style="color: purple"></i>
                                <label id="file-name{{forloop.counter0}}"></label>
                      </div>
                          <div class="col-sm-3 mt-2" id="col{{ forloop.counter0 }}">
                            <button type="submit" id='subrec{{forloop.counter0}}' class="btn btn-secondary btn-subrec"><strong>{% if talk.rectalk == 1 %}{% trans 'Change'%}{% else %}{% trans 'Submit'%}{% endif %} {% trans 'the recording'%}</strong></button>
                          </div>
                            <div id="spin{{forloop.counter0}}" class="col-sm-12"></div>


                        </form>
                          <div id="teste23{{forloop.counter0}}"></div>

                          {% if talk.mp4_url %}
                            {% if talk.type != 5%}
                               <!--<div class="col-sm-3 mx-auto">
                               </div>-->
                               <div class="col-sm-3 mx-auto" id="test23{{forloop.counter0}}">
                                   <a href="{{ talk.mp4_url }}" class="btn btn-warning btn-record mt-2" target="_blank" style="color:white"><strong>{% trans 'See your recorded'%} {% if talk.type == 4 %}{% trans 'poster'%}{% else %}{% trans 'talk'%}{% endif %}</strong></a>
                              </div>
                                <div class="col-sm-12 mx-auto mb-2">
                                <form enctype="multipart/form-data" id=pub2{{ forloop.counter0 }} method="POST" novalidate>
                            {% csrf_token %}

                            <input type="hidden" name="pub2slides" value="brah3" />
                            <input type="hidden" name="confnum" value="{{confnum}}" />
                            <input type="hidden" name="loop" value="{{forloop.counter0}}" />
                            <input type="hidden" name="talkidd" value="{{talk.id}}" />
                            <span class="btn btn-primary btn-file mt-1">
                                <a href="#!" onclick="document.getElementById('pub2{{ forloop.counter0 }}').submit();" style="color: white;"><strong>{% if not talk.mp4show %}{% trans 'Allow'%}{% else %}{% trans 'Disallow'%}{% endif %} {% if talk.type == 4 %} {% trans 'poster recording'%} {% else %} {% trans 'talk recording'%} {% endif %} {% trans 'to appear in the Document webpage'%}</strong></a>
                            </span>
                         </form>
                                </div>
                            {% endif %}
                        {% endif %}
                          <!--<div id="test23{{forloop.counter0}}" class="col-sm-3"></div>-->

                    <script>
                        $(document).on('change', '#uploadBtn{{forloop.counter0}}', function () {
                            var sizeInKB = this.files[0].size / 1024 / 1024; //Normally files are in bytes but for KB divide by 1024 and so on
                            var sizeLimit = 200;

                            if (sizeInKB >= sizeLimit) {
                                //alert("Max file size 200MB exceeded");
                                $("#uploadBtn{{forloop.counter0}}").val("");
                                $("#file-name{{forloop.counter0}}").text("The file cannot be uploaded as it is too large");

                                return false;
                            }

                            if (this.files[0].type.match('video.*')) {

                            //alert('video');
                                $("#file-name{{forloop.counter0}}").text(this.files[0].name);

                            }else{
                                //alert("The file should be a video");
                                $("#file-name{{forloop.counter0}}").text("The file should be a video");
                                $("#uploadBtn{{forloop.counter0}}").val("");
                            }


                            });

                      </script>
                      {% if 1 == 0 %}<!--to add later when zoom is sorted...-->
                      <form enctype="multipart/form-data" id="j{{ forloop.counter0 }}" method="POST" action="{% url 'my_app:joinconf' %}" target="_blank">
                            {% csrf_token %}
                            <input type="hidden" name="recordtalk" value="brah4" />
                            <input type="hidden" name="confnum" value="{{confnum}}" />
                            <input type="hidden" name="loop" value="{{forloop.counter0}}" />
                            <input type="hidden" name="talkidd" value="{{talk.id}}" />
                          <a href="#" id="confirm" class="btn btn-info btn-record mt-2"><strong>{% if talk.rectalk %}Re-record{% else %}Pre-record{% endif %} your talk</strong></a>
                      </form>
                      {% endif %}


                      {% endif %}
                      </div>

                        {% if talk.rectalk and not talk.mp4_url %}
                          {% if 1 == 0 %}<!--to add later when zoom is sorted...-->
                      <div class="col-sm-3" id="col{{ forloop.counter0 }}">
                      <form enctype="multipart/form-data" id="h{{ forloop.counter0 }}" method="POST" action="{% url 'my_app:importrec' %}">
                            {% csrf_token %}
                            <input type="hidden" name="confnum" value="{{confnum}}" />
                            <input type="hidden" name="loop" value="{{forloop.counter0}}" />
                            <input type="hidden" name="talkidd" value="{{talk.id}}" />
                          <button id="import" class="btn btn-secondary btn-record mt-2"><strong>{% trans 'Import your recording'%}</strong></button>
                      </form>
                      </div>
                        {% endif %}
                        {% endif %}
                          {% if talk.paperurl %}
                              <p class="mt-3"><a href="{{ talk.paperurl }}" target="_blank">{% trans 'See the article you linked to your work?'%}</a></p>
                              {% endif %}
                          <p>{% if talk.paperurl %}{% trans 'Change the'%}{% else %}{% trans 'Add a'%}{% endif %} {% trans 'link to a paper associated with your work?'%}</p>
                          <form enctype="multipart/form-data" method="POST">
                            {% csrf_token %}

                                <input type="hidden" name="addpaper" value="brah2" />
                                <input type="hidden" name="confnum" value="{{confnum}}" />
                                <input type="hidden" name="loop" value="{{forloop.counter0}}" />
                                <input type="hidden" name="talkidd" value="{{talk.id}}" />
                                {{ articleurl_form.paperurl|as_crispy_field }}
                              {% ifequal articleurl_err talk.id %}
                                {% if articleurl_form.paperurl.errors %}
                                    <ol>
                                    {% for error in articleurl_form.paperurl.errors %}
                                        <li><strong>{{ error|escape }}</strong></li>
                                    {% endfor %}
                                    </ol>
                                {% endif %}
                              {% endifequal %}
                              <button type="submit" class="btn btn-secondary btn-sub mt-2"><strong>{% trans 'Submit link'%}</strong></button>

                          </form>

                  {% endif %}

                      {% if 1 == 0 %}
                          {% if talk.mp4_url %}
                            {% if talk.type != 5%}
                               <div class="col-sm-3 mx-auto">
                                   <a href="{{ talk.mp4_url }}" class="btn btn-warning btn-record mt-2" target="_blank" style="color:white"><strong>{% trans 'See your recorded'%} {% if talk.type == 4 %}{% trans 'poster'%}{% else %}{% trans 'talk'%}{% endif %}</strong></a>
                              </div>
                            {% endif %}
                        {% endif %}
                          {% endif %}
                          <div id="test22{{forloop.counter0}}" class="col-sm-3 mx-auto"></div>
                      {% if talk.rectalk and not talk.mp4_url %}
                      {% if messages %}
                        {% for message in messages %}
                            {%if "record" in message.tags %}
                                <div class="alert alert-danger mt-2" role="alert">
                                    <p>{{ message }}</p>
                                </div>
                            {% endif %}
                        {% endfor %}

                      {% endif %}
                      {% endif %}

                      {% if talk.mp4_url_bm and not talk.mp4_url %}
                        <div class="spinner-border text-warning mt-2" id="spinner{{forloop.counter0}}" role="status">
                          <span class="sr-only">{% trans 'Loading...'%}</span>
                        </div>
                      {% endif %}
                    {% if talksuc == forloop.counter0 %}
                      <div id="testt" class="col-sm-3 mx-auto"></div>
                        <div id="testtt" class="col-sm-3 mx-auto">
                        <div class="alert alert-warning mt-2" role="alert">
                            <h4>{% trans 'The'%} {% if talk.type == 4%}{% trans 'poster was'%} {% else %}{% trans 'document was'%}{% endif %} {% trans 'submitted.'%}</h4>
                        </div></div>
                    {% endif %}
                    {% if talkdel == forloop.counter0 %}
                        <div id="testt" class="col-sm-3 mx-auto"></div>
                        <div id="testtt" class="col-sm-3 mx-auto">
                        <div class="alert alert-danger mt-2" role="alert">
                            <h4>{% trans 'The'%} {% if talk.type == 4%}{% trans 'poster was'%} {% else %}{% trans 'document was'%}{% endif %} {% trans 'deleted.'%}</h4>
                        </div></div>
                    {% endif %}

                  {% endif %}
                  {% endifequal %}

                  </div>
                </div>

                <script>
                $(function () {
                    $(document).on('click', '#subrec{{forloop.counter0}}', function () {

                        //alert('c');
                        var talknum = {{ talk.id }};
                        //alert('f'+talknum+confnum);
                        var fname = "{{ talk.user.username }}";//first_name before
                        //alert('fe'+fname);
                        var lname = "{{ talk.user.last_name }}";
                        //console.log( "fn"+fname );

                        var loopnum = {{forloop.counter0}};

                        //var filename = "pretalk-" + talknum + "-" + fname + "-" + lname + ".mp4";
                        var filename = "pretalk-" + talknum + "-" + fname + ".mp4";

                        //console.log( "filename"+filename );
                        //alert('f',filename);
                        //var file = "{{ talk.mp4_url_bm }}";
                        var file = document.getElementById('uploadBtn{{forloop.counter0}}').files[0];
                        //var file = new FormData(filee); // The form with the file inputs.
                        $("#spin"+loopnum).append('<div class="spinner-border text-warning mt-2" id="spinne{{forloop.counter0}}" role="status"> <span class="sr-only">Loading...</span></div>');

                        //var file = $('#uploadBtn').prop('files')[0];
                        console.log("ready!" + file.name);
                        //alert('f');

                        //alert('joe2z');
                        getSignedRequest2(filename, file, talknum, loopnum);
                        return false;

                    });
                });
                </script>



                {% if talk.mp4_url_bm and not talk.mp4_url %}
                <script>
                $( document ).ready(function() {
                    var confnum = {{ confnum }};
                    //alert('c'+confnum);
                    var talknum = {{ talk.id }};
                    //alert('f'+talknum+confnum);
                    var fname = "{{ talk.user.username }}";//before first_name
                    //alert('fe'+fname);
                    var lname = "{{ talk.user.last_name }}";
                    //console.log( "fn"+fname );

                    //var filename = "pretalk-"+talknum+"-"+fname+"-"+lname+".mp4";
                    var filename = "pretalk-"+talknum+"-"+fname+".mp4";

                    //console.log( "filename"+filename );
                    //alert('f',filename);
                    var file = "{{ talk.mp4_url_bm }}";
                    console.log( "ready!"+filename );
                    //alert('joe');
                    getSignedRequest(filename,file);
                });
                </script>
                <script>
                    function getSignedRequest(filename,file){
                      var xhr = new XMLHttpRequest();
                      xhr.open("GET", "/sign_s3?file_name="+filename+"&file_type=video/mp4");
                      xhr.onreadystatechange = function(){
                        if(xhr.readyState === 4){
                          if(xhr.status === 200){
                            var response = JSON.parse(xhr.responseText);
                              //alert(response.data+response.url);
                            uploadFile(file, response.data, response.url);
                          }
                          else{
                            alert("Could not get signed URL.");
                          }
                        }
                      };
                      xhr.send();
                    }
                    </script>

                    <script>
                        async function uploadFile(file, s3Data, url){
                          var idtalk = {{ talk.id }};
                          var loopnum = {{forloop.counter0}};
                          var xhr = new XMLHttpRequest();
                          xhr.open("POST", s3Data.url);

                          var postData = new FormData();
                          for(key in s3Data.fields){
                            postData.append(key, s3Data.fields[key]);
                          }
                          //var blob = new Blob([], {
                            //type: 'video/mp4'
                            //});
                          //postData.append('video', blob);

                          //alert('joe'+file);
                          //var y = await 20;
                          let response = await fetch(file);
                          let data = await response.blob();
                          let metadata = {
                            type: 'video/mp4'
                          };
                          let file2 = new File([data], "test.mp4", metadata);


                          //let blob = await fetch(file).then(r => r.blob());
                          //let file = await fetch(url).then(r => r.blob()).then(blobFile => new File([blobFile], file, { type: "video/mp4" });
                          postData.append('file', file2);

                          xhr.onreadystatechange = function() {
                            if(xhr.readyState === 4){
                                      //alert('joe2');
                              if(xhr.status === 200 || xhr.status === 204){
                                //alert('joe3');
                                updatevaluerecordb(idtalk,url,loopnum);
                                //document.getElementById("preview").src = url;
                                //document.getElementById("avatar-url").value = url;
                                  //un coup d'ajax pour mettre see video et remplir la bdd avec l'url_mp4

                              }
                              else{
                                alert("Could not upload file.");
                              }
                           }
                          };
                          xhr.send(postData);
                        }
                    </script>
                    <script>
                        function updatevaluerecordb(idtalk,url,loopnum) {
                            console.log("record is working!"); // sanity check
                            //console.log(thisObj.closest("form").find('.pfnplus').val());
                            //alert(thisObj.closest("form").find('.pfnplus').val());
                            //alert(idtalk);
                            $.ajax({
                                url : '/updatevaluerecord/', // the endpoint
                                type : "POST", // http method
                                data : {    idtalk : idtalk,//$('#confnumid').val(),
                                            loopnum : loopnum,//$('#confnumid').val(),
                                            //idarg : thisObj.closest("form").attr('id'),//$('#idarg').val()
                                            url : url,//$('#confnumid').val(),
                                            csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                                        }, // data sent with the post request

                                // handle a successful response
                                success : function(json) {
                                    //alert('yo2');
                                    //$("div[id='test2']").text('');
                                    //$("div[id='test22']").text('');

                                    console.log(json); // log the returned json to the console
                                    //document.body.removeChild(child);spinner-border text-warning mt-2
                                     if (json.success == 1) {
                                         //alert('joe success');
                                         $("#spinner"+json.loopnum).remove();
                                         $("#h"+json.loopnum).remove();
                                         $("#col"+json.loopnum).remove();
                                         $("#test22"+json.loopnum).append('<a href="'+json.url+'" class="btn btn-warning btn-record mt-2" target="_blank" style="color:white">See your recorded talk</a>');
                                         $('#test22'+json.loopnum).after('<div class="col-sm-3"></div>');

                                     //       $("#test22").append("<p>" + json.result + "</p>");
                                    }

                                    console.log("success plus"); // another sanity check
                                },

                                // handle a non-successful response
                                error : function(xhr,errmsg,err) {
                                    $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                                        " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                                    console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
                                }
                            });
                        };
                        </script>

            {% endif %}
            {% endfor %}
            {% show_pages %}


            <script>
            $(document).on('change', '#id_slides', function (event) {
                event.preventDefault();
                //alert($(this).parents('span').next('label').next('button').attr('id'));

                if($(this).parents('span').nextAll('input').val()=='poster'){
                    //alert($(this).prop('files')[0].type);/*lucifer*/
                    // Another way: checking the type of the file
                    if ( $(this).prop('files')[0].type === 'application/pdf' ) {
                        console.log( 'It is a Pdf file!' );
                        $(this).parents('span').next('label').text(this.files[0].name);
                    }else{
                        $(this).parents('span').next('label').text('The file should be a pdf, try again!');
                        $(this).val("");
                    }
                }else{
                    $(this).parents('span').next('label').text(this.files[0].name);
                }
                return false;
            });

            </script>



            <script>
                $(document).ready(function() {
                     //$(':input[type="submit"]').prop('disabled', true);
                     $('.btn.btn-success.btn-sub').prop('disabled', true);
                        $(document).on('change', '#id_slides', function (event) {
                           //$(':input[type="submit"]').prop('disabled', false);
                           $(this).parents('span').next('label').next('button').prop('disabled', false);
                        })
                     });
            </script>


<div class="container tuto" style="color: black!important;">
     <div class="modal fade" id="exampleModaltp" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabeltp" aria-hidden="true">
         <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
             <div class="modal-content">
                 <div class="modal-header">
                     <h5 class="modal-title" id="exampleModalLabeltp"><strong>Learn how manage your participations</strong></h5> <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
                 </div>
                 <div class="modal-body">
                     <div id="smartwizard">
                         <ul class="nav">
                             <li><a class="nav-link" href="#step-0">Step 0<br /><small>Important</small></a></li>
                             <li><a class="nav-link" href="#step-1">Step 1<br /><small>Overview</small></a></li>
                             <li><a class="nav-link" href="#step-2">Step 2<br /><small>Submit document</small></a></li>
                             <li><a class="nav-link" href="#step-3">Step 3<br /><small>Submit poster</small></a></li>
                             <li><a class="nav-link" href="#step-4">Step 4<br /><small>Submit recordings</small></a></li>
                             <li><a class="nav-link" href="#step-5">Step 5<br /><small>Test virtual room</small></a></li>
                         </ul>
                         <div class="tab-content">
                             <div id="step-0" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Important</h3>

                                 <h5>It is recommended that you read all information here at least once before adding a poster, a document (e.g. slides) or a video!</h5>
                                 <p>Note that you can always come back here by clicking on this button <span><a href="#" class="btn btn-secondary py-0" style="font-size: 0.8em;color: #333;background-color: lightgrey;"> <strong>Read the guide</strong> </a></span> at the top of the web page once the guide is closed.</p>

                                 <h5>First you have to create an account on CarbonFreeConf that you will be able to use for other conferences later.
                                {% if user.is_authenticated %}
                                    You have already created an account and logged-in so now you can go to the next step.</h5>
                                {% else %}
                                    To do so, click the sign-up button <a href="#" class="btn-lg btn-primary py-0" style="font-size: 0.8em;">Sign-up</a> when you close this guide <small>(or sign-in directly using your login and password if you have already signed-up in the past, even if it was for another CarbonFreeConf-erence)</small>.
                                </h5>
                                {% endif %}
                             </div>
                             <div id="step-1" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Overview</h3>
                                     <h5>The 'My Participation' page is useful for the reasons listed below</h5>

                                 <p><strong>First</strong>, once you have submitted a participation (talk, poster or attendance only) you can check the status of your participation here. If not validated by the organizers yet, you will read 'Participation submitted (waiting for acceptance)' and otherwise 'Participation accepted'. You may also well be contacted by the organizers to let you know about that sooner or later.</p>
                                 <p><strong>Second</strong>, you can check that your abstract, title, ... are correct and go back to the 'Participate' page to change any of them if needed (you can also click on <a href="#"><span style="color: red;">Delete?</span></a> at the bottom of the part listing your presentation if you want to remove it).</p>
                                 <p><strong>Third</strong>, you can test the virtual room you will be given access to when the conference starts and familiarize yourself with the different tools provided by CarbonFreeConf.</p>
                                 <p><strong>Lastly and more importantly</strong>, you may also want to add your slides, poster, a document, or a video recording of your talk or poster and we explain how to do that in the coming steps.</p>


                             </div>
                             <div id="step-2" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Submit a document</h3>
                                 <h5>If asked by the organizers you can easily add your slides or a document to your talk.</h5>
                                 <p>You can add any document and the organizers will have access to it (e.g. slides, paper, image, ...). Click on the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Add your document</strong>
                                    </span> button. Then select the file on your computer. Once added, you see the filename appearing to the right of the button. If it is correct push the
                                     <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the document</strong></a> button. You will then see a new
                                    <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your document</strong></a>
                                    </span> button and <span class="btn btn-danger btn-file py-0">
                                <a href="#"><strong>Delete your document</strong></a>
                            </span> button. Click on see your document to check that it is correct (if not delete your cookies and try again). In case you inserted the wrong document, you can either click the delete your document button and start all over again
                                     or click the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Update your document</strong>
                                    </span> button and then the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Change the document</strong></a> button to confirm.
                                </p>
                             </div>
                             <div id="step-3" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Submit a poster</h3>
                                 <h5>Adding your poster is easy, just note that it should be in the pdf format and follow the steps below.</h5>
                                  <p>To upload your poster, click on the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Add your poster</strong>
                                    </span> button. Then select the poster pdf file on your computer. Once added, you see the filename appearing to the right of the button. If it is correct push the
                                     <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the poster</strong></a> button. You will then see a new
                                    <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your poster</strong></a>
                                    </span> button and <span class="btn btn-danger btn-file py-0">
                                <a href="#"><strong>Delete your poster</strong></a>
                            </span> button. Click on see your poster to check that it is correct (if not delete your cookies and try again). In case you inserted the wrong poster or want to change it, you can either click the delete your poster button and start all over again
                                     or click the <span class="btn btn-info btn-file py-0">
                                    <strong><i class="fa fa-image"></i> Update your poster</strong>
                                    </span> button and then the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Change the poster</strong></a> button to confirm.
                                </p>

                             </div>
                             <div id="step-4" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Submit your recording</h3>
                                <h5>You can submit video recordings for your talk and/or poster</h5>

                                 <p style="text-align: left;"><strong>To submit the recording of your talk:</strong> Imagine you are not able to give your talk, either because you are on holidays or your internet connection may be too fragile. Then you can just record yourself and upload your video for the organizers to be able to play it on the big day.
                                     The video should be in the mp4 format and less than 200 Mb. To do so, click the <span class="fileUpload btn btn-info btn-file py-0">
                                    <span><i class="fa fa-video"></i> <strong>Select a talk recording</strong></span>
                                </span> button, select the right file, and then confirm by clicking the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the recording</strong></a> button.
                                     After the complete upload, you will see a new <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your recorded talk</strong></a>
                                    </span> button, which you should click to verify that it is all correct. If not upload a new recording by following the same process again.</p>


                                 <p style="text-align: left;"><strong>To submit your poster recording:</strong> If the organizers suggest or if you feel like a video of your poster with you explaining it is better than a simple pdf, you can do so! You can either add a pdf alone or a poster's video only or both.
                                     The poster's recording should be in the mp4 format and less than 200 Mb. To upload it, click the <span class="fileUpload btn btn-info btn-file py-0">
                                    <span><i class="fa fa-video"></i> <strong>Select a poster recording</strong></span>
                                </span> button and then confirm by clicking the <a class="btn btn-secondary btn-sub py-0" style="background-color: floralwhite;"><strong>Submit the recording</strong></a> button.
                                     After the complete upload, you will see a new button appear that looks like that <span class="btn btn-warning btn-file py-0">
                                        <a href="#"><strong>See your recorded poster</strong></a>
                                    </span>, which you should click to verify that it is all correct. If not upload a new recording by following the same process again.</p>
                                 <p><strong>Important:</strong> For posters, you can either only add your poster as a pdf or as a video or both to get even more engagement. </p>

                             </div>
                            <div id="step-5" class="tab-pane" role="tabpanel">
                                 <h3 style="text-align: center" class="mb-3">Test the virtual room</h3>
                                <h5>It may be useful to know where you are going to land when the conference starts! To do that you can test the virtual room once.</h5>
                                <p>If you give a talk or just attend the conference, you may want to familiarize yourself with the different tools (e.g. how to ask a question, submit a poll, activate sound notifications warnings, check posters, ...) and know in advance if the virtual environment works with your current set-up and/or if you should look for help.</p>
                                <p>To do so, click the <span><a href="#" class="btn btn-info py-0"><strong>Test the virtual conference room once</strong></a></span> button. You are then propelled to a virtual room very similar to that of the real upcoming conference but just for you. You can then learn how to use the virtual room and its different features! Note that you can only do it once so make the most of it. </p>

                             </div>
                         </div>
                     </div>
                 </div>
                   <div class="modal-footer">
                     <button type="button" class="btn btn-secondary" style="color: #333;background-color: lightgrey;" data-dismiss="modal">Close</button>
                   </div>
             </div>
         </div>
     </div>
 </div>

<script>
   var gotit = 0;

    $('#exampleModaltp').on('shown.bs.modal', function() {

       //alert('ok');
        if (!gotit) {
            $.getScript("https://unpkg.com/smartwizard@5/dist/js/jquery.smartWizard.min.js", function () {
                var $def = $.Deferred();
                if (typeof smartWizard === 'undefined') { // "foo" isn't available
                    //alert('ok');
                    var attempts = 0;
                    // create an interval
                    // that will check each 100ms if the "foo" function
                    // was loaded
                    var interval = setInterval(function () {
                        if (typeof smartWizard !== 'undefined') { // loaded
                            window.clearInterval(interval);
                            $def.resolve();
                        }
                        // after X unsuccessfull attempts, abort the operation
                        else if (attempts >= 100) {
                            window.clearInterval(interval);
                            $def.reject('Something went wrong');
                            //alert('ik');
                        }

                        attempts++;
                    }, 100);
                } else { // "foo" is available
                    $def.resolve();
                    //alert('il');
                }
                return $def.promise();
            }).then(function () {
                // at this point "foo()" is definitely available.
                $('head').append('<link rel="stylesheet" type="text/css" href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css">');
                //$('head').append('<link rel="stylesheet" type="text/css" href="https://res.cloudinary.com/dxfq3iotg/raw/upload/v1581152091/smartwizard/smart_wizard_theme_arrows.min.css">');

                gotit = 1;
                //alert('ah?');
                $('#smartwizard').smartWizard({
                      selected: 0, // Initial selected step, 0 = first step
                      theme: 'arrows', // theme for the wizard, related css need to include for other than default theme
                      justified: true, // Nav menu justification. true/false
                      darkMode:false, // Enable/disable Dark Mode if the theme supports. true/false
                      autoAdjustHeight: true, // Automatically adjust content height
                      cycleSteps: false, // Allows to cycle the navigation of steps
                      backButtonSupport: true, // Enable the back button support
                      enableURLhash: true, // Enable selection of the step based on url hash
                      transition: {
                          animation: 'fade', // Effect on navigation, none/fade/slide-horizontal/slide-vertical/slide-swing
                          speed: '400', // Transion animation speed
                          easing:'' // Transition animation easing. Not supported without a jQuery easing plugin
                      },
                      toolbarSettings: {
                          toolbarPosition: 'bottom', // none, top, bottom, both
                          toolbarButtonPosition: 'right', // left, right, center
                          showNextButton: true, // show/hide a Next button
                          showPreviousButton: true, // show/hide a Previous button
                          toolbarExtraButtons: [] // Extra buttons to show on toolbar, array of jQuery input/buttons elements
                      },
                      anchorSettings: {
                          anchorClickable: true, // Enable/Disable anchor navigation
                          enableAllAnchors: true, // Activates all anchors clickable all times
                          markDoneStep: true, // Add done state on navigation
                          markAllPreviousStepsAsDone: true, // When a step selected by url hash, all previous steps are marked done
                          removeDoneStepOnNavigateBack: false, // While navigate back done step after active step will be cleared
                          enableAnchorOnDoneStep: true // Enable/Disable the done steps navigation
                      },
                      keyboardSettings: {
                          keyNavigation: true, // Enable/Disable keyboard navigation(left and right keys are used if enabled)
                          keyLeft: [37], // Left key code
                          keyRight: [39] // Right key code
                      },
                      lang: { // Language variables for button
                          next: 'Next',
                          previous: 'Previous'
                      },
                      disabledSteps: [], // Array Steps disabled
                      errorSteps: [], // Highlight step with errors
                      hiddenSteps: [] // Hidden steps

                });
            }).fail(function () {
                // deal with the failure
                console.log('failure with smartwizard');
            });

        }
        //else{
            //alert('alr');
        //}
 });
</script>

        {% else %}
          <p>{% trans 'You have no participation created so far'%}</p>
        {% endif %}
      {% endifequal %}
      {% ifequal link 'pay' %}
          {% if talksacc|length > 0 %}
            <p>{% trans 'You created'%} {{ talks | length }} {% trans 'participation'%}{{ talks|length|pluralize:",s" }} {% trans 'so far and'%} {{ talksacc | length }} {{ talks|length|pluralize:"is,are" }} {% trans 'accepted'%} </p>
              {% include "my_app/pay_website.html" with confnum=conftopass.id %}
          {% else %}
            <p>{% trans 'You created'%} {{ talks | length }} {% trans 'participation'%}{{ talks|length|pluralize:",s" }} {% trans 'so far but'%} {{ talksacc | length }} {{ talks|length|pluralize:"is,are" }} {% trans 'accepted'%} </p>
              <p>{% trans 'You can only pay when you have at least one accepted participation.'%}</p>
          {% endif %}
      {% endifequal %}
      {% ifequal link 'codeofconduct' %}
        <div class="jumbotron mt-4" style="text-align: left;color: black">
        <h1 style="text-align: center">{% trans 'Code of conduct'%}</h1><br><br>

        {% blocktrans %}
            <h5>Interactions during a CarbonFreeConf virtual conference</h5>

            <p>CarbonFreeconf conferences encourage interaction via chat and video to exchange freely about ideas or new results. These discussions, be it with a peer, an attendee, the support team, administrative staff (or any other person on the platform) should be orchestrated with respect, tact and mindfulness.</p>

            <p>Each person connecting to the video conferencing platform (presenters, organizers, technical staff, ...) should use appropriate and respectful language during the interactions, be it by video, chat, or audio. It is requested to discuss the results of your peers without engaging in personal attacks. Violation of this principle will not be tolerated. As conferences are often international, we ask you to be respectful of cultural differences that may emerge during exchanges. Participants should remain professional and treat each other with mutual respect when interacting on the platform or in any written or oral forms produced and accessible on CarbonFreeConf.</p>

            <p>Discriminatory behavior of any kind will not be tolerated (e.g. on origin, religion, age, gender, sexual orientation, disability, ...).</p>

            <p>If you detect such behavior (discrimination, disrespect, inappropriate language, personal attacks, ...) towards others or yourself, you should contact the conference organizers as soon as possible. Take care to enrich your complaint with evidence such as screenshots for example. The organizers will decide what action to take and depending on the offence, this may lead to the blocking of access to the conference.</p>


            <h5>Timing of the conference</h5>

            <p>The time constraints during virtual conferences are much more burdensome than for face-to-face conferences. The virtual platform is scheduled for a certain duration that cannot be changed once the conference has started. For this reason, and out of respect for other participants and organizers, we ask you to respect your allocated time limit. If you go beyond your talk time, there will be less time for the question part. If you go beyond the total time including the questions, the moderators will have the right to disconnect you and move on to the next presentation.</p>

            <p>Make sure you are present when your talk starts and that you have tested in advance how to load your presentation on the platform (the organizers have slots before each session for this kind of tests). If you cannot attend, please inform the organizers as soon as possible. If necessary, you can pre-record your presentation and upload it on the conference website. This will make your presentation accessible to the chairs who will be able to show it to your peers during your time slot. If it is too late to record your talk on the platform (because the conference has started), you can register yourself and send the video to the organizers who can easily upload it on the platform.</p>

            <h5>Respect privacy</h5>

            <p>All conferences take place in a closed environment, which means that you have to register beforehand to be able to participate in the virtual conference, access the posters or the chat. Login information is confidential and should not be shared with others. You must use your real name on the platform and not impersonate someone else's name. Remember to log out of the platform when you are in a non-private area and someone could take control of your session.</p>

            <h5>Publishing content from the conference</h5>

            <p>It is easy to make screenshots or even record all or part of the conference from your computer. However, if you wish to use this content to put it online (e.g. social media, websites, applications), you should ask the presenter and the organizers for their approval.</p>

            <p>It is possible to post some information or slides from a talk on social media (e.g. Facebook, twitter, ...) if it is for academic purposes unless it is explicitly forbidden by the speaker at the beginning of his presentation. As a speaker, mention it orally or in writing on your first slide if it bothers you that your results and/or slides are shared online outside of CarbonFreeConf.</p>

            <h5>Good practice for every participant</h5>

            <p>It's a good use for presenters and chairs to turn on their cameras and try to make sure there's enough light to see the people speaking. This seems more natural and allows non-native speakers of the spoken language to follow better as well as for people who are hard of hearing.</p>

            <p>People with questions can ask them on the conference room chat (Q&A) before the end of the presentation. At the end of the presentation, either the chair or each person with a question relays it orally. It is a good idea to activate your camera when you ask a question. In all other cases, please deactivate your microphone and camera. When it is not your turn to speak, please do not interrupt the presenter and do not touch their slides or change any parameter in the virtual room.</p>

            <p>If you want to hide your background, there is the possibility to put a red, blue or green background behind you and to load an image-like-background that will be automatically set up if it detects a uniformly colored background behind you.</p>

            <p>Try to be in a quiet place during the presentation and close enough to your microphone (e.g., don't walk away from the microphone during your presentation). To make sure that people with visual impairments can follow your talk, please convey all the important elements orally and not just on the slides.</p>

            <p>Make your slides legible, preferably with a uniform background and fairly large text with colours that can be seen by colour-blind people.</p>

            <h5>Good practice for Chairs</h5>

            <p>We will list several recommendations to enable successful sessions with a climate that participates in the creation and sharing of ideas.</p>

            <p>Before each session the chair should remind some rules of decorum, such as respect for other participants in all circumstances. If the conference is recorded, the chair should remind the participants. It should also make participants understand that the agreement of the organizers and presenters is required to publish a recording or complete slides online outside of CarbonFreeConf. There is the possibility of sharing new results on social networks (e.g. one finding, a few slides) if the author has not expressed any opposition at the beginning of his presentation (written or orally).</p>

            <p>The chairs must ensure that the sessions end on time because the following sessions are already pre-programmed and the conference will have to be cut at a pre-determined time. As a courtesy for the last sessions, and for the speakers, it is therefore necessary to be able to finish on time. If a presenter is too long, his or her question time will have to be shortened, and if he or she goes beyond the overall time allotted, they will have to be cut off and move on to the next presentation.</p>

            <p>Questions should be asked through the Q&A on the chat. The chairs (and moderators) can then choose which questions are posted to the participants. Questions that are personal, aggressive or disrespectful should not be posted by chairs. Then chairs should choose who asks the questions and in what order. A chair should question themselves about their unconscious biases and try not to choose questions from the same people all the time. If the chair asks all the questions, they must remember to mention the name of the questioner.</p>

            <p>If someone intervenes (orally or on the chat) disrespectfully or inappropriately, the chair must warn that this behavior cannot be tolerated here. If after a first warning the participant repeats this behavior, the chair may eject the person from the virtual room.</p>

            {% endblocktrans %}
        </div>
      {% endifequal %}
      {% ifequal link 'consentinfo' %}
        <div class="jumbotron mt-4" style="text-align: left;color: black">
        <h2 style="text-align: center">{% trans 'Consent information'%}</h2>
        {% blocktrans %}

            <p>When registering to the conference, you authorize CarbonFreeConf to use your personal data for some limited purposes described further down.</p>
            <p>CarbonFreeConf respects your privacy as well as your personal data. Data is processed in agreement with the European GDPR (General Data Protection Regulation). In this regard, you can ask to access your personal data, rectify them and delete them when wanted by writing an email to the <a href="mailto:admin@carbonfreeconf.com" style="color: grey">CarbonFreeConf data protection officer</a>.</p>
            <p>The details about how CarbonFreeConf handles personal data are given <a href="/privacy" style="color: grey" target="_blank">here</a> but we will also recall the main points here below.</p>

            <h5>Virtual meeting room</h5>
            <p>It is not allowed to record the video and/or audio of presentations/conversations (or any subset of it) during the conference.
                Therefore, it is not allowed to live-stream the conference and/or to put the oral presentations on any website.
                CarbonFreeConf may only allow to do so after speaking to presenters and organizers of the conference and if it is not for lucrative reasons.</p>
            <p>This same rule applies to any written content, e.g. via the conference chat or the dedicated chat rooms that should not be distributed or shared in any form.</p>
            <p>Personal information about the participants (such as names, country of origin, pictures, but not limited to) should not be used in any form.</p>
            {% endblocktrans %}

            <h5>{% trans 'Presentations'%} {% if conftopass.poster %}{% trans 'and posters'%}{% endif %}</h5>
                <p>{% trans 'CarbonFreeConf is allowed to host the conference via the virtual platform of its choice.'%}</p>
            {% if conftopass.recording %}
                <p>{% trans 'The presenter gives the permission to record their talk (be it for a pre-recording before the conference starts or during the conference). Without this consent to record their presentation, speakers cannot give or pre-record their talks.'%}</p>
                <p>{% trans 'CarbonFreeConf will keep the recordings in its database (via Vimeo) and give access'%} {% ifequal conftopass.whorecording "Everyone" %} {% trans 'to everyone.'%} {% else %} {% trans 'only to the conference participants.'%} {% endifequal %}</p>
                {% if conftopass.youtuberecording %} {% trans 'The recordings will be added on Youtube.'%} {% endif %}
            {% endif %}
                <p>{% trans 'CarbonFreeConf is allowed to record and show the slides of the conference participants on its website.'%}</p>
                <p>{% trans 'Material (handouts, slides, images but not limited to) added to the virtual conference room will be saved.'%}</p>
                <p>{% trans 'Material, messages, voice and/or video recordings added/created by participants in any Rocket chat room of the conference will be saved.'%}</p>
            {% if conftopass.poster %}
                <p>{% trans 'CarbonFreeConf is allowed to record and show the posters of the participants on its website.'%}</p>
            {% endif %}
            <h5>{% trans 'Copyrights'%}</h5>
            <p>{% trans 'Any content presented during the talks'%} {% if conftopass.poster %}{% trans 'or in posters'%}{% endif %} {% trans "or added by participants during the conference should not step on any third-party's copyright. Participants are responsible for checking that and CarbonFreeConf does not hold the copyrights to the saved materials and cannot be made responsible for the saved content." %}</p>
            {% blocktrans %}

            <p>CarbonFreeConf is not liable for any problems resulting from the participants ideas, remarks, opinions, or comments expressed while using our website. </p>
            <p>If the speakers are sponsored in any way, they are responsible for fulfilling their obligations to their supporting entity.</p>
            <p>CarbonFreeConf is not liable for any technical difficulties that may appear while live-streaming their presentation on the BigMarker platform for any reason.</p>
        </div>
        {% endblocktrans %}

      {% endifequal %}

        {% ifequal link 'fees' %}
        <div class="jumbotron mt-4" style="text-align: left;color: black">
        <h2 style="text-align: center">{% trans 'Registration fees'%}</h2>
        {% blocktrans %}

            <h4><strong>It includes:</strong></h4>
                <p>-You are granted access to the whole conference via our virtual platform.</p>
                <p>-You can access to all the tools provided to interact with your peers, e.g. chat, video call.</p>
                <p>-You can pre-record your talk if you are away during your time slot.</p>
        {% endblocktrans %}

                {% if conftopass.recording %}
                <p>{% trans '-You will have access to the recorded videos for each conference day for at least a month after the conference finishes.'%}</p>
                {% endif %}
                {% blocktrans %}

                <p>-And of course, what you pay goes towards reimbursing the organizers for offsetting the CO<sub>2</sub> emission of this conference.</p>
            <h4><strong>It does not include:</strong></h4>
                <p>-Any personal insurance.</p>
                <p>-Any translation.</p>
                <p>-The material (e.g. computer, internet connection) to access the online conference.</p>

                <h2 style="text-align: center">Payment conditions</h2>

                <p>The fees must be paid prior to the conference or access to the virtual platform will not be granted. An invoice can be
                sent over to you (after the conference), at no charge, via email, should you request it to: sales @ carbonfreeconf.com</p>.

                <h2 style="text-align: center">Cancellation policy</h2>

                <p>The fees can be refunded at 100% (less bank charges of 40 €) if requested up to a month before the conference starts. In this case
                contact sales @ carbonfreeconf.com for the refund and let the organizers know that you will not join (though we kindly remind you that
                    you can pre-record your talk and it can be shown to attendees via our virtual platform even if you are away). Within a month of the
                start of the conference, no refund can be made. However, you can find a substitute person at any time before the conference
                    starts (just let the organizers know and if they agree with this choice, they can substitute your names in their admin panel). </p>

                <h2 style="text-align: center">Liability</h2>
                CarbonFreeConf is a mediator between organizers and participants and shall not be held responsible for any loss incurred, any broken material or any health issues, irrespective of the cause.
                <p></p>

                <h2 style="text-align: center">Privacy policy</h2>
                <p>CarbonFreeConf will add your data to its database using only information they need to run the conference. CarbonFreeConf respects your privacy and the retrieved personal information. They comply with new data protection law (GDPR).</p>
                <p>You can find more details on our <a href="/privacy" target="_blank" style="color: #ee3535">complete privacy policy</a> and the <a href="terms" style="color: #ee3535" target="_blank">terms and conditions</a> when using CarbonFreeConf.
                In this regard, you can contact sales @ carbonfreeconf.com to ask for access to your data or to modify them or even delete the information they have stored.</p>

                {% endblocktrans %}

        </div>
      {% endifequal %}
      </main>
    {% endblock content %}



      <footer class="footer">

        <span class="underline"></span>

        {% if conftopass.website.share %}
        <p class="hashtag">{% trans 'The twitter hashtag for the conference is'%} {{ conftopass.twitterhashtag }}</p>
        <div class="fb-share-button" data-href="https://www.carbonfreeconf.com/website/{{ confnum }}/home" data-layout="button" data-size="small">
          <a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.carbonfreeconf.com%2Fwebsite%2F{{ confnum }}%2Fhome&amp;src=sdkpreparse">{% trans 'Share'%}</a>
        </div>
        <a class="twitter-share-button" href="https://twitter.com/intent/tweet">{% trans 'Tweet'%}</a>
        {% endif %}

        {% ifnotequal link 'home' %}
        <p>{{ conftopass.title }} {% if conftopass.masterconf %} - {% trans 'Plenaries'%} {% endif %}{% if conftopass.daughterconf %} - {% trans 'Session of'%} <a href="{% url 'my_app:website' confma.id 'home' %}" target="_blank">{{ confma.title }}</a>{% endif %}</p>
        {% endifnotequal %}
        <p class="copyright">{% trans 'Website hosted and provided by' %} <a href="{% url 'my_app:home' %}">CarbonFreeConf</a>.</p>

      </footer>
    </div>


        <script>
    //var $unique = $(".uniqueid");

    function refresh(sel) {
        alert('test')
        //alert(sel.options[sel.selectedIndex].value);
        $unique.val(sel.options[sel.selectedIndex].value);
    }

    //var test=$("#role-select :selected").val();
    //alert(test);
    //var $unique = $(".uniqueid");
    //$unique.val(test);

    </script>

    <script>
        $(function() {
           $("#confirm").click(function() {
               var theThis = $(this);
               $.confirm({
                   title: 'Record talk?',
                   content: 'Do you really want to record this talk now? Note that if you have already recorded this talk, it will then be overridden.',
                   buttons: {
                       confirm: function () {
                            theThis.closest('form').submit();
                       },
                       cancel: function () {

                       },
                   }
               });
           });
        });
    </script>

        <script>
        $(function() {
           $("#testbm").click(function() {
               var theThis = $(this);
               $.confirm({
                   title: 'Test the virtual conference room now?',
                   content: 'Do you really want to test the virtual conference room now? You can only do it once and for a maximum of 15 mins.',
                   buttons: {
                       confirm: function () {
                            theThis.closest('form').submit();
                       },
                       cancel: function () {

                       },
                   }
               });
           });
        });
    </script>



<script>
    var modalDiv = $("#modal-div");
    $(function () {
     $(document).on('click', '[data-toggle="modalo"]', function () {
  //$('[data-toggle="modall"]').on('click', function() {
      //alert('open');
        $.ajax({
            url: $(this).attr("data-url"),
            success: function (data) {
                //alert('brah')
                modalDiv.html(data);
                $("#extraLargeModal").modal({backdrop: false});
            }
        });
  });
})
</script>

<script>
$(document).ready(function() {
    //alert(window.location.href.indexOf('#myModal'));
  if(window.location.href.indexOf('#PosterID') != -1) {
    const modalID = window.location.href.split('PosterID').reverse()[0];
    //alert(modalID);
    if(modalID) {
        var modalDiv = $("#modal-div");
        $.ajax({
            url: '/posters/'+modalID+'/',
            success: function (data) {
                //alert('brah')
                modalDiv.html(data);
                $("#extraLargeModal").modal({backdrop: false});
            },
            error: function (jqXHR, exception) {
                //console.log(jqXHR);
                alert('Poster not found!')
                // Your error handling logic here..
            }

        });
    }
  }

});
</script>

        <script>
    $(function () {
        $('body').tooltip({selector: '[data-toggle="tooltip"]'});

      //$('[data-toggle="tooltip"]').tooltip()
    })
</script>
    {% endif %}
    </div>

<script>
    function getSignedRequest2(filename,file, talknum, loopnum){
      var xhr = new XMLHttpRequest();
      xhr.open("GET", "/sign_s3?file_name="+filename+"&file_type=video/mp4");
        //alert('joe');
      xhr.onreadystatechange = function(){
          //alert('joee1'+xhr.readyState);
        if(xhr.readyState === 4){
            //alert('joee'+xhr.status);
          if(xhr.status === 200){
              //alert('joee3');
            var response = JSON.parse(xhr.responseText);
              //alert(response.data+response.url);
              //alert('joe2');
            uploadFile2(file, response.data, response.url, talknum, loopnum);
          }
          else{
            alert("Could not get signed URL.");
          }
        }
      };
      xhr.send();
    }
</script>
<script>
        async function uploadFile2(file, s3Data, url, talknum, loopnum){

          var xhr = new XMLHttpRequest();
          xhr.open("POST", s3Data.url,false);
          //alert(file.name+xhr);

          var postData = new FormData();
          for(key in s3Data.fields){
            postData.append(key, s3Data.fields[key]);
          }

          postData.append('file', file);
          //alert('joe22quenman'+talknum);

          xhr.onreadystatechange = function() {
              //alert('joe23man');
            if(xhr.readyState === 4){
                      //alert('joe23');
              if(xhr.status === 200 || xhr.status === 204){
                //alert('joe3'+talknum);
                updatevaluerecordb2(talknum,url,loopnum);
                //document.getElementById("preview").src = url;
                //document.getElementById("avatar-url").value = url;
                  //un coup d'ajax pour mettre see video et remplir la bdd avec l'url_mp4

              }
              else{
                alert("Could not upload file.");
              }
           }
          };
          xhr.send(postData);
        }
</script>

  {% if confnum %}
<script>
        function updatevaluerecordb2(idtalk,url,loopnum) {
            console.log("record is working!"); // sanity check
            //console.log(thisObj.closest("form").find('.pfnplus').val());
            //alert(thisObj.closest("form").find('.pfnplus').val());
            //alert(idtalk+url+loopnum);
            $.ajax({
                url : '/updatevaluerecord2/', // the endpoint
                type : "POST", // http method
                async: false,
                data : {    idtalk : idtalk,
                            loopnum : loopnum,
                            url : url,
                            csrfmiddlewaretoken : '{{ csrf_token }}'
                        }, // data sent with the post request
                success : function(json) {
                    //alert('yo2');
                    //$("div[id='test2']").text('');
                    $('#test23'+json.loopnum).text('');
                    $('#teste23'+json.loopnum).text('');

                    //console.log(json); // log the returned json to the console
                    //document.body.removeChild(child);spinner-border text-warning mt-2
                     if (json.success == 1) {
                         //alert('joe success');
                         //$("#spinner"+json.loopnum).remove();
                         $("#spin"+json.loopnum).remove();
                         //$("#h"+json.loopnum).remove();
                         //$("#col"+json.loopnum).remove();
                         $("#file-name"+json.loopnum).text("The file was uploaded");

                         if (json.talkrepl == 0) {
                             if (json.type == 4) {
                                 $("#test23" + json.loopnum).append('<a href="' + json.url + '" class="btn btn-warning btn-record mt-2" target="_blank" style="color:white"><strong>See your recorded poster</strong></a>');
                             }else{
                                 $("#test23" + json.loopnum).append('<a href="' + json.url + '" class="btn btn-warning btn-record mt-2" target="_blank" style="color:white"><strong>See your recorded talk</strong></a>');
                             }
                             $('#test23' + json.loopnum).before('<div class="col-sm-3"></div>');
                         }else {
                             $("#teste23" + json.loopnum).addClass("col-sm-3 mx-auto");
                             if (json.type == 4) {
                                 $("#teste23" + json.loopnum).append('<a href="' + json.url + '" class="btn btn-warning btn-record mt-2" target="_blank" style="color:white"><strong>See your recorded poster</strong></a>');

                             }else{
                                 $("#teste23" + json.loopnum).append('<a href="' + json.url + '" class="btn btn-warning btn-record mt-2" target="_blank" style="color:white"><strong>See your recorded talk</strong></a>');
                             }
                             $('#teste23' + json.loopnum).before('<div class="col-sm-12"></div>');
                             //alert('#teste23' + json.loopnum);
                         }

                         window.location = '{% url "my_app:website" confnum "mytalks" %}';

                     //       $("#test22").append("<p>" + json.result + "</p>");
                    }

                    console.log("success plus"); // another sanity check
                },

                // handle a non-successful response
                error: function (xhr, error) {
                    alert('r');
                    console.debug(xhr);
                    console.debug(error);
                }

            })/*.done(function (data) {
    debugger;
}).fail(function (data) {
    debugger;
}).always(function(data) {
    alert("complete");
});*/
        };
</script>
  {% endif %}

  <script>
    $("body").on('change','.success.addtosession', function () {
        var self = $(this);
        //alert('t');
        //if (self.is(":checked")) {
            console.log("checkbox  id =" + self.attr("id") + " is checked ");
            //$("#content").html('yo');
            $.ajax({
            url : '/changesessionmulti/', // the endpoint
            type : "POST", // http method
            data : {    confnum : self.attr("id"),//thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                        che : self.prop('checked'),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2')
                //$("div[id='content']").text('');
                //$("#content").remove();
                //var sched = ;
                if (json.success == 1) {
                    //alert('suc');
                    //$("#content").append(sched)
                    //$("#content").load()
                    //$('#content').load('/sched', {'loca':"createconf", 'confnum':"7", 'start_date':"01/01/01",'csrfmiddlewaretoken': "{{ csrf_token }}",});
                    if(json.peuxpas == 0) {
                        $('#partadd').text('');
                        //self.find()$('#valida').text('');
                        //self.parent().find('span.valida').remove();
                        self.parents('li').find('.valida').text('');
                        if(json.sta == 1) {
                            self.parents('li').find('.valida').append('<i data-toggle="tooltip" data-placement="right" title="It was validated by organizers" class="fas fa-check-circle"></i>');
                        }else {
                            self.parents('li').find('.valida').append('<i data-toggle="tooltip" data-placement="right" title="Not yet validated by organizers" class="fas fa-times-circle"></i>');
                        }
                        if(json.warn){
                            self.prop('checked', true);
                            alert('This session cannot be ticked off as you have one participation that is awaiting acceptance');
                        }
                        if(json.cantchange) {
                            self.prop('checked', true);
                            alert('As you are the main organizer, you cannot untick your participation');
                        }
                        $('#partadd').append('<div class="alert alert-success mt-3 mr-5 ml-5" role="alert"><p>The modification was accounted for.</p></div>');


                    }else if (json.peuxpas == 2) {
                        $('#partadd').text('');
                        self.prop('checked', true);
                        alert('The plenary session cannot be ticked off as organizers decided you are automatically added to it once you have a participation accepted!');
                    }else{
                        $('#partadd').text('');
                        self.prop('checked', true);
                        alert('This session cannot be ticked off as you participate to it');
                    }

                }
                console.log("changesessionmulti"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });

        //} else {
          //  console.log("Id = " + self.attr("id") + " is Unchecked ");
        //}
    });
</script>

      {% if confnum %}
      <script>
    $("body").on('click','#adminpanel', function () {
        //var self = $(this);
        //alert('t');
        //if (self.is(":checked")) {
            //console.log("checkbox  id =" + self.attr("id") + " is checked ");
            //$("#content").html('yo');
            $.ajax({
            url : '/adminpanel/', // the endpoint
            type : "POST", // http method
            data : {    confnum : {{ confnum }},//thisObj.closest("form").find('.pconfnumplus').val(),//$('#confnumid').val(),
                        //che : self.prop('checked'),
                        csrfmiddlewaretoken : '{{ csrf_token }}',//$('input[name=csrfmiddlewaretoken]').closest("form"),
                    }, // data sent with the post request

            // handle a successful response
            success : function(json) {
                //alert('yo2')
                //$("div[id='content']").text('');
                //$("#content").remove();
                //var sched = ;
                if (json.success) {
                    //alert('suc'+json.confnum);
                    //window.location = '{% url "my_app:createconf" %}';
                    window.open('{% url "my_app:createconf" %}', '_blank');

                }
                console.log("c"); // another sanity check
            },

            // handle a non-successful response
            error : function(xhr,errmsg,err) {
                $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                    " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
                console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
            }
        });

        //} else {
          //  console.log("Id = " + self.attr("id") + " is Unchecked ");
        //}
    });
</script>
{% endif %}

  <script>
    $(document).ready(function(){
        $('[rel="tooltip"]').tooltip({trigger: "hover"});
    });
</script>

      <script>
    $("body").on('change','#id_type', function () {

        //alert('re'+$('#id_type').find(":selected").val());
        $("#titlehid").show();
        $("#abshid").show();
        $("#biohid").show();


        if ($('#id_type').find(":selected").val()==5) {//Attendance only
            //alert('yo2');
            $("#abshid").hide();
            $("#titlehid").hide();
            $("#biohid").hide();
        }

    }
    )
      </script>
  <script>
    var modalDiv3 = $("#modal-div3");
     $(function () {
      $(document).on('click', '[data-toggle="modall3"]', function() {
          //alert('open');
            $.ajax({
                url: $(this).attr("data-url"),
                success: function (data) {
                    //alert('brah')
                    modalDiv3.html(data);
                    $("#myEdit3").modal();
                }
            });
      });
    })
</script>




   <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!--<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>

   <!-- Start of Rocket.Chat Livechat Script -->
    <!--<script type="text/javascript">
    (function(w, d, s, u) {
        w.RocketChat = function(c) { w.RocketChat._.push(c) }; w.RocketChat._ = []; w.RocketChat.url = u;
        var h = d.getElementsByTagName(s)[0], j = d.createElement(s);
        j.async = true; j.src = 'https://chat.carbonfreeconf.com/livechat/rocketchat-livechat.min.js?_=201903270000';
        h.parentNode.insertBefore(j, h);
    })(window, document, 'script', 'https://chat.carbonfreeconf.com/livechat');
    </script>-->
    <!-- End of Rocket.Chat Livechat Script -->

<script>
    $(document).ready(function() {
    $("#butabs").click(function() {

      //alert(idtosubmit);
      $(this).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);

      $("#formdown")[0].submit()
    });
});
    </script>

  <script>
$(document).ready(function () {

    $('body').on('click', '#ranpos', function (event) {
        //event.preventDefault();
        //alert($(this).attr('data-url'));
        //$(this).attr('data-url')
        max={{ idposters|length }};
        max=max-1;
        min=0;
        var rannum = Math.floor(Math.random() * (max - min + 1)) + min;

        var fu = $('#ranpos');
        var idtoshow = JSON.parse(JSON.stringify({{ idposters }}));

        //alert('id'+idtoshow+' '+idtoshow[rannum]+' '+rannum);
        //var idqu = idtoshow.replace("112", "");
        fu[0].dataset.url = "/posters/"+idtoshow[rannum];

    });
})
</script>

<script>

    $(document).ready(function() {

    $('body').on('click', '.more', function(e) {

  //$('.more').click(function(e) {
    e.preventDefault();
    var thisSib = $(this).prevAll(".fulltext");/*.next("p");*/
    //alert('thi'+thisSib);

    var thisSib2 = $(this).prevAll(".shorttext");
    thisSib2.hide();

    if (thisSib.css('display') == 'none'){
        thisSib.show();
        thisSib2.hide();
        $(this).html('<i class="fas fa-caret-up"></i> READ LESS');
    }else{
        thisSib2.show();
        thisSib.hide();
        $(this).html('<i class="fas fa-caret-down"></i> READ MORE');
    }

  });

});

</script>


      <script>
    Handlebars.registerHelper('ifCond', function (v1, operator, v2, options) {

    switch (operator) {
        case '==':
            return (v1 == v2) ? options.fn(this) : options.inverse(this);
        case '===':
            return (v1 === v2) ? options.fn(this) : options.inverse(this);
        case '!=':
            return (v1 != v2) ? options.fn(this) : options.inverse(this);
        case '!==':
            return (v1 !== v2) ? options.fn(this) : options.inverse(this);
        case '<':
            return (v1 < v2) ? options.fn(this) : options.inverse(this);
        case '<=':
            return (v1 <= v2) ? options.fn(this) : options.inverse(this);
        case '>':
            return (v1 > v2) ? options.fn(this) : options.inverse(this);
        case '>=':
            return (v1 >= v2) ? options.fn(this) : options.inverse(this);
        case '&&':
            return (v1 && v2) ? options.fn(this) : options.inverse(this);
        case '||':
            return (v1 || v2) ? options.fn(this) : options.inverse(this);

        default:
            return options.inverse(this);
    }
    });

    Handlebars.registerHelper("inc", function(value, options)
    {
        return parseInt(value) + 1;
    });
    </script>

  <script>
    tz=Intl.DateTimeFormat().resolvedOptions().timeZone;
    //$(document).ready(function() {
        $.ajax({
            method: 'POST',
            url: '{% url "my_app:set_timezone" %}',//'../../set_timezone',
            data: {csrfmiddlewaretoken: "{{ csrf_token }}",'timez': tz},
            //async: false,
            success: function (data) {
                //this gets called when server returns an OK response
                //alert("{{ status }}"+"it worked!"+"{{ currenttz }}");
                if ("{{ currenttz }}" == '' & "{{ status }}" != "6")
                {
                    //alert('relaod');
                    location.reload();
                }
            },
            error: function (data) {
                //alert("it didnt work");
            }
        });
    //});
    </script>

    <script>
      let navResponsive = document.getElementsByClassName("nav-links")[0];
      let navResponsiveLower = document.getElementsByClassName("lower-nav-links")[0];
      let hamburgerMenu = document.getElementsByClassName("hamburger")[0];
      let overlayMenu = document.getElementsByClassName("overlay")[0];
      hamburgerMenu.addEventListener("click", function() {
        navResponsive.classList.toggle("open");
        navResponsiveLower.classList.toggle("open");
        overlayMenu.classList.toggle("appear");
        this.classList.toggle("isOpened");
      });
      overlayMenu.addEventListener("click", function() {
        navResponsive.classList.remove("open");
        navResponsiveLower.classList.remove("open");
        this.classList.remove("appear");
        hamburgerMenu.classList.remove("isOpened");
      });
    </script>

  </body>
</html>